{
  "course_name": "Airline Schedule Planning",
  "course_description": "Explores a variety of models and optimization techniques for the solution of airline schedule planning and operations problems. Schedule design, fleet assignment, aircraft maintenance routing, crew scheduling, passenger mix, and other topics are covered. Recent models and algorithms addressing issues of model integration, robustness, and operations recovery are introduced. Modeling and solution techniques designed specifically for large-scale problems, and state-of-the-art applications of these techniques to airline problems are detailed.",
  "topics": [
    "Engineering",
    "Systems Engineering",
    "Systems Optimization",
    "Social Science",
    "Urban Studies",
    "Transportation Planning",
    "Engineering",
    "Systems Engineering",
    "Systems Optimization",
    "Social Science",
    "Urban Studies",
    "Transportation Planning"
  ],
  "syllabus_content": "Course Meeting Times\n\nLectures: 2 sessions / week, 1.5 hours / session\n\nLecturer\n\nProf. Cynthia Barnhart\n\nTeaching Assistant\n\nStephane Bratu\n\nPrerequisites\n\nPermission of instructor\n\nDescription\n\nExplores a variety of models and optimization techniques for the solution of airline schedule planning and operations problems. Schedule design, fleet assignment, aircraft maintenance routing, crew scheduling, passenger mix, and other topics are covered. Recent models and algorithms addressing issues of model integration, robustness, and operations recovery are introduced. Modeling and solution techniques designed specifically for large-scale problems, and state-of-the-art applications of these techniques to airline problems are detailed.\n\nAssignments\n\n3 assignments, each representing 15% of the grade, a mid-term quiz representing 20% of the grade, and one project presentation and report representing 35% of the grade.\n\nAcademic Honesty Policy\n\nThe Department of Civil and Environmental Engineering adheres to the strictest standards of academic honesty. An important aspect of achieving these standards is to be sure that students are aware of expectations of faculty regarding academic honesty. This statement clarifies the faculty's expectations in 1.206J.\n\nAssignments\n\nAssignments performed by students for submission have a dual purpose. They are intended as educational devices, including the teaching of skills such as working in teams. They are also evaluation tools for the faculty in judging the quality of performance of individual students. Our policies are intended to balance these two purposes and, unless otherwise stated, these policies apply to all assignments.\n\nStudents\ncurrently\ntaking this class can work together to conceptualize general approaches to assignments. However, unless otherwise specified for a particular assignment, the work you submit should be done completely on your own. This includes text, numerical calculations, mathematical derivations, diagrams, graphs, computer programs and output.\n\nReference any written source you use in your submission.\n\nIn-class Exams\n\nAll work on in-class exams should be performed only by you. Materials you can bring into the examination will be specified by the faculty for each exam.\n\nIf you have any questions about how these policies relate to a specific situation, you should speak to Professor Barnhart.\n\nSource: Professor Sussman's academic honesty statement for 1.221J.",
  "files": [
    {
      "category": "Resource",
      "title": "assn1.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/1-206j-airline-schedule-planning-spring-2003/cfa13a2badd3d1736e39d4bce4516f30_assn1.pdf",
      "content": "1.206J/16.77J/ESD.215J Airline Schedule Planning\nProblem Set #1\nBarnhart C.\nDue date: Monday, March 10, 2003\n\nProblem #1: Express package operation\n\nAssume a shipping company has 2 factories (A and B) and 3 distribution centers (C, D and E)\nthat are connected with directed arcs (e.g., aircraft routes). Each arc,\n, can carry a\nmaximum number of units of flow\n. Every unit of commodity has to pay\nto flow on\narc\n, independently of its type. A commodity k is defined as a shipment type from an\norigin factory\nto a destination distribution center\n. We denote\nto be the number\nof units of commodity k from O(k) to D(k). The objective is to minimize the total shipping cost\nfor the company subject to conservation of flows, arc capacity limits and flow non-\nnegativity.\n(i,j)\nu(i,j)\nc(i,j)\n(i,j)\nO(k)\nD(k)\nn(k)\nA\nB\nC\nD\nE\na\nb\nc\nh\nd\ne\ng\nf\nA\nB\nC\nD\nE\na\nb\nc\nh\nd\ne\ng\nf\n\nFig. 1: Network representation\nk\nFrom O(k)\nTo D(k)\nn(k)\nk1\nA\nC\nk2\nA\nD\nk3\nA\nE\nk4\nB\nC\nk5\nB\nD\nk6\nB\nE\n\n-1-\n\nTab. 1: Commodity table\nArc i\nFrom\nTo\nc ($000/unit)\nu\na\nA\nB\n0.5\nb\nA\nC\nc\nA\nD\nd\nB\nC\n0.5\ne\nB\nD\nf\nB\nE\ng\nC\nE\nh\nD\nE\nTable 2: Arcs table\n\nQuestions:\n1.\nProve that if a network is acyclic, there always exists a topological ordering of the\nnodes in the network.\n2.\nWrite the node-arc multi-commodity flow problem formulation and define all\nnotations (e.g., parameters, decision variables, etc.).\n3.\nSolve the problem using OPL Studio. Give the optimal objective value as well as\nthe values of the optimal decision variables and the optimal dual variables. Check\nthat the optimality conditions are satisfied. Use OPL structure to write only the non-\nzero coefficients (as explained during the tutorial) and comment on the benefit of\nusing it for large scale problems.\n4.\nAssume that the company can invest $1,000/unit to increase the arc capacity\nby one unit (i.e., from 10 to 11). Without resolving the problem, can you tell if\nthis investment would benefit the company? Explain your reasoning and check if\nyour decision is correct by solving a new LP.\nu(A,B)\n5.\nAssume that the accounting department asks you to quickly access (i.e., without\nresolving the problem) whether it might benefit the company to use arc f given a\nreduction in the cost of commodity k3 by $600/unit. Explain your reasoning. Verify\nyour assessment by changing the cost coefficient and resolving the problem.\n6.\nWrite the path formulation of the multi-commodity flow problem. Show that the\nnode-arc and the path formulations are equivalent (hint: show similarity of feasible\nspace and objective function).\n\n-2-\n\n7.\nAssume now that each shipment has to go through only one single path. Solve the\nproblem using only the LP solver. Describe and explain every step of your\nalgorithm.\n8.\nWrite the sub-network formulation of the problem. Assuming again continuous\nvariables, solve the formulation using OPL Studio. Discuss and compare the\nadvantages and disadvantages of the node-arc, path and sub-network\nformulations.\n\nProblem #2: Passenger Mix Model\nIn this problem, you are asked to formulate and implement the Passenger Mix Model\ndescribed in class. This problem serves as an exercise on row and column generation.\n\nPART A: Solving the initial Restricted Master Problem for the PMM Model\n1. Compute unconstrained demand for each flight, based on the unconstrained\ndemand by itinerary (see itinerary worksheet for inputs).\n2. Formulate the initial Restricted Master Problem (RMP) using the Keypath formulation in\nwhich demand constraints are relaxed, using the template provided in the Excel file.\n(Assume that spill is recaptured only on the null itinerary in this initial RMP).\n+\nFill in the objective function coefficients.\n+\nFill in the constraint matrix with appropriate coefficients (The size of this matrix\nis the number of flights multiplied by the number of itineraries).\n+\nCompute the Right-Hand-Side (RHS) values.\n3. Solve the initial RMP using OPL Studio and print out the solution.\n\nPART B: Introducing Recapture and Implementing Row and Column Generation\n\n1.\nCompute the associated objective function coefficients for all possible columns\nomitted from the RMP in PART A using recapture rate information given in the\nRecapture Rate worksheet. (Assume the recapture rate from itinerary i to the null\nitinerary is 1.0, and for all other pairs of itineraries not included in the Recapture\nRate worksheet, the recapture rate is zero).\n2.\nDefine dual variables for the formulation in PART A and write the expression (i.e.,\nequation) for computing reduced cost of a column.\n\n-3-\n\n3.\nGiven the current solution, check for violated constraints and possible negative\nreduced cost columns. (Show your work.) If there are violated constraints or\ncolumns with negative reduced cost, continue to Step 4. If not, skip to Step 7.\n4.\nAdd all negative reduced cost columns and/or violating rows by expanding the\nconstraint matrix from PART A to reflect the additions. Go to Step 5.\n5.\nSolve the modified model using OPL Studio as outlined in PART A. Print the Solution.\nPrint File and mark clearly the columns and rows newly added. Go to Step 6.\n6.\nRepeat Step 3\n7.\nIn order to check if your final solution is indeed optimal, build the entire model with\nall possible rows and constraints and solve it using OPL Studio. Print out the solution\nfile. Explain why you found the same solution.\n8.\nWhy can't you use a shortest path algorithm to find the column to enter the Master\nProblem?\n9.\nNow, consider the slightly modified problem. Suppose that fares are flight based\n(i.e., it cost $c(f) for a passenger to fly on flight f) and there is no recapture. The\nfare associated therefore, with an itinerary corresponds to the sum of the fares\nassociated with the flight leg traversed. Describe but do not compute the steps of\nan efficient algorithm to solve the problem. In a real size airline planning, how\nwould you consider, in the column generation problem, the constraint that\nitineraries cannot have more than 3 flight legs? Discuss complexity issues.\n\n-4-"
    },
    {
      "category": "Resource",
      "title": "assn2.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/1-206j-airline-schedule-planning-spring-2003/e78db2e3972aabd554e5845009c22e7b_assn2.pdf",
      "content": "1.206J/16.77J/ESD.215J Airline Schedule Planning\nProblem Set #2\nBarnhart C.\nDue date: Monday, April 7th, 2003\n\nPart I: Implementing FAM\n\nYou are working as the chief scheduler for this newly formed airline, Cheapo airlines (\"the\ncheapest airline in the sky\" (r)). Cheapo can lease up to 2 Boeing 737-500 and 2 Airbus A320.\nThe relevant data for each of these aircraft types are as follow:\n\nAircraft type\nSeats\nTurn Time\nBoeing 737-500\n25 minutes\nAirbus A320\n35 minutes\n\nCheapo airlines flies between three airports: A, B and C. The relevant data for each flight\nleg is contained in the following schedule table:\n\nFlight Number Origin\nDestination\nDeparture\nArrival\nA\nB\n8:30AM\n10:15AM\nC\nB\n9:00AM\n10:30AM\nB\nC\n11:00AM\n12:30PM\nB\nA\n2:00PM\n3:45PM\nC\nA\n2:15PM\n3:15PM\nA\nC\n4:30PM\n5:30PM\n\n1. Draw the daily timeline network from each aircraft type and compute the\nnumber of variables.\n\n-1-\n\n2. Draw the daily timeline network with maximal feasible node consolidation and\ncompute the number of variables.\n3. Write the integer programming constraints for the node-consolidated network.\n\nYou are given the following data:\n\nOperating cost\nFlight Number Number of passengers\nAverage fare\nA320\n$143.85\n$10,500 $13,500\n$142.86\n$9,000\n$13,000\n$144\n$9,000\n$13,000\n$142\n$10,500 $13,500\n$100\n$6,000\n$9,000\n$100\n$6,000\n$9,000\n\n4. Assume for now that all the passengers are locals (they fly on one flight only):\nCalculate the objective coefficients of the basic Fleet Assignment Model (FAM),\nwhich minimizes the profitability (sum of the operating costs and the spill costs),\nand find the optimal solution using OPL Studio.\n5. In reality, some passengers are connecting in airport B. The passenger itinerary\nmatrix is given below:\n\n#\nFrom\nTo\nItinerary\nNumber of passengers\nFare\nA\nB\n\n$150\nA\nC\n$130\nC\nB\n\n$150\nC\nA\n$130\nB\nC\n\n$150\nB\nA\n\n$150\nC\nA\n\n$100\nA\nC\n\n$100\n\n6. Solve the Itinerary Fleet Assignment Model (IFAM) with no recapture using OPL\nStudio.\n7. Compare and comment on the profitability of FAM and IFAM fleet assignment\nsolutions.\n8. Assume that you are given the additional information that 20% of the passenger\noriginally scheduled on flights 102 and 302 (itinerary 2) but who are spilled,\naccept to be re-accommodated on flight 120 (itinerary 8). Can you tell, using\nonly the LP solver if this itinerary might improve the fleet assignment solution found\nin question 6?\n\n-2-\n\nPart II: Side Constraint Modeling\n\n9. Write the Fleet Assignment Model mathematically for the general case, and\nclearly define your variables, parameters and sets.\n\nHow would you model the following constraints?\n\n10. Station exclusion: Due to restrictions, fleet type f cannot fly into airport j.\n11. Noise restriction: Due to municipal laws, no more than 30% of departures out of\nairport j can be of fleet type f or g.\n12. Crew: The number of flying hours of fleet f cannot exceed the maximum number\nof available crew hours,\n.\nC(f)\n13. Require through: A required through flight corresponds to connecting flight legs\nwith the same flight number (which is interesting for marketing purposes). This\nmeans that both flight legs (say i and\n) must be of the same fleet type. How\nwould you model this?\n2i\n14. Two-service maintenance: The two-service maintenance for fleet f are at airport:\nj, k and m. At least n aircraft of fleet type f must overnight at one of these\nairports.\n\n-3-"
    },
    {
      "category": "Resource",
      "title": "assn3.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/1-206j-airline-schedule-planning-spring-2003/fc35f87668818fdcde93b0776e9a77fb_assn3.pdf",
      "content": "1.206J Airline Schedule Planning\nProblem Set #3\nDue date: 4/23/03\n\nInstructions: Answer each part of the questions completely. You may use any books and\nother outside materials to work on the problems and you may work in groups. However,\nstudents should hand in their own write-up. Please answer the question as fully as\npossible (after all some do not have \"right\" answers, we are just seeing how you would\napproach and think about the problem) and explicitly state any assumptions that you are\nusing.\n\nProblem #1: Generating Pairings on a Duty-Based Network\n\nA typical crew pairing problem has hundreds of millions of feasible pairings. Therefore,\nwe use branch-and-price to solve these problems. In class, we talked about how to\ngenerate pairings by solving a multi-label shortest path problem over a flight connection\nnetwork. In this exercise, we develop an alternative approach to the crew pairing pricing\nproblem.\nFor this exercise, assume the following rules:\n- Duties cannot contain more than 8 hours of flying time.\n- Duties cannot contain more than 14 hours of duty time.\n- The minimum sit time between two flights in a duty in 30 minutes.\n- The maximum sit time between two flights in a duty is 90 minutes.\n- Pairings cannot span more than 4 days.\n- The minimum rest time between duties is 8 hours.\n- The maximum rest time between duties is 18 hours.\n\n1. Instead of thinking about a pairing as a sequence of flights, we can think of it as a\nsequence of duties. How would you define a network for the pricing problem in this\ncase? What constitutes a node in this network? An arc? Demonstrate how a path in\nthis network corresponds to a pairing and how the cost of this path corresponds to\nthe reduced cost of the pairing.\n2. In order to use this network to find the most negative reduced cost pairing, we must\nsolve a multi-label shortest path problem. Define the elements included in a label.\n3. Outline an algorithm for solving this multi-label shortest path problem. Pay particular\nattention to describing when one label dominates another.\n\n4. Compare these two approaches (i.e. flight-based versus duty-based pairing\ngeneration). Which network would you expect to have more nodes? Would you\nexpect more or fewer labels kept at each node, on average? Which method do you\nthink would work better in a domestic network? An international network?\n5. Consider the special case where pairings are not allowed to have more than two\nduties. How would you modify the duty-based network to take this into account? Do\nyou still need to use a multi-label shortest path algorithm, or can you solve a basic\nshortest path problem?\n\nProblem 2: An Alternative Way to Integrate Crew Pairing and Maintenance Routing\n\nIn the extended crew pairing model (ECP) we start with a restricted master problem that\nguarantees feasibility, and then iteratively add maintenance routing columns to improve\nsolution quality. In this exercise, we consider an alternative approach, where we instead\nstart with an unconstrained version of the crew pairing problem and add maintenance\nrouting constraints to enforce feasibility.\n\n1.\nIn the first step of this approach we solve an unconstrained crew pairing problem -\nthat is, we solve the crew pairing problem in which all forced turns are included.\nHow can you determine if this solution is maintenance feasible?\n2.\nIf the solution is maintenance feasible, is it optimal for the integrated maintenance\nrouting/crew pairing problem? Why or why not?\n3.\nSuppose the crew pairing solution is maintenance-infeasible. Describe a constraint\nthat you can add to the crew pairing problem that will eliminate the infeasible set of\npairings.\n4.\nSuppose that you add this constraint to the unconstrained crew pairing problem\nand then re-solve. You now need to again check for maintenance feasibility. It is\npossible that you will be faced with the exact same feasibility problem. Explain why\nthis is so. How could you construct an alternative constraint, based not on pairings\nbut on forced turns, which would ensure that each maintenance feasibility problem\nwould be unique?\n5.\nIn each iteration of ECP, we add a column corresponding to a maintenance-\nfeasible forced turn set. We demonstrated how the algorithm could be made more\nefficient by only adding columns that corresponded to maximally independent\nforced turn sets - that is, forced turn sets that are maintenance feasible but for\nwhich increasing the set by adding any further forced turns yields infeasibility. Can\nyou explain what it would mean to similarly restrict the constraints in our new\napproach to be minimally infeasible? How would this improve the performance of\n\nthe algorithm? Describe (in words) the problem of identifying such a set. [You do\nnot have to formulate this problem mathematically.]\n6.\nConsider this approach of alternating between solving the unconstrained crew\npairing problem and adding constraints based on minimally infeasible forced turns\nsets. Is this algorithm guaranteed to terminate in a finite number of steps? Why or\nwhy not? If it terminates, are you guaranteed an optimal solution to the integrated\ncrew pairing/maintenance routing problem?"
    },
    {
      "category": "Lecture Notes",
      "title": "lec1_rev_2003_schedule_planning_and_networks.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/1-206j-airline-schedule-planning-spring-2003/bb0bc8d76cb9bdd3e790ef9789be5ef6_lec1_rev_2003_schedule_planning_and_networks.pdf",
      "content": "1.206J/16.77J/ESD.215J\nAirline Schedule Planning\nCynthia Barnhart\nSpring 2003\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\n1.206J/16.77J/ESD.215J Airline\nSchedule Planning\nOutline\n- Sign-up Sheet\n- Syllabus\n- The Schedule Planning Process\n- Flight Networks\n- Time-line networks\n- Connection networks\n- Acyclic Networks\n- Shortest Paths on Acyclic Networks\n- Multi-label Shortest Paths on Acyclic Networks\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nFleet Planning\nSchedule\nPlanning\n-\nRoute Development\n-\nSchedule Development\no\nFrequency Planning\no\nTimetable Development\no\nFleet Assignment\no\nAircraft Rotations\nCrew Scheduling\nAirport Resource\nManagement\nPricing\nRevenue\nManagement\nSales and\nDistribution\nOperations Control\nSHORT TERM\nLONG TERM\nTACTICAL\nSTRATEGIC\nTime Horizon\nTypes of Decision\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nRoute individual aircraft honoring\nmaintenance restrictions\nAssign aircraft types to flight legs\nsuch that contribution is maximized\nA flight specifies origin, destination,\nand departure time\nContribution = Revenue - Costs\nAirline Schedule Planning\nSchedule Design\nFleet Assignment\nAircraft Routing\nCrew Scheduling\nSelect optimal set of flight legs\nin a schedule\nAssign crew (pilots and/or flight\nattendants) to flight legs\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nAirline Schedule Planning:\nIntegration\nSchedule Design\nFleet Assignment\nAircraft Routing\nCrew Scheduling\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nAirline Schedule Planning:\nIntegration\nSchedule Design\nFleet Assignment\nAircraft Routing\nCrew Scheduling\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nFlight Schedule\n- Minimum turn times = 30 minutes\n20:00\n18:00\nA\nB\n17:00\n16:00\nB\nC\n11:00\n9:30\nC\nB\n8:30\n6:30\nB\nA\nArrival\nTime\nDep.\nTime\nDestin.\nOrigin\nFlight\nNo.\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nTime-Space Flight Network Nodes\n- Associated with each node j is a location\nl(j) and a time t(j)\n- A Departure Node j corresponds to a\nflight departure from location l(j) at time\nt(j)\n- An Arrival Node j corresponds to a\nflight arrival at location l(j) at time t(j) -\nmin_turn_time\n- t(j)= arrival time of flight + min_turn_time =\nflight ready time\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nTime-Space Flight Network Arcs\n- Associated with each arc jk (with\nendnodes j and k) is an aircraft\nmovement in space and time\n- A Flight Arc jk represents a flight\ndeparting location l(j) at time t(j) and\narriving at location l(k) at time t(k) -\nmin_turn_time\n- A Ground Arc or Connection Arc jk\nrepresents an aircraft on the ground at\nlocation l(j) (= l(k)) from time t(j) until\ntime t(k)\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nTime-Line Network\n8:00\n12:00\n16:00\n20:00\n8:00\n12:00\n16:00\n20:00\nCity A\nCity B\nCity C\nCity D\n- Ground arcs\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nConnection Network\n8:00\n12:00\n16:00\n20:00\n8:00\n12:00\n16:00\n20:00\nCity A\nCity B\nCity C\nCity D\n- Connection arcs\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nTime-Line vs. Connection Flight\nNetworks\n- For large-scale problems, time-line network\nhas fewer ground arcs than connection arcs in\nthe connection network\n- Further reduction in network size possible\nthrough \"node consolidation\"\n- Connection network allows more complex\nrelations among flights\n- Allows a flight to connect with only a subset of\nlater flights\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nTime-Line Network\nI\nJ\nA\nC\nF\nH\nD\nE\nB\nG\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nNode Consolidation\nI\nJ\nA\nC\nF\nH\nD\nE\nB\nG\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nFlight Networks and Shortest Paths\n- Shortest paths on flight networks correspond\nto:\n- Minimum cost itineraries for passengers\n- Maximum profit aircraft routes\n- Minimum cost crew work schedules (on crew-\nfeasible paths only)\n3⁄4Important to be able to determine shortest\npaths in flight networks\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nShortest Path Challenges in Flight\nNetworks\n- Flight networks are large\n- Thousands of flight arcs and ground arcs; thousands of\nflight arcs and tens of thousands connection arcs\n- For many airline optimization problems, repeatedly\nmust find shortest paths\n- Must consider only \"feasible\" paths when\ndetermining shortest path\n- \"Ready time\" (not \"arrival time\") of flight arrival nodes\nensures feasibility of aircraft routes\n- Feasible crew work schedules correspond to a small\nsubset of possible network paths\n- Identify the shortest \"feasible\" paths (i.e., feasible work\nschedules) using multi-label shortest path algorithms\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nCyclic Networks\nAcyclic Networks\nAcyclic Directed Networks\n- Time-line and Connection networks are\nacyclic directed networks\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nAcyclic Networks and Shortest\nPaths\n- Efficient algorithms exist for finding shortest\npaths on acyclic networks\n- Amount of work is directly proportional to the\nnumber of arcs in the network\n- Topological ordering necessary\n- Consider a network node j and let n(j) denote its\nnumber\n- The nodes of a network G are topologically ordered if\nfor each arc jk in G, n(j) < n(k)\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nTopological Orderings\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nTopological Ordering Algorithm\n- Given an acyclic graph G, let n= 1 and\nn(j)=0 for each node j in G\n- Repeat until n=|N|+1 (where |N| is\nthe number of nodes in G)\n- Select any node j with no incoming arcs\nand n(j) = 0.\n- Let n(j) = n\n- Delete all arcs outgoing from j\n- Let n = n+1\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\n(10)\n(0)\n(1)\n(1)\n(1)\n(1)\n(0)\n(0)\n(0)\n(1)\n(0)\n(0)\n(1)\n(1)\n(1)\nShortest Paths on Acyclic\nNetworks\n1: inf, -1\nn(j): l(j), p(j)\n2: inf, -1\n3: inf, -1\n4: inf, -1\n5: inf, -1\n6: inf, -1\n7: inf, -1\n8: inf, -1\n9: inf, -1\n10: inf, -1\n1: 0, 0\n2: 10, 1\n3: 0, 1\n8: 10, 2\n5: 11, 2\n5: 0, 3\n4: 1, 3\n8: 2, 4\n6: 1, 4\n7: 1, 5\n6: 1, 5\n7: 1, 5\n9: 1, 6\n10: 1, 7\n9: 1, 6\n10: 1, 7\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nShortest Path Algorithm for Acyclic\nNetworks\n- Given acyclic graph G, let l(j) denote the\nlength of the shortest path to node j, p(j)\ndenote the predecessor node of j on the\nshortest path and c(jk) the cost of arc jk\n- Set l(j)=infinity and p(j)= -1 for each node j in\nG, let n=1, and set l(1)= 0 and p(1)=0\n- For n<|N|+1\n- Select node j with n(j) = n\n- For each arc jk let l(k)=min(l(k), l(j)+c(jk))\n- If l(k)=l(j)+c(jk), set p(k)=j\n- Let n = n+1\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nMultiple Label (Constrained) Shortest\nPaths on Acyclic Networks\n- Consider the objective of finding the minimum cost path\nwith flying time less than a specified value F\n- Let label tp(j) denote the flying time on path p to node j and\nlabel lp(j) denote the cost of path p to node j, for any j\n- Only paths with tp(j) < F, at any node j, are considered (the\nrest are excluded)\n- A label set must be maintained at node j for each non-\ndominated path to j\n- A path p' is dominated by path p at node j if lp'(j) > lp(j) and tp'(j) > tp(j)\n- If p' is not dominated by any path p at node j, p' is non-dominated at\nj\n- In the worst case, a label set is maintained at each node j for each\npath p into j\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nConstrained Shortest Paths and\nCrew Scheduling\n- Label sets are used to ensure that the shortest path\nis a \"feasible\" path\n- Labels are used to count the number of work hours in a\nday, the number of hours a crew is away from their home\nbase, the number of flights in a given day, the number of\nhours rest in a 24 hour period, etc...\n- In some applications, there are over 2 dozen labels in a\nlabel set\n3⁄4 Many paths are non-dominated\n3⁄4 Exponential growth in the number of label sets (one\nset for each non-dominated path) at each node\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\n(10, 0)\n(0,0)\n(1, 2)\n(1, 1)\n(1, 5)\n(1, 1)\n(0, 3)\n(0, 2)\n(0, 4)\n(1, 2)\n(0, 1)\n(0, 1)\n(1, 1)\n(1, 2)\n(1, 3)\nShortest Paths on Acyclic\nNetworks\n1: inf, inf, -1, -1\np: lp\n1(j), lp\n2(j), pp(j), ppp(j)\n1: inf, inf, -1, -1\n1: inf, inf, -1, -1\n1: inf, inf, -1, -1\n1: inf, inf, -1, -1\n1: inf, inf, -1, -1\n1: inf, inf, -1, -1\n1: inf, inf, -1, -1\n1: inf, inf, -1, -1\n1: inf, inf, -1, -1\n1: 0, 0, 0, 0\n1: 10, 0, 1, 1\n1: 0, 0, 1, 1\n1: 10, 1, 2, 1\n1: 11, 1, 2, 1\n1: 0, 1, 3, 1\n1: 1, 1, 3, 1\n2: 2, 3, 4, 1\n1: 1, 3, 4, 1\n1: 1, 3, 5, 1\n1: 1, 3, 5, 1\n1: 1, 3, 5, 1\n1: 1, 6, 6, 1\n1: 1, 7, 7, 1\n2: 2, 4, 7, 1\n2: 11, 6, 8, 1\n3: 3, 8, 8, 2\nMax value of label 2 = 7\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nConstrained Shortest Path Notation\nfor Acyclic Networks\n- Given acyclic graph G,\n- lp\nk(j) denotes the value of label k (e.g., length,\nflying time, etc.) on label set p at node j\n- pp(j) denotes the predecessor node for label set p\nat node j\n- ppp(j) denotes the predecessor label set for label set\np at node j\n- c(jk) denotes the cost of arc jk\n- m denotes the maximum possible number of\nnon-dominated label sets at any node j\n- np(j) denotes the number of non-dominated label\nsets for node j\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nConstrained Shortest Path Algorithm for\nAcyclic Networks\n- For p = 1 to m, let lp\nk(j)=infinity for each k,\nand np(j)=0, pp(j)= -1 and ppp(j)= -1 for each\nnode j in G\n- Let n=1 and set np(1)=1, l1\nk(1)= 0 for each k,\np1(1)=0 and pp1(1)=0\n- For n<|N|+1\n- Select node i with n(i) = n\n- For each non-dominated p at node i\n- For each arc ij, let np(j)= np(j)+1, pnp(j)(j)=i, ppnp(j)(j)=p\n- For each k, let lnp(j)\nk(j) =lp\nk(i)+c(ij)\n- If lnp(j)\nk(j)>ls\nk(j) for some s=1,..,np(j)-1, then dominated\nand set np(j)= np(j)-1\n- Let n = n+1"
    },
    {
      "category": "Lecture Notes",
      "title": "lec2_2003_mcfs1.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/1-206j-airline-schedule-planning-spring-2003/2839126eee7d400b1f8217b196e0061e_lec2_2003_mcfs1.pdf",
      "content": "1.206J/16.77J/ESD.215J\nAirline Schedule Planning\nCynthia Barnhart\nSpring 2003\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\n1.206J/16.77J/ESD.215J Airline\nSchedule Planning: Multi-commodity\nFlows\nOutline\n- Applications\n- Problem Definition\n- Formulations\n- Solutions\n- Results\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nApplication I\n- Package flow problem (express package\ndelivery operation)\n- Shipments have specific origins and destinations\nand must be routed over a transportation\nnetwork\n- Each set of packages with a common origin-\ndestination pair is called a commodity\n- Time windows (availability and delivery time)\nassociated with packages\n- The objective might be to minimize total costs,\nfind a feasible flow, ...\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nApplication II\n- Passenger mix problem\n- Given a fixed schedule of flights, a fixed\nfleet assignment and a set of customer\ndemands for air travel service on this\nfleeted schedule, the airline's objective is to\nmaximize revenues by accommodating as\nmany high fare passengers as possible\n- For some flights, demand exceeds seat\nsupply and passengers must be spilled to\nother itineraries of either the same or\nanother airline\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nApplication III\n- Message routing problem\n- In a telecommunications or computer\nnetwork, requirements exist for\ntransmission lines and message requests, or\ncommodities.\n- The problem is to route the messages from\ntheir origins to their respective destinations\nat minimum cost\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nMCF Networks\n- Set of nodes\n- Each node associated with the supply of or\ndemand for commodities\n- Set of arcs\n- Cost per unit commodity flow\n- Capacity limiting the total flow of all\ncommodities and/ or the flow of\nindividual commodities\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nMCF Commodity Definitions\n- A commodity may originate at a subset of\nnodes in the network and be destined for\nanother subset of nodes\n- A commodity may originate at a single node\nand be destined for a subset of the nodes\n- A commodity may originate at a single node\nand be destined for a single node\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nMCF Objectives\n- Flow the commodities through the networks\nfrom their respective origins to their\nrespective destinations at minimum cost\n- Expressed as distance, money, time, etc.\n- Ahuja, Magnanti and Orlin (1993)-- survey of\nmulti-commodity flow models and solution\nprocedures\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nMCF Problem Formulations --\nLinear Programs\n- Network flow problems\n- Capacity constraints limit flow of individual\ncommodities\n- Conservation of flow constraints ensure flow\nbalance for individual commodities\n- Flow non-negativity constraints\n- With side constraints\n- Bundle constraints restrict total flow of ALL\ncommodities on an arc\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nMCF Constraint Matrix\nNetwork flow\nproblem,\ncommodity k=1\nBundle constraints limiting total flow of all commodities to arc capacities\nNetwork flow\nproblem,\ncommodity k=2\nNetwork flow\nproblem,\ncommodity k=3\nNetwork flow\nproblem,\ncommodity k=4\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nAlternative Formulations for O-D\nCommodity Case\n- Node-Arc Formulation\n- Decision variables: flow of commodity k on each arc ij\n- Path Formulation\n- Decision variables: flow of commodity k on each path for\nk\n- \"Tree\" or \"Sub-network\" Formulation\n- Define: super commodity: set of all (O-D) commodities\nwith the same origin o (or destination d)\n- Decision variables: quantity of the super commodity k'\nassigned to each \"tree\" or \"sub-network\" for k'\n- Formulations are equivalent\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nSample Network\nCommodities\n#\no\nd\nquant\nArcs\ni\nj cost capy\n2 1\n3 2\n3 3\n4 4\n4 5\na\nb\nc\nd\ne\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nNotation\nParameters\n- A:\nset of all network arcs\n- K:\nset of all commodities\n- N: set of all network nodes\n- O(k) [D(k)]: origin [destination]\nnode for commodity k\n- cij\nk\n: per unit cost of\ncommodity k on arc ij\n- uij\n: total capacity on arc ij\n(assume uij\nk is unlimited for\neach k and each ij)\n- dk\n: total quantity of\ncommodity k\nDecision Variables\n- xijk : number of units\nof commodity k\nassigned to arc ij\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nNode-Arc Formulation\nMinimize\nc x\nij\nk\nij\nk\nk\nij ¦\n¦\nsubject to\notherwise\nk\nD\ni\nd\nk\nO\ni\nd\nx\nx\nk\nk\nj\nk\nji\nj\nk\nij\n)\n(\nif\n)\n(\nif\n\n¦\n¦\n\n: Conservation of Flow\nx\nu\ni j\nA\nij\nk\nk\nij\n¦\nd\n\n( , )\n\n: Bundle constraints\nx\ni j\nA k\nK\nij\nk t\n\n( , )\n,\n\n: Nonnegativity constraints\nk 1\nk 2\nk 3\nk 4\na\nb\nc\nd\ne\na\nb\nc\nd\ne\na\nb\nc\nd\ne\na\nb\nc\nd\ne\nR H S\n= d 1\n- 1\n= 0\n- 1\n- 1\n= - d 1\n- 1\n- 1\n= 0\n= d 2\n- 1\n= 0\n- 1\n- 1\n= 0\n- 1\n- 1\n= - d 2\n= 0\n- 1\n= d 3\n- 1\n- 1\n= 0\n- 1\n- 1\n= - d 3\n= 0\n- 1\n= 0\n- 1\n- 1\n= d 4\n- 1\n- 1\n= - d 4\na\nd u a\nb\nd u b\nc\nd u c\nd\nd u d\ne\nd u e\nc a\nc b\nc c\nc d\nc e\nc a\nc b\nc c\nc d\nc e\nc a\nc b\nc c\nc d\nc e\nc a\nc b\nc c\nc d\nc e\nx a\nx b\nx c\nx d\nx e\nx a\nx b\nx c\nx d\nx e\nx a\nx b\nx c\nx d\nx e\nx a\nx b\nx c\nx d\nx e\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nAdditional Notation\nParameters\n- Pk: set of all paths for\ncommodity k, for all k\n- cp\n: per unit cost of\ncommodity k on path p\n= 6ij p cijk\n- Gijp : = 1 if path p\ncontains arc ij; and = 0\notherwise\nDecision Variables\n- fp: fraction of total\nquantity of\ncommodity k\nassigned to path p\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nO/D Based Path Formulation\n¦\n¦\n\nk\nP\np\np\np\nk\nk\nf\nC\nd\nsubject to\nd\nf\nu\ni\nj\nA\nk\np\nij\np\np\nP\nij\nk\nk\nG\n¦\n¦\nd\n\n( ,\n)\n: Bundle constraints\nf\nk\nK\np\np\nP k\n¦\n\n: Flow balance constraints\nf\np\nP\nk\nK\np\nk\nt\n\n,\n: Non-neg. constraints\n\nPath\n\nk=1\n\nk=2\n\nk=3\n\nk=4\nRHS\nDual\na\nd1\nd2\nd2\n<= ua\nSa\nb\nd1\nd2\n<= ub\nSb\nc\nd1\nd2\nd3\n<= uc\nSc\nd\nd2\nd3\n<= ud\nSd\ne\nd2\nd2\nd3\nd4\n<= ue\nSe\nk=1\n\n= 1\nV\nk=2\n\n= 1\nV\nk=3\n\n= 1\nV\nk=4\n\n= 1\nV\nCost.\n1 d\nC\n2d\nC\n3d\nC\n4d\nC\n5d\nC\n6d\nC\n7d\nC\n8d\nC\nVariable\n1f\n2f\n3f\n4f\n5f\n6f\n7f\n8f\nMinimize\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nAdditional Notation\nParameters\n- S: set of source nodes\nnN for all commodities\n- Qs: the set of all sub-\nnetworks originating at s\n- TCq\ns: total cost of sub-\nnetwork q originating at s\n- ]p\nq : = 1 if path p is\ncontained in sub-network\nq; and = 0 otherwise\nDecision Variables\n- Rq\ns : fraction of\ntotal quantity of the\nsuper commodity\noriginating at s\nassigned to sub-\nnetwork q\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\n\nSub- network\n\no=1\n\no=2\n\no=3\nRHS\nDual\na\nd1+ d2 d1+ d2\nd1\nd2\nd2\n<= ua\nSa\nb\nd2\nd1\nd1\nd1+ d2\n<= ub\nSb\nc\nd1\nd1+ d2\nd1\nd2\nd3\n<= uc\nSc\nd\nd2\nd2\nd3\n<= ud\nSd\ne\nd2\nd2\nd2\nd2\nd3\nd4\n<= ue\nSe\no=1\n\n= 1\nV\no=2\n\n= 1\nV\no=3\n\n= 1\nV\nCost.\nTC1\nTC2\nTC3\nTC4\nTC5\nTC 6\nTC1\nTC2\nTC1\nVariable\nR1\nR2\nR3\nR4\nR 5\nR 6\nR1\nR2\nR1\n\nSub-network Formulation\nq\ns\nQ\nq\nk\nq\nk\nP\np\nq\np\np\nR\nd\nC\ns\nk\n¦ ¦ ¦ ¦\n\n)\n(\n]\ns\nsubject to\n¦ ¦ ¦ ¦\n\nd\n\ns\nij\nQ\nq\nq\np\nq\ns\nk\nP\np\np\nij\nk\nA\nj\ni\nu\nR\nd\ns\nk\n)\n,\n(\n)\n(\ns]\nG\n: Capacity Limits on Each Arc\nR s\ns\nS\nq\nq\nQ s\n¦\n\n: Mass Balance Requirements\nR s\nq\nQ\ns\nS\nq\ns\nt\n\n,\n: Nonnegative Path Flow Variables\nMinimize\nS\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nLinear MCF Problem Solution\n- Obvious Solution\n- LP Solver\n- Difficulty\n- Problem Size: (|N|=|Nodes|, |C|=|Commodities|,\n|A|=|Arcs|)\n- Node-arc formulation:\n- Constraints: |N|*|C| + |A|\n- Variables: |A|*|C|\n- Path formulation:\n- Constraints: |A| + |C|\n- Variables: |Paths for ALL commodities|\n- Sub-network formulation:\n- Constraints: |A|+|Origins|\n- Variables: |Combinations of Paths by Origin|\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nGeneral MCF Solution Strategy\n- Try to Decompose a Hard Problem Into a Set of\nEasy Problems\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nMCF Solution Procedures I\n- Partitioning Methods\n- Exploit Network Structure to Speed Up Simplex\nMatrix Computations\n- Resource-Directive Decomposition\n- Repeat until Optimal:\n- Allocate Arc Capacity Among Commodities\n- Find Optimal Flows Given Allocation\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nMCF Solution Procedures II\n- Price-Directive Decomposition\n- Repeat until Optimal:\n- Modify Flow Cost on Arc\n- Ignore Bundle Constraints, Find Optimal Flows\n\n10-Dec-03\n1.224J/ESD.204J\nRevisiting the Path\nFormulation\nMINIMIZE 6 k K 6 pPk dk cp fp\nsubject to:\n6pPk 6 k K dk fpGij\np d uij ijA\n6pP(k) fp = 1 kK\nfp t 0 pPk, kK\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nBy-products of the Simplex\nAlgorithm: Dual Variable Values\nDuals\n-Sij: the dual variable associated with the bundle\nconstraint for arc ij (S is non-negative)\nVk : the dual variable associated with the commodity\nconstraints\nEconomic Interpretation\nS ij : the value of an additional unit of capacity on arc ij\nV k/dk : the minimal cost to send an additional unit of\ncommodity k through the network\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nModified Costs\nDefinition: Modified cost for arc ij and\ncommodity k = cij\nk+Sij\nDefinition: Modified cost for path p and\ncommodity k = 6ijA (cij\nk + Sij )Gij\np\n\n10-Dec-03\n1.224J/ESD.204J\nOptimality Conditions for the Path Formulation\nf*p and S*ij , V*k are optimal for all k and all ij iff:\nPrimal feasibility is satisfied\n1. 6pPk 6 k K dk f*pGijp d uij ijA\n2. 6pP(k) f*p = 1 kK\n3. f*p t 0 pPk, kK\nComplementary slackness is satisfied\n1. S*ij(6pPk 6 k K dk f*pGijp - uij ) = 0, ijA\n2. V*k (6p Pk f*p - 1) = 0, kK\nDual feasibility is satisfied (reduced cost is non-negative\nfor a minimization problem)\n1. (dk cp + 6 ij A dk Sij Gijp ) - Vk = dk ( 6 ij A (cijk +\nSij) Gijp - Vk /dk ) t 0, p Pk, k K\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nMulti-commodity Flow\nOptimality Conditions\n-\nThe price for an additional unit of capacity is 0\nunless capacity is fully utilized\n1. S*ij(6pPk 6 k K dk f*pGijp - uij ) = 0, ijA\n-\nA path p for commodity k is utilized only if its\n\"modified cost\" (that is, 6ijA (cij\nk + S*ijGij\np)) is\nminimal, for all paths pPk\n1. Reduced Costs all non-negative:\nc'p = dk ( 6 ij A (cijk + S*ij) Gijp - V*k /dk ) t 0,\np Pk, k K\n2. f*p (6ijA (cijk + S*ij ) Gijp - V*k /dk ) = 0,\np Pk, k K\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nColumn Generation- A Price\nDirective Decomposition\nConstraints\nMillions/Billions of Variables\nNever Considered\nStart\nAdded\nRestricted Master\nProblem (RMP)\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nRMP and Optimality Conditions\nConsider f*p and S*ij , V*k optimal for RMP, then\nPrimal feasibility is satisfied\n1. 6pPk 6 k K dk f*pGijp d uij ijA\n2. 6pP(k) f*p = 1 kK\n3. f*p t 0 pPk, kK\nComplementary slackness is satisfied\n1. S*ij(6pPk 6 k K dk f*pGijp - uij ) = 0, ijA\n2. V*k (6p Pk f*p - 1) = 0, kK\nDual feasibility is guaranteed (reduced cost is non-\nnegative) ONLY for a path p included in RMP\n1. (dk cp + 6 ij A dk Sij Gijp ) - Vk = dk ( 6 ij A (cijk +\nSij) Gijp - Vk /dk ) t 0, p Pk, k K\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nLP Solution: Column Generation\n- Step 1: Solve Restricted Master Problem (RMP) with\nsubset of all variables (columns)\n- Step 2: Solve Pricing Problem to determine if any\nvariables when added to the RMP can improve the\nobjective function value (that is, if any variables\nhave negative reduced cost)\n- Step 3: If variables are identified in Step 2, add\nthem to the RMP and return to Step 1; otherwise\nSTOP\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nPricing Problem\n- Given Sthe optimal (non-negative) duals for\nthe current restricted master problemthe\npricing problem, for each p Pk, k K is\nmin p Pk (dk ( 6 ij A (cij\nk + Sij) Gij\np - Vk /dk )\nOr, equivalently:\nmin p Pk 6 ij A (cij\nk + Sij) Gij\np\n3⁄4 A shortest path problem for commodity k (with\nmodified arc costs)\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nExample- Iteration 1\n\nPath\n\nk=1\n\nk=2\n\nk=3\n\nk=4\nRHS\nDual\na\n<= 20\nSa= 0\nb\n<= 10\nSb= 0\nc\n<= 20\nSc= 0\nd\n<= 10\nSd= 0\ne\n<= 40\nSe= 0\nk=1\n\n= 1\nV= 10\nk=2\n\n= 1\nV= 135\nk=3\n\n= 1\nV= 20\nk=4\n\n= 1\nV= 50\nCost.\nVariable\n1f\n2f\n=1\n3f\n=1\n4f\n5f\n6f\n7f\n=1\n8f\n=1\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nExample- Iteration 2\n\nPath\n\nk=1\n\nk=2\n\nk=3\n\nk=4\nRHS\nDual\na\n<= 20\nSa= 0\nb\n<= 10\nSb= 2\nc\n<= 20\nSc= 0\nd\n<= 10\nSd= 4\ne\n<= 40\nSe= 0\nk=1\n\n= 1\nV= 20\nk=2\n\n= 1\nV= 135\nk=3\n\n= 1\nV= 40\nk=4\n\n= 1\nV= 50\nCost.\nVariable\n1f\n2f\n=1\n3f\n=1/3\n4f\n= 1/3\n5f\n=1/3\n6f\n7f\n=1\n8f\n=1\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nMCF Optimality Conditions\n-\nFor each pPk, for each k, the reduced cost ccp:\n-\nccp (dk cp + 6 ij A dk Sij Gij\np ) - Vk = 6ij (dkcij\nk + dkSij)Gij\np -\nVk = 6ij (cij\nk + Sij)Gij\np - Vk /dk t\n-\nwhere SV are the optimal duals for the current restricted\nmaster problem\n-\nccp for each utilized path p implies\n\n6ij (dkcij\nk + dkSij) Gij\np = Vk\n\nor equivalently,\n\n6ij (cij\nk + Sij) Gij\np = Vk/dk\n-\nSo if, minpP(k) ccp\n= 6ij (cij\nk + Sij) Gij\np* - Vk/dk t the\ncurrent solution to the restricted master problem is\noptimal for the original problem\n-\nIf minpP(k) ccp = 6ij (cij\nk + Sij) Gij\np* - Vk/dk add p* to\nrestricted master problem\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nData Set\n- Data Set\n- Constraint Matrix Size\nNodes\nLink s\n1,363\nc apac itated\nunc apac itated\n1,071\nO /D\n17,539\n# O rigin\nImprovement\nrow\ncolumn\nnew_row\nNode_Arc\n14,155,336\n23,905,657\n-\nPath\n18,902\n-\n17,832\nSub-network\n1,499\n-\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nComputational Results\n- Number of Nodes: 807\n- Number of Links: 1,363\n- Number of Commodities: 17,539\n- Computational Result (IBM RS6000, Model\n370)\n- Path Model: 44 minutes\n- Sub-network Model: < 1 minute\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nConclusions I\n- Choose your formulation carefully\n- Trade-off memory requirements and solution time\n- Sub-network formulation can be effective when\nlow level of congestion in the network\n- Problem size often mandates use of combined\ncolumn and row generation\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nConclusions II\n- Solution time is affected dramatically by\n- The complexity of the pricing problem\n- Exploitation of problem structure, pre-\nprocessing, LP solver selection, etc."
    },
    {
      "category": "Lecture Notes",
      "title": "lec3_mcf_keypaths_col_and_row_generation_2003.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/1-206j-airline-schedule-planning-spring-2003/390c354c113db8f74e1bde23bd84b45b_lec3_mcf_keypaths_col_and_row_generation_2003.pdf",
      "content": "1.206J/16.77J/ESD.215J\nAirline Schedule Planning\nCynthia Barnhart\nSpring 2003\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\n1.206J/16.77J/ESD.215J\nMulti-commodity Network Flows:\nA Keypath Formulation\n- Outline\n- Path formulation for multi-commodity\nflow problems revisited\n- Keypath formulation\n- Example\n- Keypath solution algorithm\n- Column generation\n- Row generation\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nPath Notation\nSets\nA: set of all network arcs\nK: set of all commodities\nN: set of all network nodes\nParameters\nuij : total capacity on arc ij\ndk : total quantity of\ncommodity k\nPk: set of all paths for\ncommodity k, for all k\nParameters (cont.)\ncp : per unit cost of\ncommodity k on path p =\n6ij p cij\nk\nGij\np : = 1 if path p contains\narc ij; and = 0 otherwise\nDecision Variables\nfp: fraction of total quantity\nof commodity k assigned to\npath p\n\n10-Dec-03\n1.224J/ESD.204J\nThe Path Formulation Revisited\nMINIMIZE 6 k K 6 pPk dk cp fp\nsubject to:\n6pPk 6 k K dk fpGij\np d uij ijA\n6pPk fp = 1 kK\nfp t 0 pPk, kK\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nThe Keypath Concept\n- The path formulation for MCF problems can be\nrecast equivalently as follows:\n- Assign all flow of commodity k to a selected path p,\ncalled the keypath, for each commodity kK\n- Often the keypath is the minimum cost path for k\n- The resulting flow assignment is often infeasible\n- One or more arc capacity constraints are violated\n- If the resulting flows are feasible and the keypaths are\nminimum cost, the flow assignment is optimal\n- Solve a linear programming formulation to minimize\nthe cost of adjusting flows to achieve feasibility\n- Flow adjustments involve removing flow of k from its\nkeypath p and placing it on alternative path p'Pk, for each\nkK\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nAdditional Keypath Notation\nParameters\np(k) : keypath for commodity k\nQij : total initial (flow assigned to keypaths) on arc ij\n= 6 k K dkGij\np(k)\ncrp(k) :\n= cr - cp(k) = 6 ij A cijGij\nr - 6 ij A cijGij\np(k);\nchange in cost when one unit of commodity k is\nshifted from keypath p(k) to path r (Note: typically\nnon-negative if p(k) has minimum cost)\nDecision Variables\nfrp(k): fraction of total quantity of commodity k\nremoved from keypath p(k) to path r\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nThe Keypath Formulation\n\nK\nk\nP\nr\nf\nK\nk\nf\nA\nij\nQ\nu\nf\nd\nf\nd\nf\nd\nc\nk\nr\nk\np\nP\nr\nr\nk\np\nij\nij\nK\nk\nP\nr\nr\nk\np\nk\nr\nij\nK\nk\nP\nr\nr\nk\np\nk\nk\np\nij\nK\nk\nP\nr\nr\nk\np\nk\nr\nk\np\nk\nk\nk\nk\n\nt\n\nd\n\nd\n\n¦\n¦¦\n¦¦\n¦¦\n\n:\ns.t.\nMin\n)\n(\n)\n(\n)\n(\n)\n(\n)\n(\n)\n(\n)\n(\nG\nG\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nAssociated Dual Variables\nDuals\n- Sij : the dual variable associated with the bundle\nconstraint for arc ij (S is non-negative)\n- Vk: the dual variable associated with the commodity\nconstraints (V is non-negative)\nEconomic Interpretation\nS ij : the value of an additional unit of capacity on arc ij\nV k/dk : the minimal cost to remove an additional unit\nof commodity k from its keypath and place on\nanother path\n\n10-Dec-03\n1.224J/ESD.204J\nOptimality Conditions for the Path\nFormulation\nf*p and S*ij , V*k are optimal for all k and all ij\nif:\n1. Primal feasibility is satisfied\n2. Complementary slackness is satisfied\n3. Dual feasibility is satisfied (reduced cost is\nnon-negative for a minimization problem)\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nModified Costs\nDefinition: Reduced cost for path r, commodity k\n= 6ijA cijkdk Gijr - 6ijA cijkdk Gijp(k) + 6ijA SijdkGijr\n- 6ijA Sijdk Gijp(k) + Vk\n= 6ijA (cijk + Sij ) Gijr -\n6ijA (cijk + Sij) Gijp(k) + Vk /dk\nDefinition: Let modified cost for arc ij and\ncommodity k = cijk + Sij\n3⁄4 Reduced cost is non-negative for all commodity k\nvariables if the modified cost of path r equals or\nexceeds the modified cost of p(k) less Vk/dk\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nColumn Generation- A Price\nDirective Decomposition\nConstraints\nMillions/Billions of Variables\nNever Considered\nStart\nAdded\nRestricted Master\nProblem (RMP)\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nLP Solution: Column Generation\n- Step 1: Solve Restricted Master Problem (RMP) with\nsubset of all variables (columns)\n- Step 2: Solve Pricing Problem to determine if any\nvariables when added to the RMP can improve the\nobjective function value (that is, if any variables\nhave negative reduced cost)\n- Step 3: If variables are identified in Step 2, add\nthem to the RMP and return to Step 1; otherwise\nSTOP\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nPricing Problem\n- Given Sand Vkthe optimal (non-negative) duals for the\ncurrent restricted master problem and the keypath p(k)\nthe pricing problem, for each k K is\nmin r Pk (dk (6ijA (cij\nk + Sij) Gij\nr - 6ijA (cij\nk + Sij) Gij\np(k)\n+ Vk /dk )\nOr, letting C = 6ijA (cijk + Sij) Gijp(k) - Vk /dk equivalently:\nmin r Pk 6 ij A (cijk + Sij) Gijr- C\n3⁄4 A shortest path problem for commodity k (with\nmodified arc costs). If min r Pk 6 ij A (cijk + Sij) Gijr - C t\n0, then the original problem is solved, else add column\ncorresponding to xp(k)r to the master problem\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nExample- Iteration 1\n\nPath\nk=1\nk=2\nk=3\nk=4\nRHS\nDual\na\n15-15\n15-15\n0-15\n<= 20-15\nSa= 0\nb\n-5\n5-5\n<= 10-5\nSb= 0\nc\n<= 20-0\nSc= 0\nd\n0-15\n15-15\n0-15\n0-5\n5-5\n<= 10-20\nSd= 2\ne\n10-10\n<= 40-10\nSe= 0\nk=1\n1 -1\n<= 1\nV\nk=2\n1-1\n<= 1\nV\nk=3\n1-1\n<= 1\nV\nk=4\n1-1\n<= 1\nV\nCost.\n20-10 10-10 165-75 75-75 135-75 40-30 30-30\n50-50\nVariable\n2f =0\n2f\n**\n4f\n4f\n**\n4f\n=0\n7f\n=2\n7f\n**\n8f\n**\nLet p(1) = 2; p(2) = 4; p(3) = 7; p(4) = 8 (** denotes keypath)\nNOTE: Gray columns not included in keypath\nformulation; purple elements are initial keypath matrix\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nExample- Iteration 2\n\nPath\nk=1\nk=2\nk=3\nk=4\nRHS\nDual\na\n15-15\n15-15\n0-15\n<= 20-15\nSa= 0\nb\n-5\n5-5\n<= 10-5\nSb= 0\nc\n<= 20-0\nSc= 0\nd\n0-15\n15-15\n0-15\n0-5\n5-5\n<= 10-20\nSd= 4\ne\n10-10\n<= 40-10\nSe= 0\nk=1\n1 -1\n<= 1\nV\nk=2\n1-1\n<= 1\nV\nk=3\n1-1\n<= 1\nV= 10\nk=4\n1-1\n<= 1\nV\nCost.\n20-10 10-10 165-75 75-75 135-75 40-30 30-30\n50-50\nVariable\n2f =0\n2f\n**\n4f\n4f\n**\n4f\n=1/3\n7f\n=1\n7f\n**\n8f\n**\n2nd iteration: no columns price out, one constraint for\ncommodity 3 is violated and added; and the problem is\nresolved- feasibility and optimality achieved\nLet p(1) = 2; p(2) = 4; p(3) = 7; p(4) = 8 (** denotes keypath)\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nColumn Generation\nAny\nNew Columns?\nSTOP\n(LP Optimal)\nSolve\nRestricted Master Problem\n(RMP)\nSolve\nPricing Problem\nUpdate RMP with\nNew Columns\nNo\nYes\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nRow Generation\nAny\nNew Constraints?\nSTOP\n(LP Optimal)\nSolve\nRelaxed Problem (RP)\nSolve\nSeparation Problem\nUpdate RP with\nNew Constraints\nNo\nYes\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nColumn\nand Row\nGeneration\nAny\nNew Columns?\nSolve\nRestricted Master Problem\n(RMP)\nSolve\nPricing Problem\nUpdate RMP with\nNew Columns\nSet OPT_Cut = NO\nNo\nYes\nAny\nNew Constraints?\nSolve\nRelaxed Problem (RP)\nSolve\nSeparation Problem\nNo\nSet\nOPT_Col = NO\nOPT_Cut = NO\nUpdate RP with\nNew Constraints\nSet OPT_Col = NO\nSet\nOPT_Col = YES\nOPT_Col = YES\nOPT_Cut = YES\nYes\nSet\nOPT_Cut = YES\nOPT_Col = YES\nOPT_Cut = YES\nYes\nNo\nYes\nNo\nSTOP\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nColumn and Row Generation:\nConstraint Matrix\nOriginal RMP\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nThe Benefit of the Keypath\nConcept\n- We are now minimizing the objective\nfunction and most of the objective\ncoefficients are __________. Therefore, this\nwill guide the decision variables to values of\n__________.\n- How does this help?\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nSolution Procedure\n- Use Both Column Generation and Row Generation\n- Actual flow of problem\n- Step 1- Define RMP for Iteration 1: Set k =1. Denote an\ninitial subset of columns (A1) which is to be used.\n- Step 2- Solve RMP for Iteration k: Solve a problem with\nthe subset of columns Ak.\n- Step 3- Generate Rows: Determine if any constraints are\nviolated and express them explicitly in the constraint\nmatrix.\n- Step 4- Generate Columns: Price some of the remaining\ncolumns, and add a group (A*) that have a reduced cost\nless than zero, i.e., Ak+1=[Ak |A*]\n- Step 5- Test Optimality: If no columns or rows are added,\nterminate. Otherwise, k =k+1, go to Step 2\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nConclusions\n- Variable redefinition\n- Allows relaxation of constraints and subsequent\n(limited) cut generation\n- Does not alter the pricing problem solution\n- Shortest paths with modified costs\n- Allows problems with many commodities, as well\nas a large underlying network, to be solved with\nlimited memory requirements"
    },
    {
      "category": "Lecture Notes",
      "title": "lec4_mcfs_linear_and_integer_2003.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/1-206j-airline-schedule-planning-spring-2003/7ad417e363fe9d75f0d3f5fe2a5947c4_lec4_mcfs_linear_and_integer_2003.pdf",
      "content": "1.206J/16.77J/ESD.215J\nAirline Schedule Planning\nCynthia Barnhart\nSpring 2003\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\n1.206J/16.77J/ESD.215J Airline\nSchedule Planning: Multi-commodity\nFlows\nOutline\n- Applications\n- Problem definition\n- Formulations\n- Solutions\n- Computational results\n- Integer multi-commodity network flow problems\n- Integer multi-commodity network flow solutions\n- Branch-and-price: combination of branch-and-bound and\ncolumn generation\n- Results\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nApplication I\n- Package flow problem (express package\ndelivery operation)\n- Shipments have specific origins and destinations\nand must be routed over a transportation\nnetwork\n- Each set of packages with a common origin-\ndestination pair is called a commodity\n- Time windows (availability and delivery time)\nassociated with packages\n- The objective might be to minimize total costs,\nfind a feasible flow, ...\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nApplication II\n- Passenger mix problem\n- Given a fixed schedule of flights, a fixed\nfleet assignment and a set of customer\ndemands for air travel service on this\nfleeted schedule, the airline's objective is to\nmaximize revenues by accommodating as\nmany high fare passengers as possible\n- For some flights, demand exceeds seat\nsupply and passengers must be spilled to\nother itineraries of either the same or\nanother airline\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nApplication III\n- Message routing problem\n- In a telecommunications or computer\nnetwork, requirements exist for\ntransmission lines and message requests, or\ncommodities.\n- The problem is to route the messages from\ntheir origins to their respective destinations\nat minimum cost\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nMCF Networks\n- Set of nodes\n- Each node associated with the supply of or\ndemand for commodities\n- Set of arcs\n- Cost per unit commodity flow\n- Capacity limiting the total flow of all\ncommodities and/ or the flow of\nindividual commodities\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nMCF Commodity Definitions\n- A commodity may originate at a subset of\nnodes in the network and be destined for\nanother subset of nodes\n- A commodity may originate at a single node\nand be destined for a subset of the nodes\n- A commodity may originate at a single node\nand be destined for a single node\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nMCF Objectives\n- Flow the commodities through the networks\nfrom their respective origins to their\nrespective destinations at minimum cost\n- Expressed as distance, money, time, etc.\n- Ahuja, Magnanti and Orlin (1993)-- survey of\nmulti-commodity flow models and solution\nprocedures\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nMCF Problem Formulations --\nLinear Programs\n- Network flow problems\n- Capacity constraints limit flow of individual\ncommodities\n- Conservation of flow constraints ensure flow\nbalance for individual commodities\n- Flow non-negativity constraints\n- With side constraints\n- Bundle constraints restrict total flow of ALL\ncommodities on an arc\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nMCF Constraint Matrix\nNetwork flow\nproblem,\ncommodity k=1\nBundle constraints limiting total flow of all commodities to arc capacities\nNetwork flow\nproblem,\ncommodity k=2\nNetwork flow\nproblem,\ncommodity k=3\nNetwork flow\nproblem,\ncommodity k=4\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nAlternative Formulations for O-D\nCommodity Case\n- Node-Arc Formulation\n- Decision variables: flow of commodity k on each arc ij\n- Path Formulation\n- Decision variables: flow of commodity k on each path for\nk\n- \"Tree\" or \"Sub-network\" Formulation\n- Define: super commodity: set of all (O-D) commodities\nwith the same origin o (or destination d)\n- Decision variables: quantity of the super commodity k'\nassigned to each \"tree\" or \"sub-network\" for k'\n- Formulations are equivalent\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nSample Network\nCommodities\n#\no\nd\nquant\nArcs\ni\nj cost capy\n2 1\n3 2\n3 3\n4 4\n4 5\na\nb\nc\nd\ne\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nNotation\nParameters\n- A:\nset of all network arcs\n- K:\nset of all commodities\n- N: set of all network nodes\n- O(k) [D(k)]: origin [destination]\nnode for commodity k\n- cij\nk\n: per unit cost of\ncommodity k on arc ij\n- uij\n: total capacity on arc ij\n(assume uij\nk is unlimited for\neach k and each ij)\n- dk\n: total quantity of\ncommodity k\nDecision Variables\n- xijk : number of units\nof commodity k\nassigned to arc ij\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nNode-Arc Formulation\nMinimize\nc x\nij\nk\nij\nk\nk\nij ¦\n¦\nsubject to\notherwise\nk\nD\ni\nd\nk\nO\ni\nd\nx\nx\nk\nk\nj\nk\nji\nj\nk\nij\n)\n(\nif\n)\n(\nif\n\n¦\n¦\n\n: Conservation of Flow\nx\nu\ni j\nA\nij\nk\nk\nij\n¦\nd\n\n( , )\n\n: Bundle constraints\nx\ni j\nA k\nK\nij\nk t\n\n( , )\n,\n\n: Nonnegativity constraints\nk 1\nk 2\nk 3\nk 4\na\nb\nc\nd\ne\na\nb\nc\nd\ne\na\nb\nc\nd\ne\na\nb\nc\nd\ne\nR H S\n= d 1\n- 1\n= 0\n- 1\n- 1\n= - d 1\n- 1\n- 1\n= 0\n= d 2\n- 1\n= 0\n- 1\n- 1\n= 0\n- 1\n- 1\n= - d 2\n= 0\n- 1\n= d 3\n- 1\n- 1\n= 0\n- 1\n- 1\n= - d 3\n= 0\n- 1\n= 0\n- 1\n- 1\n= d 4\n- 1\n- 1\n= - d 4\na\nd u a\nb\nd u b\nc\nd u c\nd\nd u d\ne\nd u e\nc a\nc b\nc c\nc d\nc e\nc a\nc b\nc c\nc d\nc e\nc a\nc b\nc c\nc d\nc e\nc a\nc b\nc c\nc d\nc e\nx a\nx b\nx c\nx d\nx e\nx a\nx b\nx c\nx d\nx e\nx a\nx b\nx c\nx d\nx e\nx a\nx b\nx c\nx d\nx e\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nAdditional Notation\nParameters\n- Pk: set of all paths for\ncommodity k, for all k\n- cp\n: per unit cost of\ncommodity k on path p\n= 6ij p cijk\n- Gijp : = 1 if path p\ncontains arc ij; and = 0\notherwise\nDecision Variables\n- fp: fraction of total\nquantity of\ncommodity k\nassigned to path p\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nO/D Based Path Formulation\n¦\n¦\n\nk\nP\np\np\np\nk\nk\nf\nC\nd\nsubject to\nd\nf\nu\ni\nj\nA\nk\np\nij\np\np\nP\nij\nk\nk\nG\n¦\n¦\nd\n\n( ,\n)\n: Bundle constraints\nf\nk\nK\np\np\nP k\n¦\n\n: Flow balance constraints\nf\np\nP\nk\nK\np\nk\nt\n\n,\n: Non-neg. constraints\n\nPath\n\nk=1\n\nk=2\n\nk=3\n\nk=4\nRHS\nDual\na\nd1\nd2\nd2\n<= ua\nSa\nb\nd1\nd2\n<= ub\nSb\nc\nd1\nd2\nd3\n<= uc\nSc\nd\nd2\nd3\n<= ud\nSd\ne\nd2\nd2\nd3\nd4\n<= ue\nSe\nk=1\n\n= 1\nV\nk=2\n\n= 1\nV\nk=3\n\n= 1\nV\nk=4\n\n= 1\nV\nCost.\n1 d\nC\n2d\nC\n3d\nC\n4d\nC\n5d\nC\n6d\nC\n7d\nC\n8d\nC\nVariable\n1f\n2f\n3f\n4f\n5f\n6f\n7f\n8f\nMinimize\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nAdditional Notation\nParameters\n- S: set of source nodes\nnN for all commodities\n- Qs: the set of all sub-\nnetworks originating at s\n- TCq\ns: total cost of sub-\nnetwork q originating at s\n- ]p\nq : = 1 if path p is\ncontained in sub-network\nq; and = 0 otherwise\nDecision Variables\n- Rq\ns : fraction of\ntotal quantity of the\nsuper commodity\noriginating at s\nassigned to sub-\nnetwork q\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\n\nSub- network\n\no=1\n\no=2\n\no=3\nRHS\nDual\na\nd1+ d2 d1+ d2\nd1\nd2\nd2\n<= ua\nSa\nb\nd2\nd1\nd1\nd1+ d2\n<= ub\nSb\nc\nd1\nd1+ d2\nd1\nd2\nd3\n<= uc\nSc\nd\nd2\nd2\nd3\n<= ud\nSd\ne\nd2\nd2\nd2\nd2\nd3\nd4\n<= ue\nSe\no=1\n\n= 1\nV\no=2\n\n= 1\nV\no=3\n\n= 1\nV\nCost.\nTC1\nTC2\nTC3\nTC4\nTC5\nTC 6\nTC1\nTC2\nTC1\nVariable\nR1\nR2\nR3\nR4\nR 5\nR 6\nR1\nR2\nR1\n\nSub-network Formulation\nq\ns\nQ\nq\nk\nq\nk\nP\np\nq\np\np\nR\nd\nC\ns\nk\n¦ ¦ ¦ ¦\n\n)\n(\n]\ns\nsubject to\n¦ ¦ ¦ ¦\n\nd\n\ns\nij\nQ\nq\nq\np\nq\ns\nk\nP\np\np\nij\nk\nA\nj\ni\nu\nR\nd\ns\nk\n)\n,\n(\n)\n(\ns]\nG\n: Capacity Limits on Each Arc\nR s\ns\nS\nq\nq\nQ s\n¦\n\n: Mass Balance Requirements\nR s\nq\nQ\ns\nS\nq\ns\nt\n\n,\n: Nonnegative Path Flow Variables\nMinimize\nS\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nLinear MCF Problem Solution\n- Obvious Solution\n- LP Solver\n- Difficulty\n- Problem Size: (|N|=|Nodes|, |C|=|Commodities|,\n|A|=|Arcs|)\n- Node-arc formulation:\n- Constraints: |N|*|C| + |A|\n- Variables: |A|*|C|\n- Path formulation:\n- Constraints: |A| + |C|\n- Variables: |Paths for ALL commodities|\n- Sub-network formulation:\n- Constraints: |A|+|Origins|\n- Variables: |Combinations of Paths by Origin|\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nGeneral MCF Solution Strategy\n- Try to Decompose a Hard Problem Into a Set of\nEasy Problems\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nMCF Solution Procedures I\n- Partitioning Methods\n- Exploit Network Structure to Speed Up Simplex\nMatrix Computations\n- Resource-Directive Decomposition\n- Repeat until Optimal:\n- Allocate Arc Capacity Among Commodities\n- Find Optimal Flows Given Allocation\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nMCF Solution Procedures II\n- Price-Directive Decomposition\n- Repeat until Optimal:\n- Modify Flow Cost on Arc\n- Ignore Bundle Constraints, Find Optimal Flows\n\n10-Dec-03\n1.224J/ESD.204J\nRevisiting the Path\nFormulation\nMINIMIZE 6 k K 6 pPk dk cp fp\nsubject to:\n6pPk 6 k K dk fpGij\np d uij ijA\n6pP(k) fp = 1 kK\nfp t 0 pPk, kK\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nBy-products of the Simplex\nAlgorithm: Dual Variable Values\nDuals\n-Sij: the dual variable associated with the bundle\nconstraint for arc ij (S is non-negative)\nVk : the dual variable associated with the commodity\nconstraints\nEconomic Interpretation\nS ij : the value of an additional unit of capacity on arc ij\nV k/dk : the minimal cost to send an additional unit of\ncommodity k through the network\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nModified Costs\nDefinition: Modified cost for arc ij and\ncommodity k = cij\nk+Sij\nDefinition: Modified cost for path p and\ncommodity k = 6ijA (cij\nk + Sij )Gij\np\n\n10-Dec-03\n1.224J/ESD.204J\nOptimality Conditions for the Path Formulation\nf*p and S*ij , V*k are optimal for all k and all ij iff:\nPrimal feasibility is satisfied\n1. 6pPk 6 k K dk f*pGijp d uij ijA\n2. 6pP(k) f*p = 1 kK\n3. f*p t 0 pPk, kK\nComplementary slackness is satisfied\n1. S*ij(6pPk 6 k K dk f*pGijp - uij ) = 0, ijA\n2. V*k (6p Pk f*p - 1) = 0, kK\nDual feasibility is satisfied (reduced cost is non-negative\nfor a minimization problem)\n1. (dk cp + 6 ij A dk Sij Gijp ) - Vk = dk ( 6 ij A (cijk +\nSij) Gijp - Vk /dk ) t 0, p Pk, k K\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nMulti-commodity Flow\nOptimality Conditions\n-\nThe price for an additional unit of capacity is 0\nunless capacity is fully utilized\n1. S*ij(6pPk 6 k K dk f*pGijp - uij ) = 0, ijA\n-\nA path p for commodity k is utilized only if its\n\"modified cost\" (that is, 6ijA (cij\nk + S*ijGij\np)) is\nminimal, for all paths pPk\n1. Reduced Costs all non-negative:\nc'p = dk ( 6 ij A (cijk + S*ij) Gijp - V*k /dk ) t 0,\np Pk, k K\n2. f*p (6ijA (cijk + S*ij ) Gijp - V*k /dk ) = 0,\np Pk, k K\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nColumn Generation- A Price\nDirective Decomposition\nConstraints\nMillions/Billions of Variables\nNever Considered\nStart\nAdded\nRestricted Master\nProblem (RMP)\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nRMP and Optimality Conditions\nConsider f*p and S*ij , V*k optimal for RMP, then\nPrimal feasibility is satisfied\n1. 6pPk 6 k K dk f*pGijp d uij ijA\n2. 6pP(k) f*p = 1 kK\n3. f*p t 0 pPk, kK\nComplementary slackness is satisfied\n1. S*ij(6pPk 6 k K dk f*pGijp - uij ) = 0, ijA\n2. V*k (6p Pk f*p - 1) = 0, kK\nDual feasibility is guaranteed (reduced cost is non-\nnegative) ONLY for a path p included in RMP\n1. (dk cp + 6 ij A dk Sij Gijp ) - Vk = dk ( 6 ij A (cijk +\nSij) Gijp - Vk /dk ) t 0, p Pk, k K\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nLP Solution: Column Generation\n- Step 1: Solve Restricted Master Problem (RMP) with\nsubset of all variables (columns)\n- Step 2: Solve Pricing Problem to determine if any\nvariables when added to the RMP can improve the\nobjective function value (that is, if any variables\nhave negative reduced cost)\n- Step 3: If variables are identified in Step 2, add\nthem to the RMP and return to Step 1; otherwise\nSTOP\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nPricing Problem\n- Given S(non-negative) and Vk (unrestricted),\nthe optimal duals for the current restricted\nmaster problemthe pricing problem, for\neach p Pk, k K is\nmin p Pk (dk ( 6 ij A (cij\nk + Sij) Gij\np - Vk /dk )\nOr, equivalently:\nmin p Pk 6 ij A (cij\nk + Sij) Gij\np\n3⁄4 A shortest path problem for commodity k (with\nmodified arc costs)\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nExample- Iteration 1\n\nPath\n\nk=1\n\nk=2\n\nk=3\n\nk=4\nRHS\nDual\na\n<= 20\nSa= 0\nb\n<= 10\nSb= 0\nc\n<= 20\nSc= 0\nd\n<= 10\nSd= 0\ne\n<= 40\nSe= 0\nk=1\n\n= 1\nV= 10\nk=2\n\n= 1\nV= 135\nk=3\n\n= 1\nV= 20\nk=4\n\n= 1\nV= 50\nCost.\nVariable\n1f\n2f\n=1\n3f\n=1\n4f\n5f\n6f\n7f\n=1\n8f\n=1\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nExample- Iteration 2\n\nPath\n\nk=1\n\nk=2\n\nk=3\n\nk=4\nRHS\nDual\na\n<= 20\nSa= 0\nb\n<= 10\nSb= 2\nc\n<= 20\nSc= 0\nd\n<= 10\nSd= 4\ne\n<= 40\nSe= 0\nk=1\n\n= 1\nV= 20\nk=2\n\n= 1\nV= 135\nk=3\n\n= 1\nV= 40\nk=4\n\n= 1\nV= 50\nCost.\nVariable\n1f\n2f\n=1\n3f\n=1/3\n4f\n= 1/3\n5f\n=1/3\n6f\n7f\n=1\n8f\n=1\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nMCF Optimality Conditions\n-\nFor each pPk, for each k, the reduced cost ccp:\n-\nccp (dk cp + 6 ij A dk Sij Gij\np ) - Vk = 6ij (dkcij\nk + dkSij)Gij\np -\nVk = 6ij (cij\nk + Sij)Gij\np - Vk /dk t\n-\nwhere SV are the optimal duals for the current restricted\nmaster problem\n-\nccp for each utilized path p implies\n\n6ij (dkcij\nk + dkSij) Gij\np = Vk\n\nor equivalently,\n\n6ij (cij\nk + Sij) Gij\np = Vk/dk\n-\nSo if, minpP(k) ccp\n= 6ij (cij\nk + Sij) Gij\np* - Vk/dk t the\ncurrent solution to the restricted master problem is\noptimal for the original problem\n-\nIf minpP(k) ccp = 6ij (cij\nk + Sij) Gij\np* - Vk/dk add p* to\nrestricted master problem\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nData Set\n- Data Set\n- Constraint Matrix Size\nNodes\nLink s\n1,363\nc apac itated\nunc apac itated\n1,071\nO /D\n17,539\n# O rigin\nImprovement\nrow\ncolumn\nnew_row\nNode_Arc\n14,155,336\n23,905,657\n-\nPath\n18,902\n-\n17,832\nSub-network\n1,499\n-\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nComputational Results\n- Number of Nodes: 807\n- Number of Links: 1,363\n- Number of Commodities: 17,539\n- Computational Result (IBM RS6000, Model\n370)\n- Path Model: 44 minutes\n- Sub-network Model: < 1 minute\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nLP Computational Experiment\n- Test effect of adding most negative\nreduced cost column for each\ncommodity vs. adding several negative\nreduced cost columns for each\ncommodity\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nGenerating Several Columns Per\nCommodity\n- Select any basic column (fp has reduced cost\n= 0) for some path p and commodity k, call it\nthe key(k)\n- Add all simple paths representing symmetric\ndifference between most negative reduced\ncost path and key(k)\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nExample\nkey(k)\np1- most negative reduced cost path for k\nAdd to LP:\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nLP Solution:\nOne Path per Commodity\nproblem\niterations\ncolumns\ntime (sec)\n\n301 nodes, 497 arcs, 1320 commodities.\nTimes are on an IBM RS6000/590.\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nLP Solution:\nAll Simple Paths for Each Commodity\nproblem\niterations\ncolumns\ntime (sec)\n301 nodes, 497 arcs, 1320 commodities.\nTimes are on an IBM RS6000/590.\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nInteger Multi-Commodity\nNetwork Flows\n- Consider the modified multi-commodity\nnetwork flow problem:\n- Added integrality restriction that each\ncommodity must be assigned to exactly\none path\n- fp (0.1), p Pk\n-Solution procedure: branch-and-\nbound, specialized to handle large-\nscale problems\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nInteger Multicommodity Flows:\nProblem Formulation\nMINIMIZE 6 k K 6 pPk dk cp fp\nsubject to:\n6pPk 6 k K dk fpGij\np d uij ijA\n6pP(k) fp = 1 kK\nfp (0,1) pPk, kK\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nBranch-and-Bound: A Solution\nApproach for Binary Integer\nPrograms\nff11 = 1\n= 1\nAll possible solutions at leaf\nnodes of tree (2n solutions, where\nn is the number of variables)\nff22 = 0\n= 0\nff22 = 1\n= 1\nff11 = 0\n= 0\nff22 = 1\n= 1\nff22 = 0\n= 0\nff33 = 1\n= 1\nff33 = 0\n= 0\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nBranch-and-Bound: A\nSolution Approach for Binary\nInteger Programs\n- Branch-and-Bound is a smart enumeration\nstrategy:\n- With branching, all possible solutions (e.g., 2number\nof path for all commodities) are enumerated\n- With bounding, only a (usually) small subset of\npossible solutions are evaluated before a provably\noptimal solution is found\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nBounding: The Linear\nProgramming (LP) Relaxation\n- Consider the linear path-based MCF problem\nformulation\n- Objective is to minimize\n- The LP relaxation replaces\nfp 0,1\nwith\n1 t fp t 0\n- Let zLP* represent the optimal LP solution and let zIP*\nrepresent the optimal IP solution\nzLP\n* d zIP\n*\n- LP's provide a bound on the lowest possible value of the\noptimal integer solution\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nBranching\n- Consider an IP with binary restrictions on all\nvariables, denoted P(1)\n- Let LP(1) denote the linear programming relaxation of\nP(1) and let x*(1) denote the optimal solution to LP(1)\n- If there is no variable with fractional value in x*(1),\nx*(1) solves (is optimal for) P(1)\n- If there is at least one variable with fractional value in\nx*(1), call it xl*(1), then any optimal solution for P(1)\nhas xl*(1)=0 or xl*(1)=1\n- Left branch:\nxl*(1)=0\n- Right branch:\nxl*(1)=1\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nA Pictorial View\nfeasible IP\nfeasible IP\nfeasible LP\nfeasible LP\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nRelationship between Bound and\nTree Depth\n- Let x*(1) be the optimal solution to LP(1) with at\nleast one fractional variable xl*(1)\n- Let the optimal solution value for LP(1) be denoted\nz*(1)\n- Let LP(2) = LP(1) + [xl*(1) = 0 or xl*(1) = 1]\n- Let the optimal solution value for LP(2) be denoted\nz*(2)\n-\nThen\nz*(1) d z*(2)\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nTree Pruning\nx1 = 1\nx1 = 1\nx1=0\nx1=0\nx2=1\nx2=1\nx2=1\nx2=1\nx2=0\nx2=0\nx3=1\nx3=1\nx3=0\nx3=0\nIncumbent:\nCurrent best\nfeasible (IP)\nsolution value = zIP\nIf z*(LP(2))t zIP, PRUNE (FATHOM) tree at node 2\n(solutions on the LHS of tree cannot be optimal. 1/2\nof the solutions (nodes) do not need to be\nevaluated!)\nx2=0\nx2=0\nx3=0\nx3=0\nx3=1\nx3=1\nIf z*(LP(2)) is integral, PRUNE tree at node 2\n(solutions in sub-tree at node 2 cannot be better.)\nIf LP(2)is infeasible, PRUNE tree at node 2\n(solutions in sub-tree at node 2 cannot be feasible.)\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nBranch-and-Bound Algorithm\nBeginning with rootnode (minimization):\n- Bound:\n- Solve the current LP with this and all restrictions along\nthe (back) path to the rootnode enforced\n- Prune:\n- If optimal LP value is greater than or equal to the\nincumbent solution: Prune\n- If LP is infeasible: Prune\n- If LP is integral: Prune and update incumbent solution\n- Branch:\n- Set some variable to an integer value\n- Repeat until all nodes pruned\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nBranch-and-Price Solution\nApproach\n- Branch-and-bound tailored to solve large-\nscale integer programs\n- Bounding\n- Solve LP using column generation at each node\nof the branch-and-bound tree\n- Branching\n- New columns might have to be generated to find\nan optimal solution to the constrained problem\n- Want to design the branching decision so that the\nalgorithm for the pricing is unchanged as the\nbranch-and-bound tree is processed\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nExample Revisited\n\nPath\n\nk=1\n\nk=2\n\nk=3\n\nk=4\nRHS\nDual\na\n<= 20\nSa= 0\nb\n<= 10\nSb= 2\nc\n<= 20\nSc= 0\nd\n<= 10\nSd= 4\ne\n<= 40\nSe= 0\nk=1\n\n= 1\nV= 20\nk=2\n\n= 1\nV= 135\nk=3\n\n= 1\nV= 40\nk=4\n\n= 1\nV= 50\nCost.\nVariable\n1f\n2f\n=1\n3f\n=1/3\n4f\n= 1/3\n5f\n=1/3\n6f\n7f\n=1\n8f\n=1\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nBranch-and-Price: Branching and\nCompatibility with the Pricing Problem\n- Branching decision for commodity k, fp = 1:\n- No pricing problem solution is necessary\n- All other variables for k are removed from the\nmodel\n- Branching decision for commodity k, fp = 0:\n- The solution to the pricing problem (a shortest\npath problem) CANNOT generate path p as the\nshortest path, must instead find the next shortest\npath\n- In general, at nodes of depth l in the branch-and-\nbound tree, the pricing problem must potentially\ngenerate the kth shortest path\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nAn Alternative Branching Idea:\nBranch on Small Decisions\n- Consider commodity k whose flow is split\n- Assume k takes 2 paths, p1 and p2\n- Let d be the divergence node\np1\no(k)\nd(k)\np2\nd\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nDivergence Node\n- Let a1 be the arc out of d on p1 and a2 be the arc\nout of d on p2\n- A(d) = {a1, a2, a3, a4}, A(d,a1) = {a1,a3}, A(d, a2)\n= {a2, a4}\nd\na2\na4\na1\na3\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nBranching Rule\n- Create two branches, one where\n- And the other with\nxij\nk\nij A d a\n¦\nd\n( ,\n)1\nxij\nk\nij A d a\n¦\nd\n(\n,\n)\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nBranch-and-Bound Results:\nConventional Branching Rule\n- Eight telecommunications test problems\n- 50 nodes, 130 arcs, 585 commodities\n- Computational experiment on an IBM\nRS6000/590\n- For each of the eight test problems, run time\nof 3600 seconds\n- No feasible solution was found\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nBranch-and-Bound Results: Our\nNew Branching Rule\nproblem\ncolumns\nnodes\ngap\ntime (sec)\n0.14%\n0.5%\n1.5%\n2.7%\n1.5%\n1.7%\n5.0%\n13.0%\nAll test problems have 50 nodes, 130 arcs, 585 commodities.\nRun times on an IBM RS6000/590.\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nConclusions I\n- Choose your formulation carefully\n- Trade-off memory requirements and solution time\n- Sub-network formulation can be effective when\nlow level of congestion in the network\n- Problem size often mandates use of combined\ncolumn and row generation\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nConclusions II\n- Solution time is affected dramatically by\n- The complexity of the pricing problem\n- Exploitation of problem structure, pre-\nprocessing, LP solver selection, etc.\n- Branching strategy should preserve the\nstructure of the pricing problem\n- Branch on \"small\" decisions, not the variables in\nthe column generation formulation"
    },
    {
      "category": "Lecture Notes",
      "title": "lec5_passenger_mix_2003.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/1-206j-airline-schedule-planning-spring-2003/7439d2a05c04bb846b5ed58b1c74360f_lec5_passenger_mix_2003.pdf",
      "content": "1.206J/16.77J/ESD.215J\nAirline Schedule Planning\nCynthia Barnhart\nSpring 2003\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\n1.206J/16.77J/ESD.215J\nThe Passenger Mix Problem\nOutline\n- Definitions\n- Formulations\n- Column and Row Generation\n- Solution Approach\n- Results\n- Applications and Extensions\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nSome Basic Definitions\n- Market\n- An origin-destination airport pair, between which\npassengers wish to fly one-way\n- BOS-ORD and ORD-BOS are different\n- Itinerary\n- A specific sequence of flight legs on which a passenger\ntravels from their ultimate origin to their ultimate\ndestination\n- Fare Classes\n- Different prices for the same travel service, usually\ndistinguished from one another by the set of restrictions\nimposed by the airlines\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nSome More Definitions\n- Spill\n- Passengers that are denied booking due to\ncapacity restrictions\n- Recapture\n- Passengers that are recaptured back to the airline\nafter being spilled from another flight leg\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nProblem Description\n- Given\n- An airline's flight schedule\n- The unconstrained demand for all itineraries over\nthe airline's flight schedule\n- Objective\n- Maximize revenues by intelligently spilling\npassengers that are either low fare or will most\nlikely fly another itinerary (recapture)\n- Equivalent to minimize the total spill costs\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nExample\nAA\nBB\nI,100\nJ,200\nK,100\n- One market, 3 itineraries\n- Unconstrained demand per itinerary\n- Total demand for an itinerary when the number\nof seats is unlimited\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nExample with Capacity\nConstraints\nAA\nBB\nI,100,150\nJ,200,175\nK,100,130\n- One market, 3 itineraries\n- Capacity on itinerary I = 150\n- Capacity on itinerary J = 175\n- Capacity on itinerary K = 130\n- Optimal solution:\n- Spill _____ from I\n- Spill _____ from J\n- Spill _____ from K\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nRevenue Management: A Quick\nLook\n- One flight leg\n- Flight 105, LGA-ORD, 287 seats available\n- Two fare classes:\n- Y: High fare, no restrictions\n- M: Low fare, many restrictions\n- Demand for Flight 105\n- Y class: 95 with an average fare of $400\n- M class: 225 with an average fare of $100\n- Optimal Spill Solution ( Y and M passengers)\n- Revenue: $\n- Spill: $\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nNetwork Revenue Management\n- Two Flights\n- Flight 105, LGA-ORD, 287 seats\n- Flight 201, ORD-SFO, 287 seats\n- Demand (one fare class)\n- LGA-ORD, 225 passengers $100\n- ORD-SFO, 150 passengers $150\n- LGA-SFO, 150 passengers, $225\n- Optimal Solution: $\n- LGA-ORD, passengers\n- ORD-SFO, passengers\n- LGA-SFO, passengers\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nQuantitative Share Index or\nQuality of Service Index (QSI):\nDefinition\n- Quantitative Share Index or Quality of\nService Index (QSI)\n- There is a QSI for each itinerary i in each market\nm for each airline a, denoted QSIi(m)a\n- The sum of QSIi(m)a over all itineraries i in a\nmarket m over all airlines a is equal to 1, for all\nmarkets m\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nMarket Share\n- The market share of airline a in market m is\nthe sum of QSIi(m)\na over all itineraries i in\nmarket m\n- The market share of the competitors of\nairline a in market m is 1 - (the sum of QSIi(m)\na\nover all itineraries i in market m)\n- Denote this as mscma\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nRecapture\n- Consider a passenger who desires itinerary I but is\nredirected (spilled) to itinerary J\n- The passenger has the choice of accepting J or not (going\nto a competitor)\n- Probability that passenger will accept J (given an uniform\ndistribution) is the ratio of QSIJ(m)\na to (QSIJ(m)\na + mscm\na)\n- Probability that passenger will NOT accept J (given\nan uniform distribution) is the ratio of mscma to\n(QSIJ(m)a + mscma)\n- The ratios sum to 1\n- If a is a monopoly, recapture rate will equal 1.0\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nRecapture Calculation\n- Recapture rates for airline a:\n- bIJ: probability that a passenger spilled from I\nwill accept a seat on J, if one exists\n- QSI mechanism for computing recapture rates\na\np\na\nm\na\np\np\nr\nQSI\nmsc\nQSI\nb\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nExample with Recapture\nAA\nBB\nI,100,150\nJ,300,175\nK,100,130\n- Recapture rates:\n- bI\nJ= 0.4, bI\nk= 0.1\n- bJ\nI= 0.5, bJ\nK= 0.1\n- bK\nI= 0.5, bK\nJ= 0.4\n- Assume all itineraries have a single fare class, and\ntheir fares are all equal\n- Optimal solution:\n- Spill _____ from I to J, Spill _____ from I to K\n- Spill _____ from J to I, Spill _____ from J to K\n- Spill _____ from K to I, Spill _____ from K to J\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nMathematical Model: Notation\n- Decision variables\n- the number of passengers that desire travel on\nitinerary p and then travel on itinerary r\n- Parameters and Data\n- the average fare for itinerary p\n- the daily unconstrained demand for itinerary p\n- the capacity on flight leg i\n- the recapture rate of a passenger desiring itinerary p\nwho is offered itinerary r\nG i\np\ni\np\n\n(r)\n\nif f lig h t le g is o n it in e r a r y\no t h e r w is e\nx p\nr\np\nfare\np\nD\nC A P i\nbp\nr\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nBasic Formulation\nP\nr\np\nx\nP\np\nD\nb\nx\nL\ni\nCAP\nx\nx\nfare\nr\np\nP\nr\np\nr\np\nr\np\ni\nP\np\nP\nr\nr\np\nr\ni\nP\np\nP\nr\nr\np\nr\n\nt\n\nd\n\nd\n¦\n¦ ¦\n¦ ¦\n\n,\n/\n:\nsubject to\nMaximize\nG\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nColumn Generation\nAny\nNew Columns?\nSTOP\n(LP Optimal)\nSolve\nRestricted Master Problem\n(RMP)\nSolve\nPricing Problem\nUpdate RMP with\nNew Columns\nNo\nYes\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nRow Generation\nAny\nNew Constraints?\nSTOP\n(LP Optimal)\nSolve\nRelaxed Problem (RP)\nSolve\nSeparation Problem\nUpdate RP with\nNew Constraints\nNo\nYes\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nColumn and Row Generation\nAny\nNew Columns?\nSolve\nRestricted Master Problem\n(RMP)\nSolve\nPricing Problem\nUpdate RMP with\nNew Columns\nSet OPT_Cut = NO\nNo\nYes\nAny\nNew Constraints?\nSolve\nRelaxed Problem (RP)\nSolve\nSeparation Problem\nNo\nSet\nOPT_Col = NO\nOPT_Cut = NO\nUpdate RP with\nNew Constraints\nSet OPT_Col = NO\nSet\nOPT_Col = YES\nOPT_Col = YES\nOPT_Cut = YES\nYes\nSet\nOPT_Cut = YES\nOPT_Col = YES\nOPT_Cut = YES\nYes\nNo\nYes\nNo\nSTOP\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nColumn and Row Generation:\nConstraint Matrix\nOriginal RMP\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nThe Keypath Concept\n- Assume most passengers flow along their desired\nitinerary\n- Focus on which passengers the airline would like to\nredirect on other itineraries\n- New decision variable\n- The number of passengers who desire travel on itinerary p, but\nthe airline attempts to redirect onto the itinerary r\n- New Data\n- The unconstrained demand on flight leg i\nr\np\nt\ni\nQ\n¦\n\nP\np\np\np\ni\ni\nD\nQ\nG\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nThe Keypath Formulation\n\n:\ns.t.\nMin\nt\n\nd\n\nt\n\n¦\n¦ ¦\n¦ ¦\n¦ ¦\n\nr\np\nP\nr\np\nr\np\ni\ni\nP\nr\nP\np\np\nr\np\nr\np\ni\nP\nr\nP\np\nr\np\np\ni\nP\np\nP\nr\nr\np\nr\nr\np\np\nt\nP\np\nD\nt\nL\ni\nCAP\nQ\nt\nb\nt\nt\nfare\nb\nfare\nG\nG\nx\nD\nt\nx\nb t\np\np\np\np\nr\nr\np\np\nr\np\nr\np\nr\n\nz¦\nChange of variable\nRelationship\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nThe Benefit of the Keypath\nConcept\n- We are now minimizing the objective\nfunction and most of the objective\ncoefficients are __________. Therefore, this\nwill guide the decision variables to values of\n__________.\n- How does this help?\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nSolution Procedure\n- Use Both Column Generation and Row Generation\n- Actual flow of problem\n- Step 1- Define RMP for Iteration 1: Set k =1. Denote an\ninitial subset of columns (A1) which is to be used.\n- Step 2- Solve RMP for Iteration k: Solve a problem with\nthe subset of columns Ak.\n- Step 3- Generate Rows: Determine if any constraints are\nviolated and express them explicitly in the constraint\nmatrix.\n- Step 4- Generate Columns: Price some of the remaining\ncolumns, and add a group (A*) that have a reduced cost\nless than zero, i.e., Ak+1=[Ak |A*]\n- Step 5- Test Optimality: If no columns or rows are added,\nterminate. Otherwise, k =k+1, go to Step 2\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nColumn Generation\n- There are a large number of variables\n- nm is the number of itineraries in market m\n- Most of them aren't going to be considered\n- Generate columns by explicit enumeration\nand \"pricing out\" of variables\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nComputing Reduced Costs\n- The reduced cost of a column is\nwhere is the non-negative dual cost\nassociated with flight leg i and is the non-\nnegative dual cost associated with itinerary p\np\nr\nj\nj\nr\nr\np\np\ni\ni\np\nr\np\nfare\nb\nfare\nc\nV\nS\nS\n\n·\n\n(c)\n§\n\n¦\n¦\n\ni\nS\np\nV\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nSolving the Pricing Problem\n(Column Generation)\n- Can the column generation step be\naccomplished by solving shortest paths on a\nnetwork with \"modified\" arc costs, or some\nother polynomial time algorithm?\n- Hint: Think about fare structure\n- What are the implications of the answer to this\nquestion?\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nComputational Experience\n- Current United Data\n- Number of Markets -15,678\n- Number of Itineraries - 60,215\n- Maximum number of legs in an itinerary- 3\n- Maximum number of itineraries in a market- 66\n- Flight network (# of flights)- 2,037\n- Using CPLEX, we solved the above problem in\nroughly 100 seconds, generating just over 100,000\ncolumns and 4,100+ rows.\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nApplications: Irregular Operations\n- When flights are cancelled or delayed\n- Passenger itineraries are cancelled\n- Passenger reassignments to alternative itineraries\nnecessary\n- Flight schedule and fleet assignments (capacity) are known\n- Objective might be to minimize total delays or to minimize the\nmaximum delay beyond schedule\n- How are recapture rates affected by this scenario?\n- How would the passenger-mix model have to be\naltered for this scenario?\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nExtensions: Yield Management\n- Can the passenger mix problem be used as a tool for\nyield management?\n- What are the issues?\n- Deterministic vs. stochastic\n- Sequence of requests\n- Small demands (i.e., quality of data)\n- Advantages\n- Shows the expected makeup of seat allocation\n- Takes into account the probability of recapturing spilled\npassengers\n- Gives ideas of itineraries that should be blocked\n- Dual prices might give us ideas for contributions, or\ndisplacement costs\n\n12/10/2003\nBarnhart 1.206J/16.77J/ESD.215J\nExtensions: Fleet Assignment\n- To be explained in the next lectures..."
    }
  ]
}