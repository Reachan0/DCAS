{
  "course_name": "Integrated Chemical Engineering Topics I: Process Control by Design",
  "course_description": "In the ICE-Topics courses, various chemical engineering problems are presented and analyzed in an industrial context. Emphasis is on the integration of fundamentals with material property estimation, process control, product development, and computer simulation. Integration of societal issues, such as engineering ethics, environmental and safety considerations, and impact of technology on society are addressed in the context of case studies.\nThe broad context for this ICE-Topics module is the commonsense notion that, when designing something, one should plan for the off-normal conditions that may occur. A continuous process is conceived and designed as a steady-state operation. However, the process must start up, shut down, and operate in the event of disturbances, and so the time-varying behavior of the process should not be neglected. It is helpful to consider the operability of a process early in the design, when alternatives are still being compared. In this module, we will examine some tools that will help to evaluate the operability of the candidate process at the preliminary design stage, before substantial effort has been invested.",
  "topics": [
    "Engineering",
    "Chemical Engineering",
    "Process Control Systems",
    "Environmental Engineering",
    "Environmental Management",
    "Science",
    "Chemistry",
    "Analytical Chemistry",
    "Engineering",
    "Chemical Engineering",
    "Process Control Systems",
    "Environmental Engineering",
    "Environmental Management",
    "Science",
    "Chemistry",
    "Analytical Chemistry"
  ],
  "syllabus_content": "Course Meeting Times\n\nLectures: 18 sessions / 5 weeks, 1 hour / session\n\nOverview\n\nThe broad context for this ICE-Topics module is the commonsense notion that, when designing something, one should plan for the off-normal conditions that may occur. A continuous process is conceived and designed as a steady-state operation. However, the process must start up, shut down, and operate in the event of disturbances, and so the time-varying behavior of the process should not be neglected. It is helpful to consider the operability of a process early in the design, when alternatives are still being compared. In this module, we will examine some tools that will help to evaluate the operability of the candidate process at the preliminary design stage, before substantial effort has been invested.\n\nGoals\n\nI want you to learn about:\n\ncontinuous processes, although designed for steady state, will vary in time\n\nthe Relative Gain Array, Disturbance Cost, and dynamic simulation as tools to use in design\n\nsome basic notions of process control\n\nObjectives\n\nI plan to show you:\n\na simple process that we can derive all the math for\n\na more complicated process that we will examine by numerical calculations\n\nuse of MATLAB(r) for matrix calculations\n\nthe derivation and use of the RGA and DC screening tools\n\nGrading\n\nSimplicity itself: 8 problem sets, the lowest grade dropped, and the remaining 7 weighted equally. Course letter grades will be assigned on the conventional scale: A≥90% and so on.",
  "files": [
    {
      "category": "Assignment",
      "title": "pset_1.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-492-1-integrated-chemical-engineering-topics-i-process-control-by-design-fall-2004/7658a286e75a244c39263f78cbaf0d75_pset_1.pdf",
      "content": "Fall 2004\nICE Topics: Process Control by Design\n10.492\nProblem Set 1: Examining the Energy Balance\nFor this problem set, I will accept submissions with one or two names.\n(1) Beginning with the simplified energy balance for the shower\nFc\nT =\nFh\nTh +\nTc\nFh + F\nFh + F\nc\nc\nfill in the missing steps to derive the linearized energy balance\nT\nF\nhr +\nT\nF\nT\nF\nhr +\nT\nF\n⎤\nhr\nhr\ncr\ncr\nF\nT =\ncr cr + ⎡\n⎢\nThr\n-(F + F ) ⎥\n⎦\n(F - Fhr )+\nFhr\n(T - Thr )\nhr + F\n⎣ Fhr + F\nh\nFhr + F\nh\ncr\ncr\nhr\ncr\ncr\n⎡ T\nT\nF\nhr +\nT\nF\n⎤\n+\n⎣\n⎢ Fhr +\ncr\nF\nhr\ncr\ncr\nc\ncr\ncr\nc\ncr\n- (F + F ) ⎥\n⎦\n(F - F )+\nF\n(T - T )\nFhr + F\ncr\nhr\ncr\ncr\n- (please use the nomenclature of the Lecture Notes)\n(2) Specify practical reference conditions for each of the variables in the energy balance. For\nexample, we know that a shower is more than a trickle and less than a torrent - what is a\nreasonable flowrate? We will regard these reference values as the desired operating condition\nfor our process, and thus they should satisfy the steady state M&EB.\n- (please use the nomenclature of the Lecture Notes)\n- (will people look at you strangely if they see you in the dormitory shower room with a\nbucket and stopwatch?)\n(3) The energy balance ought to tell us something useful. Compute how outlet temperature T\nvaries with inlet hot flow Fh over the domain from 0 to twice the reference value Fhr you chose in\n(2). Make the computation from both the simplified and linearized energy balances in (1). Plot\nthese results together on T vs. Fh axes. Compute enough points so that you get the sort of plot\nDr. Dalzell would approve.\n- What do you observe about the accuracy of a linearized model?\n(4) Specify practical operating ranges for each variable in the energy balance. It's the sort of\ndecision you would make in designing an experimental apparatus - what range of gauge do I\nbuy? How much will this variable actually vary? The Lecture Notes offer some considerations\nfor making this decision.\n- (please use the nomenclature of the Lecture Notes)\n(5) Express the results of (3) as scaled deviation variables, using the reference values of (2) and\n*'\nthe scaling ranges of (4). Make the analogous plot on T*' vs. Fh axes. Do you see how\ndecisions made in (4) could affect the appearance of the dimensionless plot?\nrevised 2004 Nov 5\nDr. Barry S. Johnston, Copyright 2004."
    },
    {
      "category": "Assignment",
      "title": "pset_2.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-492-1-integrated-chemical-engineering-topics-i-process-control-by-design-fall-2004/f62ba620ac4dbb4927ef09d2a6bca104_pset_2.pdf",
      "content": "Fall 2004\nICE Topics: Process Control by Design\n10.492\n\nProblem Set 2: Matrix Operations\nrevised 2004 Nov 8\nDr. Barry S. Johnston, Copyright 2004.\n\nFor this problem set, I will accept submissions with one name only.\n\nPlease work the following problems by hand. Check your work with Matlab.\n\nGiven:\nA =\n2 -5 3 1\n3 2 -2 -1\n-3 1 1 3\n\nB =\n1 3 2\n-2 3 4\n\nC =\n2 -4\n1 3\n\nD =\n3 0\n0 2\n\nx =\n1 -1 2 3\n\ny =\n2 3 -1\n\nz =\n3 1\n\nCompute:\n\n(1) A xT\n\n(2) AT B\n\n(3) C zT\n\n(4) D B yT\n\n(5) z C\n\n(6) C q = zT (solve for q)"
    },
    {
      "category": "Assignment",
      "title": "pset_3.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-492-1-integrated-chemical-engineering-topics-i-process-control-by-design-fall-2004/0a71057b0088d7dd3c769d9b80d7008c_pset_3.pdf",
      "content": "Fall 2004\nICE Topics: Process Control by Design\n10.492\nProblem Set 3: Calculating RGA and DC\nFor this problem set, I will accept submissions with one or two names.\n(1) Beginning with linearized material and energy balances for the shower, expressed in physical\nterms,\nF = Fh + Fc\nT\nF\nhr +\nT\nF\nT\nF\nhr +\nT\nF\n⎤\nhr\nhr\ncr\ncr\nF\nT =\ncr cr + ⎡\n⎢\nThr\n-(F + F ) ⎥\n⎦\n(F - Fhr )+\nFhr\n(T - Thr )\nhr + F\n⎣ Fhr + F\nh\nFhr + F\nh\ncr\ncr\nhr\ncr\ncr\n⎡ T\nT\nF\nhr +\nT\nF\n⎤\n⎢\n+\ncr\nhr\ncr\ncr\ncr\n-(F + F ) ⎥\n⎦\n(F - F )+\nF\n(T - T )\n⎣ Fhr + F\nc\ncr\nFhr + F\nc\ncr\ncr\nhr\ncr\ncr\nderive an expression for each individual element λij of the RGA from the definition\nx\nthe\nof\ngain\nmj →\nwith\nloop\ny\nopen\nloops\nother\ni\nλij ≡\nx\nthe\nof\ngain\nmj →\nwith\nloop\ny\nperfect\nloops\nother\ni\n∂yi\n∂xmj\n= xmj constant\nxmk\n=\n∂y i\n∂xmj yk = yi constant\n- (please use the nomenclature of the Lecture Notes)\n(2) Beginning with linearized material and energy balances for the shower, expressed in scaled\ndeviation terms,\nF*'\n∆Fh Fh\n*' + ∆Fc F*'\n=\nc\n∆F\n∆F\nT*'\n⎡ Thr - T ⎤∆Fh Fh\n*' + ⎢\n⎡ T - T ⎤∆Fc F*'\nFhr ∆Th Th\n*' + Fcr ∆Tc T*'\ncr\nr\n+\n= ⎢\nr ⎥\nc\n⎣\nF\n⎦∆T\n⎣\nF\n⎥⎦ ∆T\nc\nF ∆T\nF ∆T\nr\nr\nr\nr\nderive the RGA matrix Λ from the matrix of gain coefficients Pm\n*.\nrevised 2004 Nov 9\nDr. Barry S. Johnston, Copyright 2004. 1\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\nProblem Set 3: Calculating RGA and DC\n* - 1 )\nT\n=\nΛ P* ⊗( P\nm\nm\n- (please use the nomenclature of the Lecture Notes)\n(3) For each variable in the shower process, state your reference value and scaling (max-min)\nlimits. Be sure to include units. Then calculate numeric values for the RGA.\n- Which pairing of variables do you recommend for control?\n- Can you find other reference values that are reasonable, but would lead you to the\nopposite conclusion?\n(4) Calculate DC for various combinations of the disturbance variables. The disturbance\nvariables should be set at their minimum, zero, and maximum deviations. Express the results as\na plot of DC versus the angle of the disturbance vector, as shown in the Notes.\n- (the example in the Notes presumed that each reference value was centered in its\noperating range - your reference and scaling values may well be different, so that your\nangles may not be uniformly spaced at 45°.)\nrevised 2004 Nov 9\nDr. Barry S. Johnston, Copyright 2004."
    },
    {
      "category": "Assignment",
      "title": "pset_4.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-492-1-integrated-chemical-engineering-topics-i-process-control-by-design-fall-2004/9f583aa472dc8c0ec81729f2ac88e37c_pset_4.pdf",
      "content": "Fall 2004\nICE Topics: Process Control by Design\n10.492\nProblem Set 4: Simulation of the Controlled Shower\nFor this problem set, I will accept submissions with one or two names.\n(1) The notes present a linear model for the shower, operating under proportional control. The\nhot flow Fh is manipulated to control the total flow F, and the cold flow Fc to control T. This\nmodel is then examined for the limiting case of no interaction - i.e., when the RGA elements for\nthe paired variables are equal to 1.\nIn a similar manner, derive the opposite limiting case, in which the RGA elements for the paired\nvariables are equal to 0. Present the equations you derive, and discuss their implication for\ndisturbance response, set point response, interaction between control loops, and the effect of\ncontroller gain settings.\nThe purpose of both these derivations is to learn how conclusions you would draw from the RGA\n(a screening tool used early in design) are borne out in simulation of the process (a more detailed\nactivity appropriate in later design stages).\n- (please use the nomenclature of the Lecture Notes)\n(2) For each variable in the shower process, state your reference value and scaling (max-min)\nlimits. Be sure to include units. Then calculate process responses under proportional control:\n*\n*'\n- Plot T*' and F*' vs. KCT for Th\n*' = -0.25, under conditions of small KCF (a low gain on\nthe flow controller) and Tc and set points remaining at their reference values. On the\nsame plot, illustrate what would happen if there were no control.\n- Make similar plots for medium and for high KCF\n*.\n- Discuss, from the shower user's point of view, whether control has helped.\n- What is the effect of the two controller gain settings? What settings do you recommend\nfor your shower?\n- (You must decide what constitute low, medium, and high values for KCF\n*, as well as a\nsuitable plotting domain for KCT\n*. If you were doing this assignment for money, you\nwould try to achieve the best illustration of the system behavior, so that useful\nconclusions could be drawn. Here, you are working for points, but the same principle\napplies.)\nrevised 2004 Nov 12\nDr. Barry S. Johnston, Copyright 2004. 1"
    },
    {
      "category": "Assignment",
      "title": "pset_5.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-492-1-integrated-chemical-engineering-topics-i-process-control-by-design-fall-2004/9f8277580230f5384b26279789eb692e_pset_5.pdf",
      "content": "Fall 2004\nICE Topics: Process Control by Design\n10.492\nProblem Set 5: Designing some heat exchangers\nFor this problem set, each student should submit individual work.\n50,000 lbm h-1 of a refinery alkane stream that can be represented as hexadecane is to be cooled\nfrom 455 to 290°F. Rather than pay for cooling utilities, you decide to recover this energy into\nother streams that need to be heated. You find that fuel oil of \"relative density\" 0.95 is available\nat 305°F and 70,000 lbm h-1, and a large supply of tridecane is available at 210°F, although this\nmust not be heated above 300°F. Perform preliminary sizing of suitable heat exchange\nequipment.\nYour response should\n- be worked in SI units\n- include a flow diagram sketch with stream flows and temperatures shown\n- include a table of physical properties and other design information that you used\n- document and justify the simplifying assumptions you made\n- list the process variables and classify each as \"controlled\", \"manipulated\", \"disturbance\",\nor, if necessary, \"intermediate\". (Intermediate is a category that arises in more complex\nprocesses - an intermediate variable depends on inputs, and either affects outputs or is\nitself an uncontrolled output.)\n- assert a design case (what we have been calling \"steady-state reference values) that gives\nyou room to maneuver the manipulated variables and \"optimizes\" heat exchanger surface.\nDon't overdo it.\nThis is preliminary design. Don't bog yourself down in detailed calculations for heat transfer\ncoefficients, physical properties, and any details of heat exchanger design. Neither, of course,\nshould you use bone-headed estimates of these quantities. Use good sense and the reference\nmaterial you've been accumulating over the past few years to come up with the data you need.\n(But be suspicious of Equation 27-11 in Perry's 7th...) Furthermore, \"optimizing\" the use of\nsurface area simply means not to turn in the first result you calculate - work a bit with your\nindependent variables to point toward a decent design.\nrevised 2004 Nov 19\nDr. Barry S. Johnston, Copyright 2004. 1"
    },
    {
      "category": "Assignment",
      "title": "pset_6.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-492-1-integrated-chemical-engineering-topics-i-process-control-by-design-fall-2004/63c1614691b9e02fee5748adfdaeec64_pset_6.pdf",
      "content": "Fall 2004\nICE Topics: Process Control by Design\n10.492\nProblem Set 6: calculating the HX network base case\nFor this problem set, each student should submit individual work.\nHere's the network:\nW1\nT6\nT5\nT4\nT1\nT9\nT7\nE101\nE102\nE103\nW1\nT6\nT5\nT4\nT1\nT9\nT7\nE101\nE102\nE103\nT8\n\nW2 T2\nW3 T3\n\nK\nThese are all unspecified organic liquid streams. Let all the heat capacities be simply 2500 J kg-1\n-1, all the heat transfer coefficients 250 W m-2 K-1, and all the heat exchangers 117 m2. The\ninlet streams are\nW1: 8.0 kg s-1, 248°C\nW2: 9.0 kg s-1, 138°C\nW3: 5.5 kg s-1, 102°C\n(1) Calculate the unknown temperatures and heat duties at steady-state.\n(2) Imagine that you are employed in a process engineering group. You and your colleagues\nprovide both design and technical support to plant operating departments. Each of you routinely\nwrites a weekly summary of your activities; these are collected by the supervisor and circulated\nto the group. By this means, each of you is better acquainted with the overall mission, as well as\ninformed where experience and expertise may be found within the group. Accompany your\nresult in (1) with such a summary explanation of your method, suitable for colleagues in a\ntechnical group.\nrevised 2004 Nov 23\nDr. Barry S. Johnston, Copyright 2004. 1"
    },
    {
      "category": "Assignment",
      "title": "pset_7.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-492-1-integrated-chemical-engineering-topics-i-process-control-by-design-fall-2004/7c916d4aa4ab6e02e595f2a5208542ac_pset_7.pdf",
      "content": "Fall 2004\nICE Topics: Process Control by Design\n10.492\nProblem Set 7: alternative HX network base case\nFor this problem set, work with one or two names will be accepted.\nConsider alternative heat exchanger networks:\nbypass\nW1\nT6\nT5\nT4\nT1\nT9\nT7\nE101\nE102\nE103\nφW3\nT7a\nW1\nT6\nT5\nT4\nT1\nT9\nT7\nE101\nE102\nE103\nφW3\nT7a\nT8\n\nW2 T2\nW3 T3\n\ntrim HX\nW1\nT6\nT5\nT4\nT1\nT9\nT7\nE101\nE102\nE103\nT7a\nE104\nT11\nWu T10\nW1\nT6\nT5\nT4\nT1\nT9\nT7\nE101\nE102\nE103\nT7a\nE104\nT11\nWu T10\nT8\n\nW2 T2\nW3 T3\n\nFor each of these networks,\n(1) assemble the nonlinear equations that describe their steady-state behavior\n(2) classify the variables - there will now be 3 CV and 3 MV\n(3) determine the unknown reference values for the following specifications\nall heat capacities 2500 J kg-1 K-1\nall heat transfer coefficients 250 W m-2 K-1\n(inputs)\nW1r: 8.2 kg s-1 T1r:250°C\nT2r:136°C\nT3r:100°C\nT10: 180°C (we will presume that T10 is not disturbed from this value)\n(outputs)\nT6r: 129.3°C\nT8r: 223.4°C\nT9r: 168.8°C\nStep (3) constitutes your design, in which the result will be heat exchanger sizes and the bypass\nfraction to achieve the specified outputs, for the specified inputs. Are these enough\nspecifications to determine a unique design? Recall that the original network used three\nexchangers of area 117 m2; any or all of these may change for the new designs. Furthermore, the\nmanipulated variables may assume new reference values.\nrevised 2004 Nov 30\nDr. Barry S. Johnston, Copyright 2004. 1"
    },
    {
      "category": "Assignment",
      "title": "pset_8.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-492-1-integrated-chemical-engineering-topics-i-process-control-by-design-fall-2004/107c162e6aa70c7112e462652b871459_pset_8.pdf",
      "content": "Fall 2004\nICE Topics: Process Control by Design\n10.492\nProblem Set 8: alternative HX network RGA and DC\nFor this problem set, work with one or two names will be accepted.\nIn PSet 7, you designed 2 alternative HX networks:\nbypass\nW1\nT6\nT5\nT4\nT1\nT9\nT7\nE101\nE102\nE103\nφW3\nT7a\nW1\nT6\nT5\nT4\nT1\nT9\nT7\nE101\nE102\nE103\nφW3\nT7a\nT8\n\nW2 T2\nW3 T3\n\ntrim HX\nW1\nT6\nT5\nT4\nT1\nT9\nT7\nE101\nE102\nE103\nT7a\nE104\nT11\nWu T10\nW1\nT6\nT5\nT4\nT1\nT9\nT7\nE101\nE102\nE103\nT7a\nE104\nT11\nWu T10\nT8\n\nW2 T2\nW3 T3\n\nFor each of your network designs,\n(1) compute the RGA and select the most promising pairing of CV and MV.\n(2) compute the DC for all combinations of -, 0, + variations of the four disturbance variables.\nIdentify the worst disturbance conditions. Verify that your manipulated variables are sized to\novercome the disturbances.\nAs before:\nall heat capacities 2500 J kg-1 K-1\nall heat transfer coefficients 250 W m-2 K-1\n(inputs)\nW1r: 8.2 kg s-1 T1r:250°C\nT2r:136°C\nT3r:100°C\nT10: 180°C (we will presume that T10 is not disturbed from this value)\n(outputs)\nT6r: 129.3°C\nT8r: 223.4°C\nT9r: 168.8°C\nIt may happen that a design decision you made in PSet 7 will prove in PSet 8 to be unworkable.\nIn this case, RGA and DC are telling you something useful, and you may change your design to\nimprove matters.\nrevised 2004 Nov 30\nDr. Barry S. Johnston, Copyright 2004. 1"
    },
    {
      "category": "Resource",
      "title": "notes_1_shower.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-492-1-integrated-chemical-engineering-topics-i-process-control-by-design-fall-2004/13b3df56fb34060f78da643586a0277e_notes_1_shower.pdf",
      "content": "Fall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 1: Analyzing the Shower Process\nrevised 2004 Dec 16\nDr. Barry S. Johnston, Copyright 2004. 1\n\nwhat we will be doing in this module\nThe broad context for this module is the commonsense notion that, when designing something,\none should plan for the off-normal conditions that may occur.\n\nThe particular context is the design of continuous chemical processes. Design starts with some\nproduct in mind (a simple molecule, a complex substance, or a structured product), and possibly\nseveral distinctive paths to reach it (the variations in chemistry, sequence, and processing that\ncomprise a chemical process). The alternative processes are examined in a cursory fashion and\nunpromising ones discarded. As the design proceeds, increasing effort is spent on fewer\nalternatives in the approach to detailed design.\n\nA continuous process is conceived and designed as a steady-state operation. However, the\nprocess must start up, shut down, and operate in the event of disturbances, and so the time-\nvarying behavior of the process should not be neglected. A proper dynamic simulation of the\nprocess requires that a number of design details be in place, and thus must take place in later\nstages of design. Even so, it is helpful to consider the operability of a process earlier in the\ndesign, when alternatives are still being compared. In this module, we will examine some tools\nthat will help to evaluate the operability of the candidate process at the preliminary design stage,\nbefore substantial effort has been invested. Thus, these are screening tools.\n\nThe ideas presented in these notes are derived from the texts by Marlin (1), McAvoy (2), and\nSeider et al (3).\n\na few ways in which processes can go wrong\nbad operation\n- inadequate procedures\n- mis-tuned controllers\n- malfunctioning instruments\nbad implementation of the design\n- backwards flowmeters and other installation mistakes\n- valve in wrong place\n- wrong type of valve\n- mistakes in construction/check-off\n- field decisions that should have been specified in the design\nbad design\n- mis-sized equipment\n- poor controller scheme\n- prone to instability\n- poorly located or selected instrument\n- insufficient number of instruments\n\nwe will begin by analyzing a simple process\nIt's only an ordinary shower, but we'll dress it up as a chemical process: two feed streams enter\nand mix to form an outlet stream of flow F and temperature T. Instruments are provided on the\nexit line to measure these quantities, and valves regulate the feed streams.\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 1: Analyzing the Shower Process\nrevised 2004 Dec 16\n\nF\nT\nFh Th\nFc Tc\nF T\nF\nT\nF\nT\nFh Th\nFc Tc\nF T\n\nOur shower should operate as a steady process. To design it, we must specify steady conditions,\nvalve sizes, pipe size, supply pressure, instruments, and so forth. Mindful of the discussion\nabove, we'll also want to examine its operability.\n\nwe think about how the process should operate\nThe process operating objective is to maintain steady F and T at desired conditions. What might\ninterfere with that objective? How might we respond?\n\nIt will clarify our thinking if we classify the variables:\n\nCV - controlled variables\nF T\n(variables important for safety, product quality, etc.)\nMV - manipulated variables Fh Fc (manipulate to exert influence on CV)\nDV - disturbance variables\nTh Tc (these disrupt CV, and we try to counter them with MV)\n\nWhen we consider using MV to counter DV so that CV can be maintained at a set point, we\nintroduce the topic of process control.\n\nwe briefly describe the notion of process control\nWhen we talk about process control, we usually run across a feedback structure:\n\nobserve CV and use that information to adjust MV to compensate for the effects of DV.\n\n\"Feedback\" implies a reverse flow: while inputs DV and MV flow through the process to affect\nthe output CV, information about CV is fed back, outside the process, to change MV. The\nfeedback path creates a \"control loop\".\n\nfeedback\nprocess\nCV\nMV\nDV\nfeedback\nprocess\nCV\nMV\nDV\n\nDeciding how to adjust MV at any time is the function of a device called the \"controller\". In\n\"automatic control\" we \"close the loop\", giving the controller authority to set MV. If we \"open\nthe loop\" we block the feedback path and thus set MV manually\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 1: Analyzing the Shower Process\nrevised 2004 Dec 16\n\nwe apply feedback control to the shower process\nHere are two alternative feedback structures for the shower:\n\nF\nT\nFh Th\nFc Tc\nF T\nF\nT\nFh Th\nFc Tc\nF T\nF\nT\nF\nT\nFh Th\nFc Tc\nF T\n\nF\nT\nFh Th\nFc Tc\nF T\nF\nT\nFh Th\nFc Tc\nF T\nF\nT\nF\nT\nFh Th\nFc Tc\nF T\n\nEach structure comprises two separate control loops; i.e., connections between a controlled and a\nmanipulated variable. In the left figure, for example, if the flow rate is observed to change, the\nhot water valve will be adjusted. Changes in the temperature motivate adjustments to the cold\nwater valve. The right figure makes the opposite pairings between CV and MV.\n\nwe must choose one of these alternatives to pursue\nThese are design alternatives, and we must choose between them. Steady-state considerations\nseem not to favor one over the other, so we must ask which of these is better in overcoming a\ndisturbance? responding to a change in set point? maintaining a stable operation? reducing\ninteraction between the two control loops?\n\nWe have several days of mathematics to do in answering this question. Before we start that,\nthough, we should use our intuition: which do you prefer? Why?\n\nchemical engineers frequently find recourse in material and energy balances\nmaterial balance:\n\nρ\n-\nρ\n+\nρ\n=\n⎥\n⎦\n⎤\n⎢\n⎣\n⎡ρ∫\nF\nF\nF\ndV\ndt\nd\nc\nc\nh\nh\nV\n\n(1-1)\n\nenergy balance:\n\n(\n)\n(\n)\n(\n)\n(\n)\nref\np\nref\nc\npc\nc\nc\nref\nh\nph\nh\nh\nV\nref\np\nT\nT\nC\nF\nT\nT\nC\nF\nT\nT\nC\nF\ndV\nT\nT\nC\ndt\nd\n-\nρ\n-\n-\nρ\n+\n-\nρ\n=\n⎥\n⎦\n⎤\n⎢\n⎣\n⎡\n-\nρ∫\n\n(1-2)\n\nWe'll make two approximations to simplify the analysis:\n(1) physical properties constant with temperature; e.g. ρ = ρc = ρh and thus\n\n[\n]\nV\ndt\nd\ndV\ndt\nd\nV\n=\nρ\n=\n⎥\n⎦\n⎤\n⎢\n⎣\n⎡ρ∫\n\n(1-3)\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 1: Analyzing the Shower Process\nrevised 2004 Dec 16\n\nThis is often a reasonable approximation for liquids. It implies that the amount of mass in the\nsystem is constant, and that changes in flowrate are immediately communicated throughout the\nsystem.\n\n(2) V is not significantly large, so that the enthalpy variations within V as T varies are not\nsignificant. Thus\n\n(\n)\ndV\nT\nT\nC\ndt\nd\nV\nref\np\n≅\n⎥\n⎦\n⎤\n⎢\n⎣\n⎡\n-\nρ∫\n\n(1-4)\n\nThis is a more serious assumption. One of its implications is that there is no time delay: a\nchange in valve position or inlet temperature immediately affects the flow and temperature at the\nshowerhead.\n\nWith these simplifications (1-1) and (1-2) become\n\nc\nc\nh\nc\nh\nc\nh\nh\nc\nh\nT\nF\nF\nF\nT\nF\nF\nF\nT\nF\nF\nF\n+\n+\n+\n=\n+\n=\n\n(1-5)\n\nThese equations (under our assumptions) apply whether the flow is steady or time-varying.\n\nwe make a linear approximation to the nonlinear energy balance\nWe linearize the energy balance because\n- it makes the problem easier to solve\n- our control objective is to operate at a particular point. A linear approximation based on\nthat operating point can be quite accurate in the region of that point. (Of course, far from\nthe reference point, it can be wildly misleading!)\n\nWe express a nonlinear function f as a Taylor series anchored on the reference conditions xr and\nyr; we truncate after the first derivatives.\n\n(\n)\n(\n)\n(\n)\n(\n)\nr\nr\nr\nr\nr\nr\nx\nx\nx\nf\nx\nx\nx\nf\nx\n,\nx\nf\nx\n,\nx\nf\n-\n∂\n∂\n+\n-\n∂\n∂\n+\n≈\n\n(1-6)\n\nThis Taylor series can be extended to other numbers of variables. In our case, the shower\ntemperature is a function of the variables Fh, Fc, Th, and Tc. Four partial derivatives will be\nnecessary to approximate this function. Doing so, we arrive at a linearized energy balance\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 1: Analyzing the Shower Process\nrevised 2004 Dec 16\n\n(\n)\n(\n)\n(\n)\n(\n)\n(\n)\n(\n)\ncr\nc\ncr\nhr\ncr\ncr\nc\ncr\nhr\ncr\ncr\nhr\nhr\ncr\nhr\ncr\nhr\nh\ncr\nhr\nhr\nhr\nh\ncr\nhr\ncr\ncr\nhr\nhr\ncr\nhr\nhr\ncr\nhr\ncr\ncr\nhr\nhr\nT\nT\nF\nF\nF\nF\nF\nF\nF\nT\nF\nT\nF\nF\nF\nT\nT\nT\nF\nF\nF\nF\nF\nF\nF\nT\nF\nT\nF\nF\nF\nT\nF\nF\nT\nF\nT\nF\nT\n-\n+\n+\n-\n⎥\n⎦\n⎤\n⎢\n⎣\n⎡\n+\n+\n-\n+\n+\n-\n+\n+\n-\n⎥\n⎦\n⎤\n⎢\n⎣\n⎡\n+\n+\n-\n+\n+\n+\n+\n=\n\n(1-7)\n\nwe introduce deviation variables to focus on departure from desired conditions\nDeviation variables simplify the equations, as well as focus on the disturbances.\n\nc\ncr\nc\nh\nhr\nh\nr\nc\ncr\nc\nh\nhr\nh\nr\nT\nT\nT\nT\nT\nT\nT\nT\nT\nF\nF\nF\nF\nF\nF\nF\nF\nF\n′\n+\n≡\n′\n+\n≡\n′\n+\n≡\n′\n+\n≡\n′\n+\n≡\n′\n+\n≡\n\n(1-8)\n\nFr\nF\nt\nFr\nF\nt\nF'\nt\nF'\nt\n\nThe reference condition is chosen to satisfy the steady state M&EB and to be the desired, or set\npoint, condition. Therefore, only four of the six reference values can be independently chosen.\n\ncr\nhr\ncr\ncr\nhr\nhr\nr\ncr\nhr\nr\nF\nF\nT\nF\nT\nF\nT\nF\nF\nF\n+\n+\n=\n+\n=\n\n(1-9)\n\nWe now substitute the deviation variables into the material balance (1-5), and simplify.\n\nc\nh\nc\ncr\nh\nhr\nr\nc\nh\nF\nF\nF\nF\nF\nF\nF\nF\nF\nF\nF\nF\n′\n+\n′\n=\n′\n′\n+\n+\n′\n+\n=\n′\n+\n+\n=\n\n(1-10)\n\nSimilarly for the energy balance (1-5),\n\nc\nr\ncr\nh\nr\nhr\nc\nr\nr\ncr\nh\nr\nr\nhr\nT\nF\nF\nT\nF\nF\nF\nF\nT\nT\nF\nF\nT\nT\nT\n′\n+\n′\n+\n′\n⎥⎦\n⎤\n⎢⎣\n⎡\n-\n+\n′\n⎥⎦\n⎤\n⎢⎣\n⎡\n-\n=\n′\n\n(1-11)\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 1: Analyzing the Shower Process\nrevised 2004 Dec 16\n\nwe introduce scaled variables to put deviations into perspective\nThe fuel gauge in a car tells you the fraction of the fuel remaining, not the actual volume. One\nlitre may be sufficient to get you home in your Prius, but not in your Escalade - the gauge will\nindicate the relevance of 1L to each automobile. This is the use of a scaled variable.\n\nSuppose we expect Th to vary within the range Th,min to Th,max. Then we define a scaled variable\n\nmin\n,\nh\nmax\n,\nh\nh\nh\nhr\nh\n*'\nh\nT\nT\nT\nT\nT\nT\nT\n-\n=\n∆\n∆\n-\n≡\n\n(1-12)\n\nT\nT\nT\nT\nT\n:\nmaximum\nat\nT\nT\nT\nT\nT\n:\nminimum\nat\nmax\n*'\nh\nh\nhr\nmax\n,\nh\nmax\n*'\nh\nmin\n*'\nh\nh\nhr\nmin\n,\nh\nmin\n*'\nh\n≤\n≤\n∆\n-\n=\n≤\n≤\n-\n∆\n-\n=\n\n(1-13)\n\nWhere the maximum and minimum scaled values actually lie depends on where the reference\nvalue Thr falls within the operating range ∆Th.\n\n- for academic derivations and textbook material, we tend to set the reference to the desired\nvalue (the set point) as in the derivation above. Thus the scaled variable would vary\naround zero (from -0.5 to 0.5, say).\n- for operation in the control room, we prefer a 0 to 1 scale (or equivalently, 0 to 100%) so\nwe set the reference to the minimum value. Then the desired value will become, e.g., 0.5\nin scaled terms, and we will see the scaled variable wander about that value.\n\nNow, substitute scaled variable definitions into the material and energy balances (1-10) and (1-\n11).\n\n*'\nc\nc\n*'\nh\nh\n*'\nF\nF\nF\nF\nF\nF\nF\n∆\n∆\n+\n∆\n∆\n=\n\n(1-14)\n\n*'\nc\nc\nr\ncr\n*'\nh\nh\nr\nhr\n*'\nc\nc\nr\nr\ncr\n*'\nh\nh\nr\nr\nhr\n*'\nT\nT\nT\nF\nF\nT\nT\nT\nF\nF\nF\nT\nF\nF\nT\nT\nF\nT\nF\nF\nT\nT\nT\n∆\n∆\n+\n∆\n∆\n+\n∆\n∆\n⎥⎦\n⎤\n⎢⎣\n⎡\n-\n+\n∆\n∆\n⎥⎦\n⎤\n⎢⎣\n⎡\n-\n=\n\n(1-15)\n\ndon't panic when you look at these equations\nThey may look complicated, but they are the same old material and energy balances: the flow\nrate is the still the sum of the inlet flows, and the outlet temperature depends on the inlet flows\nand temperatures. The * means that the physical variable has been divided by its operating\nrange, so that its magnitude will not exceed 1. The ′ means that a steady condition has been\nsubtracted from the physical variable as a reference. The coefficients of these scaled deviation\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 1: Analyzing the Shower Process\nrevised 2004 Dec 16\n\nvariables are constants, made up of the partial derivatives from linearizing and ratios of the\nscaling ranges.\n\nhow to choose scaling ranges for the variables\n- disturbances are imposed on you. Scale according to what you anticipate (from operating\ndata, similar operations, general experience, or judgment.)\n- controlled variables are what you hope to achieve. Scale according to some realistic\nrange of operation.\n- manipulated variables are a design choice. Scale by the amount of influence you must\nbring to bear to counteract the disturbances.\n\nOne of the objectives of our modeling is to reconcile these various specifications.\n\nlinear equation systems are often presented in matrix notation\n\n⎥\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎢\n⎣\n⎡\n⎥\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎢\n⎣\n⎡\n∆\n∆\n∆\n∆\n+\n⎥\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎢\n⎣\n⎡\n⎥\n⎥\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎢\n⎢\n⎣\n⎡\n∆\n∆\n-\n∆\n∆\n-\n∆\n∆\n∆\n∆\n=\n⎥\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎢\n⎣\n⎡\n*'\nc\n*'\nh\nc\nr\ncr\nh\nr\nhr\n*'\nc\n*'\nh\nc\nr\nr\ncr\nh\nr\nr\nhr\nc\nh\n*'\n*'\nT\nT\nT\nT\nF\nF\nT\nT\nF\nF\nF\nF\nT\nF\nF\nT\nT\nT\nF\nF\nT\nT\nF\nF\nF\nF\nT\nF\n\n(1-16)\n\nWe shall give these matrices standard names, because these linear system models all look alike:\n\n*'\nd\n*\nd\n*'\nm\n*\nm\n*'\nx\nP\nx\nP\ny\n+\n=\n\n(1-17)\n\nWhen we make a linear approximation to some process model, it always comes down to this\nform. The gain matrices Pm\n* and Pd\n* contain the numbers that distinguish one process from\nanother. The input vectors xm\n*′ and xd\n*′ are processed by the gain matrices to produce the output\nvector y*'.\n\nWe could of course write the linear system equation without the * superscript if we had not\nscaled the variables. However, the ′ superscript is necessary, because the linear system\napproximation depends on deviations around a reference condition.\n\nwe introduce the Relative Gain Array to help us make a control decision\nWe now have a very distinguished-looking material and energy balance pair. We must use our\nlinear system model to answer the question of how to pair up the controlled and manipulated\nvariables into control loops. The RGA (Relative Gain Array) can help. The RGA builds on the\ngain matrix Pm\n* to illustrate how manipulated variables influence controlled variables when we\nconnect them by control loops. Thus, it indicates how control loops might interact - how\nattempting to control one variable might disturb another as a side-effect.\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 1: Analyzing the Shower Process\nrevised 2004 Dec 16\n\n⎥\n⎥\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎢\n⎢\n⎣\n⎡\nλ\nλ\nλ\nλ\nλ\nλ\nλ\nλ\nλ\n≡\nΛ\nK\nL\nK\nM\nK\n)\ny\n(\n)\ny\n(\n)\ny\n(\n)\nm\nx\n(\n)\nm\nx\n(\n)\nm\nx\n(\n\n(1-18)\n\n(The variable names in parentheses are labels. They show that, e.g., coefficient λ31 relates\nmanipulated variable xm1 to controlled variable y3.)\n\nThe RGA elements are defined as a ratio of gains.\n\nconstant\niy\nk\ny\nx\ny\nconstant\n\nmj\nx\nmk\nx\nx\ny\n\nperfect\n\nloops\nother\nwith\nloop\n\ny\n\nx\nthe\nof\ngain\nopen\n\nloops\nother\nwith\nloop\n\ny\n\nx\nthe\nof\ngain\nmj\ni\nmj\ni\ni\nmj\ni\nmj\nij\n=\n∂\n∂\n=\n∂\n∂\n=\n→\n→\n≡\nλ\n\n(1-19)\n\nFor the numerator, all control loops except xmj - yi have been disconnected (made open).\nTherefore there is no mechanism for manipulations of xmj to feed back through other control\nloops and motivate changes in the other xmk. For the denominator, it is imagined that all the\nother loops have been connected (made closed), and furthermore that they are SO GOOD that the\nother yk never vary away from set point, even when xmj is manipulated to influence yi.\n\nwhat these RGA elements mean\n- if λij = 1, then xmj influences yi with no interference from the other control loops. This is\nreally good.\n- if λij = 0, then xmj has little effect on yi. It will not be of much use in controlling it. In\nfact, its main effects will be exerted through the other loops, so there will be significant\nloop interaction.\n- if λij = big, then the effect of xmj is greatly diluted by the other loops. Changes in those\nloops will cause the influence of xmj on yi to vary widely, causing stability problems.\n- if λij < 0, the operation of other loops reverses the effect of xmj. Stability problems!\n\nAs λij departs from 1, the behavior of the loop is subject to non-welcome influences.\n\nwe use RGA to decide how to pair CV with MV\nThe RGA summarizes all possible MV-CV pairs. Our design decision is to select n pairs from\nthe n×n matrix of choices - we might think of circling our picks on a printed page. In the end,\neach row or column will have only one circled element.\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 1: Analyzing the Shower Process\nrevised 2004 Dec 16\n\na rule for pairing CV and MV, based on the RGA\nMcAvoy (2, p.84) says\n\n\"Always pair on positive RGA elements that are closest to 1.0. Check the resulting\npairings for stability using Niederlinski's theorem. If the pairings are unstable choose\nother positive pairings with values closest to 1.0. Avoid negative pairings if possible.\"\n\nHe illustrates his instability caveat with a case in which RGA elements of 1.0 are discarded in\nfavor of elements equal to 4.5. The Niederlinski Stability Theorem (modified from (2), p.83) is\n\nThe closed loop system resulting from the pairing\n\nxm1 - y1 xm2 - y2 ... xmn - yn\n\nis unstable if\n\n( )\np\nP\ndet\nn\ni\nii\nm <\n∏\n=\n\n(1-20)\n\nwhere pii are the diagonal elements of Pm. Notice that the gain matrix Pm must be arranged so\nthat the RGA pairing is on the diagonal.\n\nwe can calculate the individual RGA elements from the definition\nThe linear system model equations can be solved for individual RGA elements by holding\nvarious xm and y variables constant, according to the definition (1-19).\n\nwe can also calculate the RGA directly from the gain coefficient matrix\n\n(\n)\nT\nm\nm\nP\nP\n-\n⊗\n=\nΛ\n\n(1-21)\n\nLet's try it for the general 2×2 case: first we do the matrix operations on the gain coefficient\nmatrix.\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 1: Analyzing the Shower Process\nrevised 2004 Dec 16\n\n( )\n( )\n( )\n( )\n(\n)\n( )\nm\nT\nm\nm\nm\nm\nm\nm\np\np\np\np\np\np\np\np\nP\ndet\nP\nadj\nP\nP\ninv\np\np\np\np\nP\nadj\np\np\np\np\nP\ndet\np\np\np\np\nP\n-\n⎥⎦\n⎤\n⎢⎣\n⎡\n-\n-\n=\n=\n=\n⎥⎦\n⎤\n⎢⎣\n⎡\n-\n-\n=\n-\n=\n⎥⎦\n⎤\n⎢⎣\n⎡\n=\n-\n\n(1-22)\n\nThen we perform the element-by-element product.\n\np\np\np\np\np\np\np\np\np\np\np\np\n\np\np\np\np\np\np\np\np\np\np\np\np\n-\n⎥\n⎦\n⎤\n⎢\n⎣\n⎡\n-\n-\n=\n-\n⎥\n⎦\n⎤\n⎢\n⎣\n⎡\n-\n-\n⊗\n⎥\n⎦\n⎤\n⎢\n⎣\n⎡\n=\nΛ\n\n(1-23)\n\nThis is the form of the RGA for a 2×2 system. What it tells depends on the numerical values for\npij, which (of course) depend on the particular process being modeled.\n\nour shower process is a 2×2 system, so substitute the elements from Pm\n* into the form\n\n⎥\n⎥\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎢\n⎢\n⎣\n⎡\n-\n-\n-\n-\n-\n-\n-\n-\n=\n-\n∆\n∆\n∆\n∆\n-\n-\n∆\n∆\n∆\n∆\n⎥\n⎥\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎢\n⎢\n⎣\n⎡\n-\n∆\n∆\n∆\n∆\n-\n∆\n∆\n∆\n∆\n-\n-\n∆\n∆\n∆\n∆\n-\n-\n∆\n∆\n∆\n∆\n=\nΛ\ncr\nhr\ncr\nr\ncr\nhr\nr\nhr\ncr\nhr\nr\nhr\ncr\nhr\ncr\nr\nr\nr\nhr\nc\nh\nr\nr\ncr\nc\nh\nr\nr\ncr\nc\nh\nr\nr\nhr\nc\nh\nr\nr\nhr\nc\nh\nr\nr\ncr\nc\nh\nT\nT\nT\nT\nT\nT\nT\nT\nT\nT\nT\nT\nT\nT\nT\nT\n\nF\nT\nT\nF\nF\nT\nF\nF\nT\nT\nT\nF\nF\nF\nF\nT\nT\nT\nF\nF\nF\nF\nT\nT\nF\nF\nT\nF\nF\nT\nT\nF\nF\nT\nF\nF\nT\nT\nT\nF\nF\nF\n(1-24)\n\nWe find\n\n- Each element has a value between 0 and 1, depending on how Tr falls between Tcr and\nThr.\n- All of the scaling factors divided out - the RGA is inherently dimensionless (recall its\ndefinition as a ratio). This is why the * scaling marker was omitted from the foregoing\nmatrix manipulations of the 2×2 RGA.\n\nWe can use the M&EB at the reference condition (1-9)\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 1: Analyzing the Shower Process\nrevised 2004 Dec 16\n\ncr\nhr\ncr\ncr\nhr\nhr\nr\ncr\nhr\nr\nF\nF\nT\nF\nT\nF\nT\nF\nF\nF\n+\n+\n=\n+\n=\n\nto express the RGA elements (1-24) in terms of the manipulated variables\n\nγ\n-\n=\n=\n-\n-\nγ\n=\n=\n-\n-\nF\nF\nT\nT\nT\nT\nF\nF\nT\nT\nT\nT\nr\ncr\ncr\nhr\nr\nhr\nr\nhr\ncr\nhr\ncr\nr\n\n(1-25)\n\nwhere we have defined γ as the fraction of the flow that is from the hot water supply. The RGA\nthen becomes\n\n⎥\n⎦\n⎤\n⎢\n⎣\n⎡\nγ\nγ\n-\nγ\n-\nγ\n=\nΛ\n)\nT\n(\n)\nF\n(\n)\nF\n(\n\n)\nF\n(\n\nc\nh\n\n(1-26)\n\nremember that our question is which way to pair CV with MV\nWe have two choices:\n\n(1) manipulate hot water flow to control total flow, and adjust temperature by manipulating cold\nwater.\n\n⎥\n⎦\n⎤\n⎢\n⎣\n⎡\nγ\nγ\n-\nγ\n-\nγ\n=\nΛ\n)\nT\n(\n)\nF\n(\n)\nF\n(\n\n)\nF\n(\n\nc\nh\n⎥\n⎦\n⎤\n⎢\n⎣\n⎡\nγ\nγ\n-\nγ\n-\nγ\n=\nΛ\n)\nT\n(\n)\nF\n(\n)\nF\n(\n\n)\nF\n(\n\nc\nh\n\n(1-27)\n\n(2) manipulate cold water to control total flow, and adjust temperature by manipulating hot\nwater.\n\n⎥\n⎦\n⎤\n⎢\n⎣\n⎡\nγ\nγ\n-\nγ\n-\nγ\n=\nΛ\n)\nT\n(\n)\nF\n(\n)\nF\n(\n\n)\nF\n(\n\nc\nh\n⎥\n⎦\n⎤\n⎢\n⎣\n⎡\nγ\nγ\n-\nγ\n-\nγ\n=\nΛ\n)\nT\n(\n)\nF\n(\n)\nF\n(\n\n)\nF\n(\n\nc\nh\n\n(1-28)\n\nWe want pairings that have RGA elements close to 1. Therefore, if we use mostly hot water in\nthe mix (Fr is mostly Fhr), then γ ~ 1 and we should choose pairing (1). Should conditions be\nopposite, we should use pairing (2). As γ approaches 0.5, neither pairing would be preferred,\nand either would result in significant interaction between the control loops.\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 1: Analyzing the Shower Process\nrevised 2004 Dec 16\n\nwe introduce the Disturbance Cost to see if our manipulated variables are strong enough\nAfter we have used the RGA to guide our deployment of MV, we must confirm that they are\nstrong enough to do the job. Recall the approximate linear model of our system:\n\n*'\nd\n*\nd\n*'\nm\n*\nm\n*'\nx\nP\nx\nP\ny\n+\n=\n\n(1-29)\n\nIf control is perfect, all CV will remain at set point, regardless of how the disturbances xd\n*′ vary.\nthen y′ = 0. Substituting into (1-29)\n\n*'\nd\n*\nd\n*'\npc\n,\nm\n*\nm\nx\nP\nx\nP\n+\n=\n\n(1-30)\n\nAchieving perfect control requires that the manipulated variables adjust to values xm,pc\n*′ that\ncompensate for xd\n*′. This manipulative action must satisfy the governing material and energy\nbalances, so that\n\n*'\nd\n*\nd\n*\nm\n*'\npc\n,\nm\nx\nP\nP\nx\n-\n-\n=\n\n(1-31)\n\nIf we view the change of a manipulated variable as the 'cost' of responding to a disturbance, we\ncan summarize the overall 'cost' of perfect control by calculating the norm, or magnitude, of the\nxm,pc\n*′ vector. Lewin (in (3)) calls it the Disturbance Cost (DC).\n\n(\n)\n*'\npc\n,\nm\nx\nnorm\nDC =\n\n(1-32)\n\nthe standard caution about believing too much in fancy-looking math\nWe recognize that the linear model is accurate only near the reference point, so that\ncomputations in which disturbance and manipulated variables are pushed to their maximum\ndeviations are unreliable as quantitative measures. However, for screening candidates during\npreliminary design, the DC offers an indication of controllability that may be sufficient to\nidentify problems for further examination. That is, if we do not like xm,pc\n*′, we must reexamine\nour assumptions about xd\n*′, reevaluate the scaling ranges we used for xm\n*′, or alter the process\n(Pm\n* and Pd\n*).\n\nwe derive DC for our shower example, obtaining an analytic expression\nTo express DC for the shower, we must invert Pm\n* and multiply it by Pd\n*.\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 1: Analyzing the Shower Process\nrevised 2004 Dec 16\n\n⎥\n⎥\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎢\n⎢\n⎣\n⎡\n∆\n∆\n-\n-\n∆\n∆\n-\n-\n∆\n∆\n-\n∆\n∆\n-\n=\n⎥\n⎥\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎢\n⎢\n⎣\n⎡\n∆\n∆\n∆\n∆\n⎥\n⎥\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎢\n⎢\n⎣\n⎡\n∆\n∆\n-\n-\n∆\n∆\n-\n-\n∆\n∆\n-\n∆\n∆\n-\n-\n=\n-\nc\nc\ncr\nhr\ncr\nc\nh\ncr\nhr\nhr\nh\nc\ncr\nhr\ncr\nh\nh\ncr\nhr\nhr\nc\nr\ncr\nh\nr\nhr\nc\ncr\nhr\nr\nc\ncr\nhr\nr\nhr\nh\ncr\nhr\nr\nh\ncr\nhr\ncr\nr\n*\nd\n*\nm\nF\nT\nT\nT\nF\nF\nT\nT\nT\nF\nF\nT\nT\nT\nF\nF\nT\nT\nT\nF\n\nT\nT\nF\nF\nT\nT\nF\nF\nF\nT\nT\nT\nF\nF\nF\nT\nT\nT\nT\nF\nT\nT\nT\nF\nF\nF\nT\nT\nT\nT\nP\nP\n\n(1-33)\n\nThen\n\n⎥\n⎥\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎢\n⎢\n⎣\n⎡\n∆\n∆\n-\n-\n∆\n+\n∆\n=\n⎥\n⎦\n⎤\n⎢\n⎣\n⎡\n=\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎣\n⎡\n-\nc\nh\ncr\nhr\n*'\nc\nc\ncr\n*'\nh\nh\nhr\n*'\nc\n*'\nh\n*\nd\n*\nm\n*'\npc\n,c\n*'\npc\n,\nh\nF\nF\nT\nT\nT\nT\nF\nT\nT\nF\n\nT\nT\nP\nP\nF\nF\n\n(1-34)\n\nTo obtain DC, we take the norm of this vector.\n\nc\nh\ncr\nhr\n*'\nc\nc\ncr\n*'\nh\nh\nhr\n*'\npc\n,c\n*'\npc\n,\nh\nF\nF\nT\nT\nT\nT\nF\nT\nT\nF\nF\nF\nnorm\nDC\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n∆\n+\n∆\n-\n∆\n+\n∆\n=\n⎟\n⎟\n⎠\n⎞\n⎜\n⎜\n⎝\n⎛\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎣\n⎡\n=\n\n(1-35)\n\nDC tells us which disturbance conditions are the worst\nDC is a function of the disturbance input. We can see from (1-35) that the largest DC occurs\nwhen both cold and hot inlet temperatures change in the same direction. In such a case, the\ntemperature controller must counter a change in temperature by using a stream whose\ntemperature has changed in the direction of the disturbance. By contrast, opposite-direction\ntemperature changes are self-compensating and therefore not as costly to mitigate.\n\nIt is useful to compute DC over the domain of possible disturbances. For illustration, we can\nassume that the reference value is in the middle of the operating range for each disturbance\nvariable, such that each scaled deviation variable varies between -0.5 and 0.5. Presuming that\nthe disturbance variables may change independently, we should examine the extremes in all\ncombinations. (In an actual design, the reference values and operating ranges may not lead to\nthis symmetric domain.)\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 1: Analyzing the Shower Process\nrevised 2004 Dec 16\n\n0.5\n-0.5\nTc\n*'\nTh\n*'\n0.5\n-0.5\nTc\n*'\nTh\n*'\n\nFor plotting the effects of two disturbance variables, we can summarize the two variables by\ntheir direction angle. In the figure, the points are spaced at 45° intervals. From the expression\nfor DC, we compute:\n\ndisturbance\ndirection\n(°)\nTh\n*'\nTc\n*'\nDC\n0.5\n(\n)\nh\nhr T\nF\nB\n5.0\n∆\n\n0.5\n0.5\n(\n)\nc\ncr\nh\nhr\nT\nF\nT\nF\nB\n5.0\n∆\n+\n∆\n\n0.5\n(\n)\nc\ncr T\nF\nB\n5.0\n∆\n\n-0.5\n0.5\n(\n)\nc\ncr\nh\nhr\nT\nF\nT\nF\nB\n5.0\n∆\n+\n∆\n-\n\nand so forth. The constant B is\n\nc\nh\ncr\nhr\nF\nF\nT\nT\nB\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n∆\n+\n∆\n-\n=\n\n(1-36)\n\nAs we surmised from examining the DC expression, the largest DC occurs at 45 and 225°.\n\nwe examine whether our MV are up to the job\nDC tells us which combinations of disturbances require the largest adjustment of manipulated\nvariables. At these conditions, we should examine just how large this adjustment is. For\nexample, at 45°, the scaled cold flow manipulation from (1-34) is\n\n(\n)\n(\n)\nc\ncr\nhr\nc\ncr\nh\nhr\n*'\npc\n,c\nF\nT\nT\nT\nF\nT\nF\n5.0\nF\n∆\n-\n∆\n+\n∆\n=\n\n(1-37)\n\nThat is, we must increase the cold flow. To see how much flow is required, we write the flow in\nphysical terms\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 1: Analyzing the Shower Process\nrevised 2004 Dec 16\n\nc\n*'\npc\n,c\ncr\npc\n,c\nF\nF\nF\nF\n∆\n+\n=\n\n(1-38)\n\nand substituting for the scaled deviation variable, we find\n\n(\n)\n(\n)\ncr\nhr\nc\ncr\nh\nhr\ncr\npc\n,c\nT\nT\nT\nF\nT\nF\n5.0\nF\nF\n-\n∆\n+\n∆\n+\n=\n\n(1-39)\n\nIf this value exceeds the value Fc.max we had used in scaling Fc, we cannot overcome the 45°\ndisturbance conditions with our present design. (At least, according to the linear system\napproximation to our original model, which is itself an approximation to the physical operation.\nWe should pay attention to our models, but not believe them beyond their worth.)\n\nDC doesn't depend on the pairing of CV and MV\nDC is a consequence of the process model, that is, the dependence of the output variables on the\ndisturbance and manipulated inputs. It assumes nothing about the way that control is actually\nconducted; it does assume that control has been effective, so that a disturbance input has been\ncompensated by a manipulated variable input to return the output to set point at steady state.\nActually designing the controllers to do this is another topic.\n\nreferences\n(1) T. Marlin, Process Control, 2nd ed., McGraw-Hill, 2000.\n(2) T. McAvoy, Interaction Analysis, Instrument Society of America, 1983.\n(3) W. Seider, J. Seader, and D. Lewin, Product and Process Design Principles, 2nd ed,\nWylie, 2004.\n\nnomenclature\nCp\nliquid specific heat\nf\na nonlinear function of several independent variables\nF\nvolumetric flow rate\nPd\nmatrix of gain coefficients for the disturbance variables\nPm\nmatrix of gain coefficients for the manipulated variables\nT\ntemperature\nTref\nthermodynamic reference temperature for enthalpy\nV\nvolume of the piping system\nx1, x2 independent variables\nxd\nvector of input variables into the system, the disturbance variables\nxm\nvector of input variables into the system, the manipulated variables\ny\nvector of output variables from the system, the controlled variables\nγ\nratio of hot supply reference flow to total reference flow\nλ\nelement in the relative gain array\nΛ\nthe relative gain array matrix\nρ\nliquid density\n\nabbreviations\nCV\n\"controlled variable\", a system output that we wish to maintain at a set point value\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 1: Analyzing the Shower Process\nrevised 2004 Dec 16\n\nDC\n\"disturbance cost\"\nDV\n\"disturbance variable\", a system input that we have no influence over\nMV\n\"manipulated variable\", a system input that we may adjust for our purposes\nRGA \"relative gain array\"\n\nsubscripts\nc\ncold water supply stream\nh\nhot water supply stream\nmax\nmaximum value of a variable\nmin\nminimum value of a variable\npc\nperfect control has been exerted on CV\nr\na reference operating condition around which we derive a linear approximation\n\nsuperscripts\n′\nindicates a deviation variable; i.e., the physical variable minus a reference value\n*\nindicates a scaled variable; i.e., variable has been divided by its operating range"
    },
    {
      "category": "Resource",
      "title": "notes_1a_matrix.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-492-1-integrated-chemical-engineering-topics-i-process-control-by-design-fall-2004/082927487868bfca8ffeddf095883ee2_notes_1a_matrix.pdf",
      "content": "Fall 2004\nICE Topics: Process Control by Design\n10.492\nLecture Notes 1a: Brief Guide to Matrices\nwhat meaneth we by matrix?\nA matrix is a 2-dimensional array of things, where these things can be numbers, variables, or\nmath expressions. The matrix is navigated by rows and columns, and we always name the row\nfirst when locating any particular element of the matrix. When presenting matrices, we double-\nunderline the summary name A of the matrix, corral the elements in braces, and provide row-\ncolumn subscripts to locate individual elements. (Regard aij as the name for some quantity of\ninterest - number, variable, expression.)\n⎡\n⎤\na11\na12\na13 a14\n⎢\n⎢\n⎢⎣\n⎥\n⎥\n⎥⎦\nA\na\na 21\na 22\na 23 a 24\na32\na33 a34\nMatlab indicates an element by putting subscripts in parentheses after the matrix name\n>> a = [ 1 2 ; 3 4 ]\na =\n>> a(1,2)\nans =\n=\nA row matrix is a single row, and a column matrix a single column; we collectively call these 1\ndimensional matrices \"vectors\". We use a single underline for the name. We could still use\ndouble R,C subscripts, but I don't think most people bother with that.\n⎡\n⎡\n⎤\n⎤\nx\nx\n⎢\n⎢\n⎢⎣\n⎢\n⎢\n⎢⎣\n=\n⎥\n⎥\n⎥⎦\n⎥\n⎥\n⎥⎦\ny = y11\n[\ny12\ny13] = [y1\n3]\nx =\ny\ny\nx\nx\nx\nx\nIn matlab, use the semicolon to make a row shift.\n>> y = [ 1 2 3 ]\ny =\n>> x = [1; 2; 3 ]\nx =\nrevised 2004 Dec 17\nDr. Barry S. Johnston, Copyright 2004.\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\nLecture Notes 1a: Brief Guide to Matrices\ncombining a matrix with a scalar quantity\na12 ⎤= ⎡ ca11\nca12 ⎤\nA\nc = c\nA = c ⎡\n⎢\na11\n⎥\n⎢\n⎥\nca21\n⎣ a 21\na 22 ⎦\n⎣\nca22 ⎦\n⎡ c + a11\nc + a12 ⎤\n⎡ a11\na12 ⎤\nc + A = A + c = c + ⎢\n=\n⎥\n⎢\n⎥\nc + a 21\nc + a 22 ⎦\n⎣ a 21\na 22 ⎦\n⎣\nadding two matrices (they must be of the same shape)\n⎡ a11\na12 ⎤\n⎡ b11\nb12 ⎤\n⎡ a11 + b11\na12 + b12 ⎤\nA + B = B + A = ⎢\n=\n⎥+ ⎢\n⎥\n⎢\n⎣ a 21\na 22 ⎦\n⎣ b21\nb22 ⎦\n⎣ a 21 + b21\na 22 + b22 ⎥⎦\nthe transpose of a matrix is another matrix; rows and columns are interchanged\nT\nT\n⎡ x1 ⎤\n⎡ a11\na12 ⎤\n⎡ a11\na 21\na31 ⎤\nx\nT = ⎢ x 2 ⎥\n⎥ = [ x1\nx2\nx3 ]\nA\nT = ⎢\n⎢ a 21\na 22 ⎥\n⎥ = ⎢\n⎢\n⎥\n⎢ x3 ⎦⎥\n⎢ a31\na32 ⎦⎥\n⎣ a12\na 22\na32 ⎦\n⎣\n⎣\n(Notice in this last example that the subscripts are not to be interpreted merely as placeholders,\nbut as identifying a particular element. That is, a31 means \"the actual quantity that was in\nposition (3,1) in matrix A, but is in position (1,3) in matrix AT.)\nIn matlab, compute the transpose by a single quote after the matrix name\na =\n>> a'\nans =\nmultiplying matrices is where things get more complicated\nThe \"inner dimensions\" must be the same for multiplication to be possible. Multiplication is not\ncommutative.\n⎡ x1 ⎤\ny\nx 1\n2 ⎤\n][\ny\nx =\n⎥[ y\ny ]= ⎡\n⎢\ny\nx\n⎥\n[\n,1\n2,1\n]→[ 2\n,2 ]\n⎢\ny\nx\ny\nx\n⎣ x2 ⎦\n⎣ 2\n2 ⎦\ny ]⎡\n⎢\nx1 ⎤ =\ny\nx\n+\ny\nx\n][\nx\ny = [ y1\n⎥\n[\n2,1\n,1\n]→[ 1,1 ]= scalar\n⎣ x2 ⎦\nrevised 2004 Dec 17\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\nLecture Notes 1a: Brief Guide to Matrices\nb11\nb12\nb11\nb\na b12\nb\nB\nA\n= ⎡\n⎢⎣\n⎡\n⎢⎣\n⎤\n⎥⎦\n⎡\n⎢⎣\n=\n⎤\n⎥⎦\n⎤\n⎥⎦\n+\n+\na\na\na\na\na\n12 21\n12 22\nb\nb\nb11\nb\na b12\nb\n+\n+\na\na\na\na\na\n22 21\n22 22\nb11\nb12\nb11\nb12\na b11\nb12\n⎡\n⎢⎣\n⎡\n⎢⎣\n⎤\n⎥⎦\n⎡\n⎢⎣\n=\n⎤\n⎥⎦\n⎤\n⎥⎦\n+\n+\na\na\na\na\na\nA\nB\nMatlab uses * to indicate matrix multiplication\na =\nb =\n>> a*b\nans =\n>> b*a\nans =\n= b\nb\nb\nb\na b\nb\n+\n+\na\na\na\na\na\n11 21\n21 22\n12 21\n22 22\nelement-by-element multiplication is only for same-shape matrices\nb11\nb12\nb11\na b12\n⎡\n⎢⎣\n⎡\n⎢⎣\n⎤\n⎥⎦\n⎡\n⎢⎣\n=\n⎤\n⎥⎦\n⎤\n⎥⎦\na\na\na\nA\nMatlab uses .* to indicate element by element multiplication\n>> a.*b\nans =\n⊗ B B⊗ A\n=\n=\nb\nb\nb\na b\na\na\na\n21 21\n22 22\nthe determinant is a scalar quantity computed from the elements of a square matrix\nFor a 2×2 matrix, the determinant is the difference of two products. The products are taken\nalong diagonals in the matrix: positive for the diagonal that slopes down to the right, and\nnegative for that sloping down to the left.\na\na\na\na\na\na\na\na\n( )\nA\ndet\n= A = a11a\n- a a\n12 21\n-\n+\nrevised 2004 Dec 17\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\nLecture Notes 1a: Brief Guide to Matrices\nFor a 3×3 matrix, the determinant requires six products. The diagonal rule is extended: positive\nfor the three diagonals that slope down to the right, and negative for those sloping down to the\nleft.\na\na\na\na\na\na\na\na\na\na\na\na\na\na\na\n=\na\na\na\na\na\na\na\na\na\na\na\na\na\na\na\n=\n( A\ndet )= A\n+ a12a\n= a11a 22a33\n23a31 + a13a 21a32\nA\n-a13a 22a31 -a11a 23a32 -a12a 21a33\n-\n+\nFor larger determinants, the diagonal rule does not work; we will not go into these, however.\nMatlab\nd =\n>> det(d)\nans =\nthe cofactor is a sub-determinant pulled from a larger determinant\nTake any element aij; delete row i and column j. The remaining determinant, when multiplied by\n(-1)i+j, is the cofactor of aij. For example, the cofactor of a21 in a 3×3 determinant is\na\na\na\n\na\nA = =\n\na\n\na\n\na\n\na\n\na\n2 a12\na13\n-\n+\n(\n)\na\n= -(a12a33 -a13a32 )\na33\n(In this example, the subscripts are not mere placeholders, but refer to those particular elements\nof a 3×3 determinant that were extracted into the cofactor.)\nthe adjoint is a transposed square matrix of cofactors\nEach matrix element is replaced by its cofactor, and then the new matrix is transposed.\nrevised 2004 Dec 17\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\nLecture Notes 1a: Brief Guide to Matrices\nT\n( )=\nA\nadj\n⎜\n⎜\n⎜\n⎝\n⎛\n⎢\n⎢\n⎢\n⎣\n⎡\na\na\na\nadj\na\na\na\n⎟\n⎟\n⎟\n⎠\n⎞\n⎥\n⎥\n⎥\n⎦\n⎤\na\na\na\n=\n⎢\n⎢\n⎢\n⎢\n⎢\n⎢\n⎢\n⎣\n⎡\n-\na\na\na\na\na\na\na\na\na\na\na\na\n-\n-\na\na\na\na\na\na\na\na\na\na\na\na\n-\na\na\na\na\na\na\na\na\na\na\na\na\n⎥\n⎥\n⎥\n⎥\n⎥\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎡\na\na\na\na\n-\na\na\na\na\na\na\na\na\n⎥\n⎥\n⎤\n=\n⎢\n⎢\n⎢-\na\na\na\na\na\na\na\na\n-\na\na\na\na\n⎥\n⎥\n⎥\n⎢\n⎢\n⎣\na\na\na\na\n-\na\na\na\na\na\na\na\na\n⎥\n⎥\n⎦\nthe inverse is the adjoint divided by the determinant\n( )\nA\ninv\n= A\n- =\n( )\n( )\nA\ndet\nA\nadj\nWe care about the inverse, because\n⎡1 0\n⎤\n-\nA\nA\n⎢\n⎢\n⎢\n=\n=\n=\n-\nI\nA\nA\nO\n⎥\n⎥\n⎥\nM\n⎢\n⎣0 0 L\n⎥\n⎦\nI is the identity matrix; any matrix A multiplied by (suitably sized) I is just A.\nrevised 2004 Dec 17\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\nLecture Notes 1a: Brief Guide to Matrices\nMatlab\n>> d, inv(d)\nd =\nans =\n-1.3333\n1.0000\n-0.3333\n0.5000\n-0.5000\n0.5000\n0.6667\n-0.3333\n>> d*inv(d)\nans =\n1.0000\n0.0000\n0.0000\n1.0000\n0.0000\n-0.0000\n1.0000\nthe inverse allows us to solve matrix equations\nSolve for x; the order of multiplication is important in the following steps.\nA\nx\nA = b\n-1\n-1 )\nx\nA = A\n-1b\n(\nA\nb\nnot\nx\nI = A\n-1b\nx = A\n-1b\nThe inverse is not always computationally efficient. In Matlab, an alternative is \"left division\", \\.\na =\nb =\n>> x=inv(a)*b\nx =\n-1.0000\n1.5000\n>> x=a\\b\n% alternative to inverse; order still matters!\nx =\n-1.0000\n1.5000\nrevised 2004 Dec 17"
    },
    {
      "category": "Resource",
      "title": "notes_2_simulatn.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-492-1-integrated-chemical-engineering-topics-i-process-control-by-design-fall-2004/09339e95f89797a6d374cf59bf475f68_notes_2_simulatn.pdf",
      "content": "Fall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 2: Simulating the Shower Process\nrevised 2004 Dec 16\nDr. Barry S. Johnston, Copyright 2004. 1\n\nthe shower process is simple enough that we can simulate its operation\nOver the past decade our tools for simulating processes have greatly improved. In particular, we\ncan predict how the process will behave under dynamic conditions: startup, disturbance, and\nshutdown. Dynamic simulation can aid in specifying the control scheme and may catch potential\noperating problems.\n\nFor the shower, we do not need a complex computer code - we can derive and solve a decent\nequation set by hand. We will do this simulation to illustrate\n- a simple control algorithm\n- how the process behavior was indicated by the RGA and DC tools\n\nSimulation thus allows us to check the efficacy of our screening tools.\n\nfirst we need to talk some more about process control\nRecall how we defined feedback control: measurement of CV used to motivate a change in MV\nto keep CV at set point. To put this into practice, we must assert some control algorithm, that is,\na way to calculate how much to move MV. We begin by defining error:\n\n)t(\nCV\nSP\n)t(\n-\n=\nε\n\n(2-1)\n\nError is the difference between the desired value of CV, called the set point SP, and CV. Of\ncourse, CV might wander around with passing time, and so error would, as well. If CV is at the\nset point, the error is zero; should CV be disturbed, the error might be positive or negative. The\nerror is the input to the control algorithm.\n\nthe simple Proportional algorithm for a controller\nAn intuitively appealing algorithm is to make the response proportional to the error.\n\n)t(\nK\nB\n)t(\nMV\nC\nC\nε\n+\n=\n\n(2-2)\n\nMV\nthe manipulated variable, which may vary in time\nBC\nthe value of MV when error is zero; known as the bias\nKC\nadjustable controller gain (+ or -)\n\nwe apply the proportional controller to our process\nStart with flow control. Call the set point Fsp. Then the error in the flow is\n\n'\n'\nsp\nr\nr\nsp\nsp\nF\nF\nF\n\nF\nF\nF\nF\n\nF\nF\n-\n=\n+\n-\n-\n=\n-\n=\nε\n\n(2-3)\n\nBy introducing our reference value Fr into the definition, we see that the error is also the\ndifference between two deviation variables. In many cases, of course, we would take the set\npoint value Fsp to be the same as our reference value, so that Fsp\n′ is identically zero. However,\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 2: Simulating the Shower Process\nrevised 2004 Dec 16\n\ndistinguishing Fsp from Fr allows us to easily describe set point changes - that is, moving the\nprocess from one condition to another under the supervision of the controller.\n\nthe error can be scaled\nWhen we divide the error by the operating range for flow, we obtain a dimensionless error.\n\n*'\n*'\nsp\nF\n*\nF\nF\nF\nF\n-\n=\n∆\nε\n=\nε\n\n(2-4)\n\nIf we pair CV flow and MV hot water, the controller algorithm (2-2) is now written in these\ndimensionless terms.\n\n*\nF\n*\nCF\n*'\nh\nK\nF\nε\n=\n\n(2-5)\n\nFh\n*'\nthe scaled deviation hot water flow\nKCF\n*\ndimensionless gain (+, so that an increase in F will decrease Fh)\n\nThe magnitude of the gain KCF\n* may be increased to provide more aggressive controller action.\nFor example, a gain of 1 means that a 10% error will motivate a 10% change in manipulated\nvariable. Increasing the gain to 2 produces a 20% change in MV. Notice that the bias in (2-2)\nhas been absorbed into the deviation variables. When error εF\n* is zero, no change is made to Fh,\nso Fh\n*′ is zero.\n\nwe treat the temperature controller the same way\nWe will control T by manipulating the cold water flow.\n\n*'\n*'\nsp\nT\n*\nT\nT\nT\nT\n-\n=\n∆\nε\n=\nε\n\n(2-6)\n\n*\nT\n*\nCT\n*'\nc\nK\nF\nε\n=\n\n(2-7)\n\nIn contrast to the flow controller, KCT\n* should be negative, so that the controller will respond to\nan increase in temperature (εT\n* < 0) by increasing the cold flow Fc.\n\nwhat is a controller anyway?\nThe controller is some device that receives the error input and puts out a direction to the\nmanipulated variable. Often, it is a computer that runs a control program; the program computes\nthe MV value at frequent intervals, and the resulting number is transmitted to a transducer that\nmoves a valve stem. The controller can instead be a mechanical device - a common example is\nthe lever mechanism in the flush toilet. Whatever the hardware, its job is to execute the\nalgorithm, and if the device and the math are reasonably close, we can describe its behavior\nmathematically.\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 2: Simulating the Shower Process\nrevised 2004 Dec 16\n\nthe control algorithm becomes part of the math model of the system\nWe have a linear system model of the shower, and we propose to install controllers. Thus the\ncontroller equations (2-5) and (2-7) must be introduced into the M&EB equations. They\neliminate the manipulated variables, resulting in\n\n(\n)\n(\n)\n*'\n*'\nsp\n*\nCT\nc\n*'\n*'\nsp\n*\nCF\nh\n*'\nT\nT\nK\nF\nF\nF\nF\nK\nF\nF\nF\n-\n∆\n∆\n+\n-\n∆\n∆\n=\n\n(2-8)\n\n(\n)\n(\n)\n*'\nc\nc\nr\ncr\n*'\nh\nh\nr\nhr\n*'\n*'\nsp\n*\nCT\nc\nr\nr\ncr\n*'\n*'\nsp\n*\nCF\nh\nr\nr\nhr\n*'\nT\nT\nT\nF\nF\nT\nT\nT\nF\nF\nT\nT\nK\nT\nF\nF\nT\nT\nF\nF\nK\nT\nF\nF\nT\nT\nT\n∆\n∆\n+\n∆\n∆\n+\n-\n∆\n∆\n⎥⎦\n⎤\n⎢⎣\n⎡\n-\n+\n-\n∆\n∆\n⎥⎦\n⎤\n⎢⎣\n⎡\n-\n=\n\n(2-9)\n\nNow we have some rearrangement to do: we must express these two equations so that the outputs\n(F*′ T*′) are functions of inputs (disturbances Th\n*′ Tc\n*′ and set points Fsp\n*′ Tsp\n*′). We can do this\nby\n- solving the MB (2-8) for F*′\n- substituting F*′ into the EB (2-9) and solving that for T*′\n- substituting T*′ back into the MB and solving again for F*′\n\nthe result isn't pretty\n\n(\n)\nD\nT\nK\nF\nF\nT\nT\nF\nF\nT\nK\nF\nF\nT\nT\nF\nF\nT\nK\nF\nF\nF\nT\nT\nK\nK\nF\nT\nF\nF\nF\nK\nF\nF\nF\n*'\nc\n*\nCT\nr\ncr\nc\nc\n*'\nh\n*\nCT\nr\nhr\nh\nc\n*'\nsp\n*\nCT\nc\n*'\nsp\nhr\ncr\n*\nCT\n*\nCF\nr\nh\nc\n*\nCF\nh\n*'\n⎪\n⎪\n⎭\n⎪\n⎪\n⎬\n⎫\n⎪\n⎪\n⎩\n⎪\n⎪\n⎨\n⎧\n⎥⎦\n⎤\n⎢⎣\n⎡\n∆\n∆\n∆\n∆\n-\n+\n⎥⎦\n⎤\n⎢⎣\n⎡\n∆\n∆\n∆\n∆\n-\n+\n⎥⎦\n⎤\n⎢⎣\n⎡\n∆\n∆\n+\n⎥⎦\n⎤\n⎢⎣\n⎡\n-\n∆\n∆\n∆\n∆\n+\n∆\n∆\n=\n\n(2-10)\n\nD\nT\nK\nF\nF\nF\nF\nT\nT\nT\nK\nF\nF\nF\nF\nT\nT\nT\nK\nK\nF\nT\nT\nT\nF\nF\nF\nK\nF\nT\nT\nT\nF\nF\nK\nF\nT\nT\nT\nF\nT\n*'\nc\n*\nCF\nh\nr\ncr\nc\n*'\nh\n*\nCF\nh\nr\nhr\nh\n*'\nsp\n*\nCT\n*\nCF\nr\nhr\ncr\nh\nc\n*\nCT\nr\nr\ncr\nc\n*'\nsp\n*\nCF\nr\nr\nhr\nh\n*'\n⎪\n⎪\n⎭\n⎪\n⎪\n⎬\n⎫\n⎪\n⎪\n⎩\n⎪\n⎪\n⎨\n⎧\n⎥⎦\n⎤\n⎢⎣\n⎡\n⎟\n⎠\n⎞\n⎜\n⎝\n⎛\n∆\n∆\n+\n∆\n∆\n+\n⎥⎦\n⎤\n⎢⎣\n⎡\n⎟\n⎠\n⎞\n⎜\n⎝\n⎛\n∆\n∆\n+\n∆\n∆\n+\n⎥⎦\n⎤\n⎢⎣\n⎡\n-\n∆\n∆\n∆\n∆\n+\n-\n∆\n∆\n+\n⎥⎦\n⎤\n⎢⎣\n⎡\n-\n∆\n∆\n=\n\n(2-11)\n\nwhere\n\n(\n)\n(\n)\nhr\ncr\n*\nCT\n*\nCF\nr\nh\nc\nr\ncr\n*\nCT\nr\nc\n*\nCF\nh\nT\nT\nK\nK\nF\nT\nF\nF\nF\nT\nT\nK\nF\nT\nF\nK\nF\nF\nD\n-\n∆\n∆\n∆\n∆\n+\n-\n∆\n∆\n+\n∆\n∆\n+\n=\n\n(2-12)\n\nthese equations represent a different system: the original piping plus controllers\nThat is why they are more complicated than our original M&EB. The first thing we notice,\nperhaps, is that temperature disturbances affect the flow rate! Of course, this is due to the\nfeedback structure, which begins turning valves when either the flow or temperature departs\nfrom set point. We notice, as well, that changing either set point affects both controlled\nvariables.\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 2: Simulating the Shower Process\nrevised 2004 Dec 16\n\nThese interactions may not in themselves be bad. However, looking at the equations in more\ndetail will show that a persistent change in either inlet temperature - such that Th\n*′ or Tc\n*′ remains\nnon-zero - will cause both F*′ and T*′ to remain non-zero. Thus our controllers are not satisfying\nour original operating objectives of keeping the shower at the set point!\n\nThis inability to return to set point is a property of proportional control; it is known as \"offset\".\nOffset also occurs for a change in set point: the controlled variables cannot attain the new desired\nvalues. Offset can be reduced by increasing the controller gain. It can be eliminated by a more\nsophisticated controller algorithm, but that is the subject of 10.450.\n\nThis is a good time to recall that our model regards all input changes as being immediately\ntransmitted to the output. Hence, equations (2-10) through (2-12) can describe a steady state, but\nthey also describe time-varying behavior, even though time does not appear explicitly.\n\nalways try out a complicated model on simple cases\nWe can learn more about our system by examining how the equations simplify for limiting\nconditions.\n\nno temperature control - turn KCT\n* down to zero (open the temperature loop)\nThe material balance (2-10) becomes\n\n*'\nsp\n*\nCF\nh\n*\nCF\nh\n*'\nF\nK\nF\nF\nK\nF\nF\nF\n∆\n∆\n+\n∆\n∆\n=\n\n(2-13)\n\nWithout the temperature controller, there is no mechanism for temperature disturbances to affect\nthe flow. A set point change will never be fully achieved (offset), but increasing the gain KCF\n*\nmakes the approach closer. The energy balance (2-11) becomes\n\n*'\nc\nr\ncr\nc\n*'\nh\nr\nhr\nh\n*'\nsp\n*\nCF\nh\n*\nCF\nr\nr\nhr\nh\n*'\nT\nF\nF\nT\nT\nT\nF\nF\nT\nT\nF\nK\nF\nF\nK\nF\nT\nT\nT\nF\nT\n∆\n∆\n+\n∆\n∆\n+\n∆\n∆\n+\n-\n∆\n∆\n=\n\n(2-14)\n\nTemperature disturbances affect the shower temperature without interference from the flow\ncontroller. A set point change in shower flow will affect the temperature by an amount that\nincreases with the controller gain. Hence, attempting to reduce flow offset will increasingly\ndisturb temperature.\n\nno flow control - turn KCF\n* down to zero (open the flow loop)\nThe balances become\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 2: Simulating the Shower Process\nrevised 2004 Dec 16\n\nD\nT\nK\nF\nF\nT\nT\nF\nF\nT\nK\nF\nF\nT\nT\nF\nF\nT\nK\nF\nF\nF\n*'\nc\n*\nCT\nr\ncr\nc\nc\n*'\nh\n*\nCT\nr\nhr\nh\nc\n*'\nsp\n*\nCT\nc\n*'\n⎭\n⎬\n⎫\n⎩\n⎨\n⎧\n⎥⎦\n⎤\n⎢⎣\n⎡\n∆\n∆\n∆\n∆\n-\n+\n⎥⎦\n⎤\n⎢⎣\n⎡\n∆\n∆\n∆\n∆\n-\n+\n⎥⎦\n⎤\n⎢⎣\n⎡\n∆\n∆\n=\n\n(2-15)\n\nD\nT\nF\nF\nT\nT\nT\nF\nF\nT\nT\nT\nK\nF\nT\nT\nT\nF\nT\n*'\nc\nr\ncr\nc\n*'\nh\nr\nhr\nh\n*'\nsp\n*\nCT\nr\nr\ncr\nc\n*'\n⎭\n⎬\n⎫\n⎩\n⎨\n⎧\n⎥⎦\n⎤\n⎢⎣\n⎡\n∆\n∆\n+\n⎥⎦\n⎤\n⎢⎣\n⎡\n∆\n∆\n+\n⎥⎦\n⎤\n⎢⎣\n⎡\n-\n∆\n∆\n=\n\n(2-16)\n\nwhere\n\n(\n)\nr\ncr\n*\nCT\nr\nc\nT\nT\nK\nF\nT\nF\nD\n-\n∆\n∆\n+\n=\n\n(2-17)\n\nAs controller gain is increased, the outlet temperature is less affected by inlet temperature\ndisturbances. Correspondingly, temperature set point changes are more faithfully followed.\nOnce again, however, increased gain means that the flow is increasingly affected by both\ndisturbances and temperature set point changes.\n\ndoes the simulation bear out our RGA predictions?\nThe RGA said that our hot-flow-to-flow and cold-flow-to-temperature pairings would be good if\nthe flow were mostly hot, and bad if the flow were mostly cold. Let's take the best case: the\noutlet flow at the reference condition is entirely composed of hot inlet flow. Thus\n\nF\nF\nF\ncr\nhr\nr\n=\n=\n\n(2-18)\n\nand\n\nhr\nr\nT\nT =\n\n(2-19)\n\nMaking these substitutions, we find\n\n*'\nh\n*\nCT\nr\nr\ncr\nc\n*\nCF\nh\n*\nCT\nh\nc\n*'\nsp\n*\nCT\nr\nr\ncr\nc\n*\nCF\nh\n*\nCT\nc\n*'\nsp\n*\nCF\nh\n*\nCF\nh\n*'\nT\nK\nF\nT\nT\nT\nF\nK\nF\nF\nK\nT\nT\nF\nF\n\nT\nK\nF\nT\nT\nT\nF\nK\nF\nF\nK\nF\nF\nF\nK\nF\nF\nK\nF\nF\nF\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n-\n∆\n∆\n+\n⎟⎠\n⎞\n⎜⎝\n⎛\n∆\n∆\n+\n∆\n∆\n∆\n∆\n-\n+\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n-\n∆\n∆\n+\n⎟⎠\n⎞\n⎜⎝\n⎛\n∆\n∆\n+\n∆\n∆\n+\n∆\n∆\n+\n∆\n∆\n=\n\n(2-20)\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 2: Simulating the Shower Process\nrevised 2004 Dec 16\n\n*'\nh\n*\nCT\nr\nr\ncr\nc\nh\n*'\nsp\n*\nCT\nr\nr\ncr\nc\n*\nCT\nr\nr\ncr\nc\n*'\nT\nK\nF\nT\nT\nT\nF\nT\nT\nT\nK\nF\nT\nT\nT\nF\nK\nF\nT\nT\nT\nF\nT\n-\n∆\n∆\n+\n∆\n∆\n+\n-\n∆\n∆\n+\n-\n∆\n∆\n=\n\n(2-21)\n\nThe flow (2-20) can be made to approach set point by increasing KCF\n*. Increasing KCF\n* also\nhelps to suppress the effects of temperature set point and disturbance changes on flow. The flow\ncontroller gain has no effect on the outlet temperature (2-21). Increasing KCT\n* improves\ntemperature set point response and suppresses the effect of disturbances.\n\nReducing loop interaction, as directed by the RGA results, certainly improves the control\nresponse! In this limiting case, we seem to be able to increase controller gains arbitrarily without\nill effect. If we are sufficiently curious, we can check out the opposite limiting case.\n\ndoes the simulation bear out our DC predictions?\nDC said that the most difficult disturbance combination to overcome was a change by both inlet\ntemperatures in the same direction. Of course, by using proportional control in our simulation,\nwe have allowed offset to occur in the controlled variables. By having offset, we violate the\nassumption of perfect control that we used to derive DC. Even so, we should be able to examine\nwhat the simulation predicts for disturbances. We assume that set points are unchanged, so that\nthe set point deviation variables are zero. From (2-10) through (2-12) the disturbance responses\nare\n\nD\nT\nK\nF\nF\nT\nT\nF\nF\nT\nK\nF\nF\nT\nT\nF\nF\nF\n*'\nc\n*\nCT\nr\ncr\nc\nc\n*'\nh\n*\nCT\nr\nhr\nh\nc\n*'\n⎭\n⎬\n⎫\n⎩\n⎨\n⎧\n⎥⎦\n⎤\n⎢⎣\n⎡\n∆\n∆\n∆\n∆\n-\n+\n⎥⎦\n⎤\n⎢⎣\n⎡\n∆\n∆\n∆\n∆\n-\n=\n\n(2-22)\n\nD\nT\nK\nF\nF\nF\nF\nT\nT\nT\nK\nF\nF\nF\nF\nT\nT\nT\n*'\nc\n*\nCF\nh\nr\ncr\nc\n*'\nh\n*\nCF\nh\nr\nhr\nh\n*'\n⎭\n⎬\n⎫\n⎩\n⎨\n⎧\n⎥⎦\n⎤\n⎢⎣\n⎡\n⎟\n⎠\n⎞\n⎜\n⎝\n⎛\n∆\n∆\n+\n∆\n∆\n+\n⎥⎦\n⎤\n⎢⎣\n⎡\n⎟\n⎠\n⎞\n⎜\n⎝\n⎛\n∆\n∆\n+\n∆\n∆\n=\n\n(2-23)\n\nwhere\n\n(\n)\n(\n)\nhr\ncr\n*\nCT\n*\nCF\nr\nh\nc\nr\ncr\n*\nCT\nr\nc\n*\nCF\nh\nT\nT\nK\nK\nF\nT\nF\nF\nF\nT\nT\nK\nF\nT\nF\nK\nF\nF\nD\n-\n∆\n∆\n∆\n∆\n+\n-\n∆\n∆\n+\n∆\n∆\n+\n=\n\n(2-24)\n\nIf Th\n*′ = Tc\n*′ (whether positive or negative)\n\n[\n]\ncr\nc\nhr\nh\n*'\nh\n*\nCT\nr\nc\n*'\nF\nT\nF\nT\nT\nD\nK\nF\nT\nF\nF\nF\n∆\n+\n∆\n∆\n∆\n∆\n-\n=\n\n(2-25)\n\n[\n]\ncr\nc\nhr\nh\n*'\nh\n*\nCF\nh\nr\n*'\nF\nT\nF\nT\nD\nT\nK\nF\nF\nF\nT\nT\n∆\n+\n∆\n⎟\n⎠\n⎞\n⎜\n⎝\n⎛\n∆\n∆\n+\n∆\n=\n\n(2-26)\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 2: Simulating the Shower Process\nrevised 2004 Dec 16\n\nIf Th\n*′ = -Tc\n*′\n\n[\n]\ncr\nc\nhr\nh\n*'\nh\n*\nCT\nr\nc\n*'\nF\nT\nF\nT\nT\nD\nK\nF\nT\nF\nF\nF\n∆\n-\n∆\n∆\n∆\n∆\n-\n=\n\n(2-27)\n\n[\n]\ncr\nc\nhr\nh\n*'\nh\n*\nCF\nh\nr\n*'\nF\nT\nF\nT\nD\nT\nK\nF\nF\nF\nT\nT\n∆\n-\n∆\n⎟\n⎠\n⎞\n⎜\n⎝\n⎛\n∆\n∆\n+\n∆\n=\n\n(2-28)\n\nFor the first case, in which disturbances move in the same direction, the term in brackets is\nlarger, which implies a larger offset in the controlled variables. Thus the case identified by DC\nas the most costly to mitigate also shows the worst control response.\n\nis there a best design to propose?\nThe real shower will have some degree of interaction between the loops, so that cavalier\nincreases in controller gain are to be avoided. Probably the easiest way to answer this question\n(when we are not at a limiting case) is to compute numerical predictions from the equations over\na domain of realistic conditions. Perhaps we can find gain settings that allow two controllers to\nmaintain conditions at better offsets than would either controller acting alone. The spreadsheet\nmodel \"shower controllability analysis.xls\" demonstrates these computations.\n\nlet's review what we have done, as a guide to designing a process\n- We began with a process scheme for a shower, which we sketched out as a process flow\ndiagram.\n- We made material and energy balances. This allowed us to compute steady state\nreference conditions.\n- Thinking about transients, we specified our control objectives.\n- We classified the variables into useful input and output categories. Specifically, we\nidentified controlled, manipulated, and disturbance variables.\n- We simplified the material and energy balances by Taylor series linearization. This\nallowed us to express our process behavior using a standard linear system form.\n\n*'\nd\n*\nd\n*'\nm\n*\nm\n*'\nx\nP\nx\nP\ny\n+\n=\n\n- Using the linear system, we computed the RGA to explore pairing of CV and MV.\n- We also computed DC to identify the most severe disturbance conditions.\n- Upon choosing a control algorithm, we added controller equations to the system model\nand computed the system response under control.\n\nfinal message\n- The next step would be the detailed design - pipe sizes, and so forth - which will be\nbeyond our scope. Of course, we could have gone straight to detailed design after\ncomputing the steady-state reference conditions. However, some transient screening\ntools applied in the early stages may save you from designing a fine-looking steady-state\nthat would be an operating disaster.\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 2: Simulating the Shower Process\nrevised 2004 Dec 16\n\n- Actually, the RGA has shown us that loop interaction will always be present for realistic\noperating conditions. Hence a better design would attack the interaction problem\ndirectly.\n\nFor example, we could redefine our manipulated variables. We add a total flow control\nvalve, directed by the flow measurement. Then we use a ratio controller to set hot and\ncold proportions. The controller algorithms are standard and non-specific to our\nparticular process. (Perhaps you have seen showers in which you set temperature by\nrotating a valve handle and set flow by adjusting the shower nozzle. There is usually\ninsignificant interaction between the two manipulations.)\n\nF T\nF\nT\nFh Th\nFc Tc\nR\nF T\nF\nT\nFh Th\nFc Tc\nR\nF\nT\nFh Th\nFc Tc\nR\n\nAlternatively, we could write a special-purpose controller algorithm (it would surely\ninclude material and energy balance equations!) that would accept two measurement\ninputs and compute two valve settings. Sometimes this extra effort in control design pays\noff in better process operation.\n\nF\nT\nFh Th\nFc Tc\nC\nF T\nF\nT\nFh Th\nFc Tc\nC\nF T\n\nThus we can do better than the simple two-loop control scheme we proposed in the\nbeginning. The RGA has allowed us to recognize this in the preliminary design stage,\nbefore we committed too much money on something that wouldn't work.\n\n- The shower is a simple system, so we could analyze the whole problem with math. We\nwill next go to a more complicated system for which analytic solutions are impractical,\neven if possible. However, we will follow the same design scheme, with the same\nintentions, even if we use different tools to get the job done.\n\nnomenclature\nBC\nbias; the value of MV when the controlled variable is at its set point\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 2: Simulating the Shower Process\nrevised 2004 Dec 16\n\nD\na constant denominator in several equations\nF\nvolumetric flow rate\nKC\ncontroller gain\nPd\nmatrix of gain coefficients for the disturbance variables\nPm\nmatrix of gain coefficients for the manipulated variables\nT\ntemperature\nxd\nvector of input variables into the system, the disturbance variables\nxm\nvector of input variables into the system, the manipulated variables\ny\nvector of output variables from the system, the controlled variables\n∆F\nthe range over which flow is expected to operate\n∆T\nthe range over which temperature is expected to operate\nε\nerror; the set point value minus the controlled variable value at any time\n\nabbreviations\nCV\n\"controlled variable\", a system output that we wish to maintain at a set point value\nDC\n\"disturbance cost\"\nDV\n\"disturbance variable\", a system input that we have no influence over\nMV\n\"manipulated variable\", a system input that we may adjust for our purposes\nRGA \"relative gain array\"\nSP\n\"set point\", the desired value of the controlled variable\n\nsubscripts\nc\ncold water supply stream\nF\npertaining to the flow controller\nh\nhot water supply stream\nr\na reference operating condition around which we derive a linear approximation\nsp\nset point value of controlled variable F or T\nT\npertaining to the temperature controller\n\nsuperscripts\n′\nindicates a deviation variable; i.e., the physical variable minus a reference value\n*\nindicates a scaled variable; i.e., variable has been divided by its operating range"
    },
    {
      "category": "Resource",
      "title": "notes_3_hx_ntwrk.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-492-1-integrated-chemical-engineering-topics-i-process-control-by-design-fall-2004/c17b8309d861c15d37b67fad8d91fbfe_notes_3_hx_ntwrk.pdf",
      "content": "Fall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 3: the Heat Exchanger Network for Heat Recovery\nrevised 2004 Dec 17\nDr. Barry S. Johnston, Copyright 2004.\n\nchemical plant designs use heat integration to reduce energy costs\nSuppose you have a hot process stream that needs cooling. Perhaps you could use a utility\nstream, such as cooling water. The energy transferred to the cooling water would then be\ndiscarded to the plant environment (via cooling tower or river discharge). Suppose, however,\nthat you have another process stream that needs heating. IF the desired enthalpy changes of the\ntwo process streams are similar, IF the temperature differences support practical heat transfer\nrates, IF there is no safety problem routing these streams through a common piece of equipment,\nIF the two streams are in reasonable proximity, etc., THEN it may pay to recover the energy of\nthe hot stream into the cold one, and thus save utility costs.\n\nsaving utility costs is good, but operation becomes more complicated\nWe have given up flexibility by tying two process streams together; it may be that starting up,\nshutting down, or performing maintenance will affect larger portions of the plant. Furthermore,\noperating disturbances that affect one process stream may now propagate into the other. More\ncomplicated plant structures motivate more sophisticated process control to cope with these new\nproblems.\n\nuse steady-state process simulators for flowsheet development\nCodes such as Aspen Plus, Chemcad, and Hysys are routinely used to develop chemical process\nflowsheets. They calculate the thermodynamic state of each stream in the flowsheet. These\nstream properties must, of course, satisfy the steady-state material and energy balances. To\ncomplete the calculations requires models for performance of the flowsheet equipment, as well\nas physical properties.\n\nWe will not use these tools in this module, but we will remain mindful of how they would be\nused. In what follows, therefore, we can anticipate (1) writing material and energy balances (2)\ndescribing the performance of equipment (3) using physical property data.\n\nwe present an example of heat integration and classify the variables\nConsider the following heat recovery network, based on an example presented by McAvoy (2):\n\nW1\nW2 T2\nT6\nT5\nT4\nT1\nT8\nT9\nT7\nE101\nE102\nE103\nW3 T3\nW1\nW2 T2\nT6\nT5\nT4\nT1\nT8\nT9\nT7\nE101\nE102\nE103\nW3 T3\n\nTo rationalize this example, imagine that we care about all the exit temperatures - this would be\nthe case if we were processing each stream separately in heat exchangers with utility streams.\nThus T6, T8, and T9 are classified as controlled variables (system outputs that we wish to\nmaintain at a target value). If the primary purpose of the network is to cool stream 1, then mass\nflow W1 and inlet temperature T1 are regarded as determined by another process; for our purpose\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 3: the Heat Exchanger Network for Heat Recovery\nrevised 2004 Dec 17\n\nthey are disturbance variables (system inputs that we must accept as they come). Similarly, T2\nand T3 are determined by the suppliers of these streams, so they are also disturbance variables.\n\nWe cannot exert control over the outlet temperatures unless we have some inputs to use as\nmanipulated variables; these must be W2 and W3. Why should W2 and W3 be ours to\nmanipulate and W1 not, if they are all received streams? Perhaps flows W2 and W3 are drawn\nfrom some larger supply, so that our calling for more or less of these streams at any time does\nnot badly affect either the source or the destination of these streams. (If we should not be\nmanipulating these streams, then we cannot expect to exert the control we desire on the outlet\ntemperatures, and we had better seek another heat integration scheme.)\n\nThere remain temperatures T4, T5, and T7, which cannot be directly manipulated, are not input\ndisturbances, but are not to be controlled. We classify these as intermediate variables - they\ndepend on inputs, and they either affect outputs or are themselves uncontrolled outputs of the\nsystem. Our shower process in Lecture Notes 1 and 2 was simple enough to have no\nintermediate variables, but we encounter them in most cases.\n\nwe write material and energy balances for steady-state operation\nWait. We have been talking about disturbances and control and changing stream flow rates -\nhow can we be content with a steady-state balance?\n\nAt this stage of design, we are simply not ready to quantify transient behavior. Our job is to\nspecify a suitable reference operating condition and size the heat exchangers appropriately, and\nthat requires a steady state description, such as we would have from a steady-state process\nsimulator. We will use the RGA (Relative Gain Array) and DC (Disturbance Cost) to examine\nthe merits of various control loops we might consider, and a steady-state model will be sufficient\nfor that.\n\nThe steady state material balances are true, but not informative, so we shall omit them. A\nsteady-state energy balance on the cold stream in a heat exchanger will be\n\n∫\n∫\n=\n+\nout\nref\nin\nref\nT\nT\np\nT\nT\np\ndT\nC\nW\nQ\ndT\nC\nW\n\n(3-1)\n\nThe enthalpy of the stream is calculated from a thermodynamic reference temperature Tref, and\nthe heat capacity Cp may vary with temperature. Q is the heat duty of the exchanger, supplied to\nstream W through the heat transfer surface. Combining the inlet and outlet streams,\n\n(\n)\nin\nout\np\nT\nT\np\nT\nT\nC\nW\n\ndT\nC\nW\nQ\nout\nin\n-\n=\n=\n∫\n\n(3-2)\n\nwhere the heat capacity has been averaged over the temperature interval. For our purposes\n(learning about operability screening tools to be used in preliminary-stage design) we will make\nmatters simple and assume that Cp does not vary with temperature.\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 3: the Heat Exchanger Network for Heat Recovery\nrevised 2004 Dec 17\n\nThus far we have energy balances and physical properties; we also need a performance model of\nthe heat exchanger. We will use\n\n(\n) (\n)\n(\n)\n(\n)\nin\n,\ncold\nout\n,\nhot\nout\n,\ncold\nin\n,\nhot\nin\n,\ncold\nout\n,\nhot\nout\n,\ncold\nin\n,\nhot\nT\nT\nT\nT\nln\nT\nT\nT\nT\nUA\nQ\n-\n-\n-\n-\n-\n=\n\n(3-3)\n\nin which we will neglect how the overall coefficient U varies with operating conditions.\n\nthe equations in summary\nHX101\n(\n) (\n)\n(\n)\n(\n)\np\np\np\np\nT\nT\nT\nT\nln\nT\nT\nT\nT\nA\nU\nQ\n\nwhere\nT\nC\nW\nQ\nT\nC\nW\nQ\nT\nC\nW\nT\nC\nW\n-\n-\n-\n-\n-\n=\n-\n+\n=\n+\n+\n-\n=\n\n(3-4)\n\nHX102\n(\n) (\n)\n(\n)\n(\n)\np\np\np\np\nT\nT\nT\nT\nln\nT\nT\nT\nT\nA\nU\nQ\n\nwhere\nT\nC\nW\nQ\nT\nC\nW\nQ\nT\nC\nW\nT\nC\nW\n-\n-\n-\n-\n-\n=\n-\n+\n=\n+\n+\n-\n=\n\n(3-5)\n\nHX103\n(\n) (\n)\n(\n)\n(\n)\np\np\np\np\nT\nT\nT\nT\nln\nT\nT\nT\nT\nA\nU\nQ\n\nwhere\nT\nC\nW\nQ\nT\nC\nW\nQ\nT\nC\nW\nT\nC\nW\n-\n-\n-\n-\n-\n=\n-\n+\n=\n+\n+\n-\n=\n\n(3-6)\n\nif we had been using a steady-state process simulator we would not see the equations\nStill, they would be something like those we have written. The temperature dependence of\nphysical properties would be accounted for, and perhaps the heat exchanger model would be\nmore elaborate, but they would feature the combination of the-energy-must-balance and how-\nthe-equipment-performs that we see above.\n\nremember, these are steady-state equations!\nIn writing balances for the shower process, we set the accumulation terms to zero because that\nwas a reasonable approximation to process behavior. Here, we have done no such thing - we\nhave set the accumulation terms to zero because we are looking only at steady state.\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 3: the Heat Exchanger Network for Heat Recovery\nrevised 2004 Dec 17\n\nHowever, steady-state does not mean static! Suppose we define a reference state for all the\nvariables. Of course these must satisfy the equation set. Then we change one of the inputs, say\ntemperature T1. For some period of time following, our equation set will not apply, because the\ndisturbance in T1 changes the accumulation of energy in the system and variables are changing in\ntime. Ultimately, however, we expect the system to settle down to a new steady state whose\nvariables are more or less different from the reference values, because of the effect of variable\nT1. This steady state would be described by (3-4) through (3-6).\n\nwe use the equations for the design case, in which our objective is to choose the areas\nWe want to find out how large the heat exchangers must be to operate at the reference condition,\nand what manipulated variable flow rates we should supply. This means we specify system\nparameters like Cp and U, pin down disturbance variables at their reference values, and specify\nthe output variables to describe the system performance that we want. Then we calculate the\nrequired heat exchanger areas and manipulated variables. Notice, however, that two of the\nintermediate variables must be specified, as well. Notice the subscript \"r\", which indicates the\nreference condition, or design case.\n\ndesign case\nspecify:\nCp1, Cp2, Cp3, U1, U2, U3\nW1r, T1r, T2r, T3r\nT4r, T5r, T6r, T8r, T9r\ncalculate:\nA1, A2, A3\nQ1r, Q2r, Q3r\nW2r, W3r, T7r\n\nwe use the equations for the rating case, in which our objective is to calculate outputs\nAfter arriving at a design, we are interested in how it operates under different conditions. Now\nthe heat exchanger areas are fixed; we specify all inputs and calculate intermediate and output\nvariables. In describing the rating case no subscript is used, because the flow and temperature\nvariables can take any value that satisfies the energy balance and performance equations.\n\nrating case\nspecify:\nCp1, Cp2, Cp3, U1, U2, U3\nA1, A2, A3\nW1, W2, W3, T1, T2, T3\ncalculate:\nQ1, Q2, Q3\nT4, T5, T6\nT7, T8, T9\n\nwe calculate either steady-state case by specifying 15 quantities and calculating 9\nIdeally, we would solve the 9 equations for the 9 unknowns. We can quickly eliminate the 3 heat\nduties, but we are then left with 6 nonlinear equations that are implicit in the temperatures. It is\nunlikely, therefore, that we will be able to isolate all desired unknown variables. Hence, our\ncalculation method will have to be iterative. We will consider two alternatives:\n\nIn the design case, we know most of the temperatures (because we are specifying both inlet and\noutlet conditions), which makes it straightforward to calculate the areas. Hence we can vary the\ntwo manipulated variables and other temperatures to seek a combination of areas that we like.\nAn example is given in \"HX network.xls\". It is important to represent all three heat exchangers\nin the spreadsheet, so that all equations are simultaneously satisfied.\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 3: the Heat Exchanger Network for Heat Recovery\nrevised 2004 Dec 17\n\nIn the rating case, we are seeking intermediate and outlet temperatures. We can arrange the 6\nnonlinear equations, which are implicit in our 6 unknown temperatures, to equal zero. We can\nthen use a numerical root-finding scheme to calculate the temperatures that satisfy the equations.\nWe will discuss root-finding in further detail below.\n\nIn summary, we can calculate steady-state performance as required, so that we can arrive at a\ndesign for our network. Next, we must consider if the network will be operable.\n\nbefore we proceed, recall what we learned from the shower process\nOur intention is to use RGA and DC to screen the heat exchanger network for potential\ncontrollability problems. Let us compare our plan with our experience from the shower:\n\nShower\nHX network\nCompute reference conditions from steady-state equations\nThe output variables T and F were\nexplicitly calculated from 1 linear and 1\nnonlinear equation.\nThe output variables are implicit within 6 nonlinear\nequations. An iteration scheme is necessary to\ncalculate the reference steady state. The result will\nbe numbers, not a mathematical expression that\nshows dependencies.\nClassify the variables\n2 CV, 2 DV, 2 MV.\nWith DV and MV specified, we have 2\nequations to calculate CV.\n3 CV (T6, T8, T9), 4 DV (W1, T1, T2, T3), 2 MV (W2,\nW3), and 3 IV - intermediate variables - (T4, T5, T7).\nWith DV and MV specified, we have 6 equations to\neliminate IV and calculate CV.\nDerive a linear system approximation to the equation set:\n'\nd\nd\n'\nm\nm\n'\nx\nP\nx\nP\ny\n+\n=\n( or if scaled,\n*'\nd\n*\nd\n*'\nm\n*\nm\n*'\nx\nP\nx\nP\ny\n+\n=\n)\nTaylor series used to obtain analytical\nexpressions for the elements in Pm and Pd.\nWe decline to exert the effort required to\ndifferentiate the 6 equations and solve for y'.\nInstead, we will calculate the elements in Pm and Pd\nby numerical differentiation. However, we will\nforego the insight that a mathematical expression\ncould convey.\nObtain RGA and DC from Pm and Pd.\nRGA and DC were mathematical\nexpressions, from which we could both\ninfer system behavior and calculate\nspecific cases.\nRGA and DC will be numbers. We must calculate\nvarious cases and hope to infer system behavior.\n\nwhat we gain and lose by these numerical approximations\nWe avoid all the algebra of writing Taylor series, but we get only a matrix of numbers. With the\nanalytical solution, we package the entire system behavior into a mathematical expression, which\nwe can use to understand its behavior. With the numerical procedure, we must run multiple\ncases, and then compare tables of numbers, to sense how the system will operate.\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 3: the Heat Exchanger Network for Heat Recovery\nrevised 2004 Dec 17\n\nwe must develop several tools before we can proceed with this plan\nIf we start to get bogged down in details, it will help to remember the side-by-side comparison\npresented above. These numerical methods are just more ways to accomplish the same steps we\nfollowed in our simpler shower problem.\n\nroot-finding\nLet us think of our six equations as a nonlinear vector function F. A valid steady-state is\ndescribed by\n\nF =\n\n(3-7)\n\nThus the root of F is the vector of 3 CV and 3 IV that satisfy the energy balances and\nperformance equations at steady-state (for specified values of DV, MV, and parameters).\nNumerical root-finding is done by an algorithm that seeks to drive F to zero by varying values of\nthe root.\n\n- guess root value xguess\n- calculate the function F at the guessed root F(xguess)\n- is F close enough to zero?\n- if so, declare xguess the root\n- if not, modify xguess in some way that depends on what was learned in calculating F and\ngo around again\n\nThis algorithm is easiest to visualize for scalar F and x, but applies equally to our vectors. The\ntrick is specifying the italicized part of the last step. Various schemes are used - repeated\nbisection of the interval of x known to contain the root, aiming at the root by calculating the\nslope of F at each guessed value of the root, fitting lines or polynomials to the function and\nfinding their roots as improved guesses - and with a little library work, we can find about them\nin detail. For our purposes, we can use a routine developed by Prof. Beers for 10.34, and made\navailable on the OpenCourseWare site (1).\n\nThe end result is that although we cannot solve our equations for T6, T8, T9 in general, we can\ncompute appropriate values for these CV in specific cases.\n\nnumerical differentiation\nWe can also obtain a numerical estimate of a derivative:\n\n(\n)\n(\n)\nunchanged\n\nx\nx\nall\nj\ni\nj\ni\nj\ni\nj\nk\nx\nx\nx\ny\nx\nx\ny\nx\ny\n=\n-\n-\n+\n≈\n∂\n∂\nδ\nδ\nδ\n\n(3-8)\n\nwhere δx should be small enough to approximate the slope of yi but not so small that numerical\nround-off errors dominate. Each determination of yi in (3-8) is done by numerical root-finding.\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 3: the Heat Exchanger Network for Heat Recovery\nrevised 2004 Dec 17\n\nlinearization\nAny one of our controlled variables (call it yi) is related to the input (manipulated and\ndisturbance) variables xm and xd through the nonlinear equation set F. We use the Taylor series\nto approximate this relationship as\n\n(\n)\n(\n)\n(\n) K\nK\n+\n-\n∂\n∂\n+\n+\n-\n∂\n∂\n+\n-\n∂\n∂\n+\n=\nr\nd\nd\nr\nd\ni\nr\nm\nm\nr\nm\ni\nr\nm\nm\nr\nm\ni\nir\ni\nx\nx\nx\ny\nx\nx\nx\ny\nx\nx\nx\ny\ny\ny\n\n(3-9)\n\nor in deviation variables\n\nK\nK\n+\n∂\n∂\n+\n+\n∂\n∂\n+\n∂\n∂\n=\n'\nd\nr\nd\ni\n'\nm\nr\nm\ni\n'\nm\nr\nm\ni\n'\ni\nx\nx\ny\nx\nx\ny\nx\nx\ny\ny\n\n(3-10)\n\nWhen we apply this general form to each controlled variable, we can collect them into the\nstandard linear system form\n\n'\nd\nd\n'\nm\nm\n'\nx\nP\nx\nP\ny\n+\n=\n\n(3-11)\n\nwhere we see that matrices Pm and Pd are ensembles of the Taylor series partial derivatives,\nevaluated at the reference condition. Writing (3-11) specifically for the heat exchanger network,\n\n⎥\n⎥\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎢\n⎢\n⎣\n⎡\n⎥\n⎥\n⎥\n⎥\n⎥\n⎥\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎢\n⎢\n⎢\n⎢\n⎢\n⎢\n⎣\n⎡\n∂\n∂\n∂\n∂\n∂\n∂\n∂\n∂\n∂\n∂\n∂\n∂\n∂\n∂\n∂\n∂\n∂\n∂\n∂\n∂\n∂\n∂\n∂\n∂\n+\n⎥\n⎦\n⎤\n⎢\n⎣\n⎡\n⎥\n⎥\n⎥\n⎥\n⎥\n⎥\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎢\n⎢\n⎢\n⎢\n⎢\n⎢\n⎣\n⎡\n∂\n∂\n∂\n∂\n∂\n∂\n∂\n∂\n∂\n∂\n∂\n∂\n=\n⎥\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎢\n⎣\n⎡\n'\n'\n'\n'\nr\nr\nr\nr\nr\nr\nr\nr\nr\nr\nr\nr\n'\n'\nr\nr\nr\nr\nr\nr\n'\n'\n'\nT\nT\nT\nW\nT\nT\nT\nT\nT\nT\nW\nT\nT\nT\nT\nT\nT\nT\nW\nT\nT\nT\nT\nT\nT\nT\nW\nT\nW\nW\nW\nT\nW\nT\nW\nT\nW\nT\nW\nT\nW\nT\nT\nT\nT\n\n(3-12)\n\nThus we assemble matrices Pm and Pd directly by calculating numerical derivatives with (3-8).\n\nputting it together to calculate the matrices\nFor example, we calculate the root of nonlinear system F at W2 = W2r + δW2, with all other input\nvariables at reference conditions. Then we calculate the root for W2 = W2r - δW2, leaving the\nother inputs unchanged. From these two steady-state conditions, we obtain the first column of\nmatrix Pm. The other column is obtained similarly by finding roots at W3 = W3r ± δW3, leaving\nW2 and the other inputs at the reference values. Pd follows in a similar manner.\n\nscaling variables using matrix notation\nWe express each vector of variables in terms of scaled variables, and then separate the scaling\nranges into a separate matrix. For example,\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 3: the Heat Exchanger Network for Heat Recovery\nrevised 2004 Dec 17\n\n*'\nm\nm\n*'\n*'\n*'\n*'\n'\n'\n'\nm\nx\nS\nW\nW\nW\nW\nW\nW\nW\nW\nW\nW\nx\n=\n⎥\n⎦\n⎤\n⎢\n⎣\n⎡\n⎥⎦\n⎤\n⎢⎣\n⎡\n∆\n∆\n=\n⎥\n⎦\n⎤\n⎢\n⎣\n⎡\n∆\n∆\n=\n⎥\n⎦\n⎤\n⎢\n⎣\n⎡\n=\n\n(3-13)\n\nSimilar treatments are done for y′ and xd\n′. Substituting into the linear model, we find\n\n*'\nd\nd\nd\n*'\nm\nm\nm\n*'\nx\nS\nP\nx\nS\nP\ny\nS\n+\n=\n\n(3-14)\n\nwhere the scaling ranges for individual controlled variables in y are collected into S, and so forth.\nWe then isolate y*′; on performing the indicated matrix multiplication, we obtain matrices Pm\n*\nand Pd\n*.\n\n*'\nd\n*\nd\n*'\nm\n*\nm\n*'\nd\nd\nd\n*'\nm\nm\nm\n*'\nx\nP\nx\nP\n\nx\nS\nP\nS\nx\nS\nP\nS\ny\n+\n=\n+\n=\n-\n-\n\n(3-15)\n\nIn Matlab, we should use left division instead of the matrix inverse:\n\nPmstar = S\\Pm*Sm; % = inv(S)*Pm*Sm\nPdstar = S\\Pd*Sd; % = inv(S)*Pd*Sd\n\ndon't get lost\nIf you find yourself feeling bewildered by these various operations, return to the side-by-side\ncomparison above and make sure that you understand the overall procedure for turning a\nnonlinear model into a linear system approximation. Then review the tools again with the\npurpose of each step firmly in mind.\n\nwe create a Matlab program to perform these calculations\nWe base our calculations on Prof. Beers' code reduced_Newton.m, which will calculate the\nvector of roots of a set of nonlinear algebraic equations. reduced_Newton requires that we write\na routine called calc_f.m to contain our six equations; given a vector of CV and IV values, calc_f\nreturns the vector computed from the six equations. If it returns zeroes, we know that the\nsupplied vector was a root. We write the main routine to set the reference conditions, calculate\nmatrices Pm\n* and Pd\n*, and compute the RGA and DC.\n\nFrom our shower work, we recall\n\n(\n)\n(\n) ⎟⎠\n⎞\n⎜⎝\n⎛\n⊗\n=\n⊗\n=\n-\n-\nT\n*\nm\n*\nm\nT\nm\nm\nP\nP\nP\nP\nRGA\n\n(3-16)\n\nand\n\n(\n)\n*'\nd\n*\nd\n*\nm\nx\nP\nP\nnorm\nDC\n-\n-\n=\n\n(3-17)\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 3: the Heat Exchanger Network for Heat Recovery\nrevised 2004 Dec 17\n\nwe do an example to calculate RGA\nLet us for convenience presume these are all unspecified organic liquid streams. Let all the heat\ncapacities be simply 2500 J kg-1 K-1 and all the heat transfer coefficients 250 W m-2 K-1. Our\ndesign has led us to three identical heat exchangers of 117 m2. The inlet streams are\n\nW1: 8.2 kg s-1 T1:250°C\nW2: 9.1 kg s-1 T2:136°C\nW3: 5.6 kg s-1 T3:100°C\n\nWe calculate the corresponding intermediate and output variables\n\nT4: 196.2°C\nT6: 129.3°C\nT5: 159.8°C\nT8: 223.4°C\nT7: 144.7°C\nT9: 168.8°C\n\nMatrices Pm and Pd are\n\nPm =\n-0.5998 -3.9815\n-0.2312 -9.3344\n-2.9267 -4.2319\n\nPd =\n6.0495 0.1114 0.3487 0.5399\n3.3765 0.7906 0.1344 0.0750\n5.7393 0.3142 0.6031 0.0827\n\nwhere the units of the Pm elements, and the first column of Pd elements, are K s kg-1. The\nremaining elements of Pd are dimensionless.\n\nActually, our first controllability problem has been visible for some time: there are only two\nmanipulated variables to deploy against three desired controlled variables. Hence we must let\none of these remain uncontrolled. We thus calculate RGA from the appropriate submatrix of Pm\nfor three separate cases:\n\ncontrol T6 and T8\nRGA =\n1.1968 -0.1968\n-0.1968 1.1968\n\ncontrol T6 and T9\nRGA =\n-0.2785 1.2785\n1.2785 -0.2785\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 3: the Heat Exchanger Network for Heat Recovery\nrevised 2004 Dec 17\n\ncontrol T8 and T9\nRGA =\n-0.0371 1.0371\n1.0371 -0.0371\n\nThe selection of which two variables to control may depend on other considerations - safety\nconsiderations, impact on the downstream processes, likelihood of disturbances affecting the\nvarious CV - but if there are no other compelling grounds, the RGA suggests that we pair T8\nwith W3 and T9 with W2. These two loops are predicted to show the least interaction; that is,\nadjustments in one loop should not strongly disturb the other.\n\nW1\nW2 T2\nT6\nT5\nT4\nT1\nT8\nT9\nT7\nE101\nE102\nE103\nW3 T3\nW1\nW2 T2\nT6\nT5\nT4\nT1\nT8\nT9\nT7\nE101\nE102\nE103\nW3 T3\n\nNotice that each RGA shows (by negative elements) one pairing to be unstable. It would require\ndynamic simulation to explore this quantitatively, but we can see the outlines of the behavior by\nimagining the effects of a step disturbance in one input. For example, suppose that we pair T8\nwith W2 and T9 with W3.\n\nW1\nW2 T2\nT6\nT5\nT4\nT1\nT8\nT9\nT7\nE101\nE102\nE103\nW3 T3\nW1\nW2 T2\nT6\nT5\nT4\nT1\nT8\nT9\nT7\nE101\nE102\nE103\nW3 T3\n\nNOT RECOMMENDED\n\nWe imagine an initial steady-state at the reference conditions, and we disturb this by a small step\nincrease in temperature T2. This will increase outlet temperature T9. The controller tries to\ncounter an increase in T9 by increasing W3, so that stream W1 will approach HX102 cooler.\nIncreasing W3, however, also tends to reduce T8. The T8 controller tries to increase T8 by\nheating the W1 stream approaching HX103. It does this by decreasing W2. Decreasing W2,\nhowever, tends to increase outlet temperature T9, thus reinforcing the initial disturbance. The\nlikely outcome is maximum W3 and minimum W2, far from the desired reference condition.\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 3: the Heat Exchanger Network for Heat Recovery\nrevised 2004 Dec 17\n\nwe continue the example to compute DC\nIf we were designing this process, of course, we would find out about other considerations\nbesides the RGA, as well as the information needed to set suitable scaling ranges for all our\nvariables. Because our purpose is to learn screening tools, however, we are entitled to make\nsome simplifying assumptions about these details. For example, we will assume that all\ntemperatures are scaled to ±10oC around the reference condition and flows are scaled between\nzero and twice the reference value. With these simple scaling ranges, we calculate the\ndimensionless matrices Pm\n* and Pd\n*\n\nPmstar =\n-0.5458 -2.2296\n-0.2104 -5.2273\n-2.6633 -2.3699\n\nPdstar =\n4.9606 0.1114 0.3487 0.5399\n2.7687 0.7906 0.1344 0.0750\n4.7062 0.3142 0.6031 0.0827\n\nFor further calculations, we omit the first row of each matrix, because we have chosen to control\nT8 and T9, and their dependency is given by rows 2 and 3.\n\nWe calculate DC as a function of the disturbance vector xd\n*′. We check cases in which flow W1\nvaries from 50% to 150% of its reference value. That is, W1\n*′ takes values of -0.25, 0, and 0.25.\nEach temperature varies a full ±10oC, so that each scaled deviation variable takes values of -0.5,\n0, and 0.5. This means 81 calculations of DC. We are concerned with the largest values:\n\nDC\nW1*'\nT1*'\nT2*'\nT3*'\nW2*'\nW3*'\n0.4706 -0.2500 0 -0.5000 -0.5000 -0.4510 -0.1343\n0.4706 0.2500 0 0.5000 0.5000 0.4510 0.1343\n0.4784 -0.2500 -0.5000 -0.5000 0 -0.4329 -0.2035\n0.4784 0.2500 0.5000 0.5000 0 0.4329 0.2035\n0.4898 -0.2500 -0.5000 -0.5000 -0.5000 -0.4424 -0.2103\n0.4898 0.2500 0.5000 0.5000 0.5000 0.4424 0.2103\n\nThe maximum occurs symmetrically: when the flow and all temperatures decrease, or increase.\nNotice that both W2*′ and W3*′ are below their extreme values (±0.5) so that we have sufficient\nMV capacity to overcome the anticipated disturbances.\n\nbefore we contemplated heat recovery, we would have controlled all three temperatures\nWe should not give up control too easily. The problem at present is that we have two MV for\nthree CV. Here are two schemes for creating another MV:\n\nadjustable bypass stream\nAs in Seider et al (3), we divert some of stream W3 past HX103. We now can manipulate W2,\nW3, and the bypass fraction φ, so we can control all three variables. However, because we are\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 3: the Heat Exchanger Network for Heat Recovery\nrevised 2004 Dec 17\n\nremoving part of W3 from being heated, we may require larger heat exchangers to produce the\ndesired output temperatures. Thus our new operating capability comes at a capital cost.\n\nW1\nW2 T2\nT6\nT5\nT4\nT1\nT8\nT9\nT7\nE101\nE102\nE103\nW3 T3\nφW3\nT7a\nW1\nW2 T2\nT6\nT5\nT4\nT1\nT8\nT9\nT7\nE101\nE102\nE103\nW3 T3\nφW3\nT7a\n\ntrim heat exchanger\nWe do part of our heating with a new heat exchanger, using a plant utility heating fluid. We now\ncan manipulate W2, W3, and the utility flow Wu, so we can control all three variables. Again,\nour new operating capability comes at a capital cost. In this case, however, we may be able to\nreduce the other heat exchanger sizes somewhat.\n\nW1\nW2 T2\nT6\nT5\nT4\nT1\nT8\nT9\nT7\nE101\nE102\nE103\nW3 T3\nT7a\nE104\nT11\nWu T10\nW1\nW2 T2\nT6\nT5\nT4\nT1\nT8\nT9\nT7\nE101\nE102\nE103\nW3 T3\nT7a\nE104\nT11\nWu T10\n\nby now, we know the drill for analyzing these alternatives\nThe first step is to update the process model to reflect the process changes. For the bypass\nscheme, we must write M&E balances over the mixing junction. For the trim HX scheme, we\nneed energy balances and a performance equation for the new heat exchanger.\n\nWe review our variable classification - CV is the same, but each scheme has a new MV and\nsome new IV, as well. For simplicity (we have enough complication) we shall ignore any new\nDV that would be introduced, such as T10.\n\nWe calculate new reference conditions - that is, a new design. Our original input and output\nspecifications for the reference still apply, of course, but we must choose a new MV reference in\neach case. That specification will affect the other heat exchanger sizes. We will use the DC,\ncalculated after the fact, to evaluate whether our design (bypass fraction, trim heat exchanger\nsize) has the capability to overcome disturbances.\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 3: the Heat Exchanger Network for Heat Recovery\nrevised 2004 Dec 17\n\nWe rewrite f_calc.m and update the main program as needed to calculate the linear system\nmatrices.\n\nWe calculate the RGA for each scheme to guide us in pairing MV and CV. We calculate DC,\nand may have to adapt the design if DC indicates that we cannot compensate for disturbances\nwith the reference bypass flow, or trim HX size, that we chose.\n\nhow the story ends\nWhat do you find?\n\nreferences\n(1) K. Beers, 10.34, ocw.mit.edu.\n(2) T. McAvoy, Interaction Analysis, Instrument Society of America, 1983.\n(3) W. Seider, J. Seader, and D. Lewin, Product and Process Design Principles, 2nd ed,\nWylie, 2004.\n\nnomenclature\nCp\nliquid specific heat\nW\nmass flow rate\nPd\nmatrix of gain coefficients for the disturbance variables\nPm\nmatrix of gain coefficients for the manipulated variables\nQ\nheat duty of a heat exchanger\nT\ntemperature\nTin\ninlet temperature for flowing stream\nTout\noutlet temperature for flowing stream\nTref\nthermodynamic reference temperature for enthalpy\nU\noverall coefficient of heat transfer for a heat exchanger\nxd\nvector of input variables into the system, the disturbance variables\nxm\nvector of input variables into the system, the manipulated variables\ny\nvector of output variables from the system, the controlled variables\n\nabbreviations\nCV\n\"controlled variable\", a system output that we wish to maintain at a set point value\nDC\n\"disturbance cost\"\nDV\n\"disturbance variable\", a system input that we have no influence over\nMV\n\"manipulated variable\", a system input that we may adjust for our purposes\nRGA \"relative gain array\"\n\nsubscripts\ncold\ncolder stream in a heat exchanger\nhot\nhotter stream in a heat exchanger\nr\na reference operating condition around which we derive a linear approximation\n\nsuperscripts\n′\nindicates a deviation variable; i.e., the physical variable minus a reference value\n*\nindicates a scaled variable; i.e., variable has been divided by its operating range"
    },
    {
      "category": "Resource",
      "title": "note_4_last_topc.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-492-1-integrated-chemical-engineering-topics-i-process-control-by-design-fall-2004/209e60e508cba7ede0a5d658b9104c8d_note_4_last_topc.pdf",
      "content": "Fall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 5: What lies beyond\nrevised 2004 Dec 17\nDr. Barry S. Johnston, Copyright 2004.\n\nwe should emphasize that our heat exchanger work has all been at steady state\nIn approaching the heat exchanger network, we took the point of view that early in design, we\ndid only steady state calculations. Thus we used steady-state energy balances to describe normal\noperation in the network. We calculated the RGA and DC from a linear system approximation to\nthese equations, and used it to make statements about controllability. There is not a\ncontradiction here, merely a simplification: RGA and DC tell us the results of disturbances that\nmoved the operation from one steady-state to another. To say any more about the time required\nto reach the new steady state, or the path followed, or the effects of continuing disturbances, we\nmust make a dynamic analysis.\n\nSeider et al (3) show how the RGA and DC may be extended to account for time-varying\ndisturbances. In particular, they show that the severity of control loop interaction can vary with\nthe frequency content (that is, the time-varying nature) of the input disturbance. These topics are\nbeyond our scope, but you should return to them if you do this again for money.\n\nbut here's a transient problem that we wouldn't have caught with the RGA:\nKister (1) describes how trace components in a feed stream may accumulate to considerably\nhigher concentrations in distillation towers. Imagine a chemical species with lower volatility\nthan the overhead components, so that the rectifying section tends to wash it down, and higher\nvolatility than the bottoms, so that the stripping section tends to push it up. Such volatility\nbehavior is exacerbated by the nonlinear composition dependence of the activity coefficients.\nWith no place to go, the component tends to accumulate in the tower, so that the tower\nundergoes a slow transient. The transient may be observed by a changing temperature profile as\nthe composition profile varies in the tower.\n\nControl loops, whose mission is to maintain the composition of the outlet streams, tend to\nprevent the component from leaving. For example, the rise in overhead temperature as the\nhigher-boiling impurity approaches the top might trigger an increase in reflux flow, thus\nsuppressing the impurity.\n\nThe accumulation has some limit. The component will either establish an exit flow to equal the\ninlet (a new steady state) or cause conditions to exceed some hydraulic limit, which subsequently\nforces its removal. In the first case, the interior concentration rises enough to deliver it to some\noutlet stream; if the control system does not object, it becomes a trace component of the product.\n\nIn the second case, the increased reflux or boilup (in an attempt to suppress the component) or a\nchange in physical properties due to the presence of the component (in some cases generating a\nsecond liquid phase) exceed the capabilities of tray or packing to handle the internal tower flows.\nThe column floods and delivers the accumulated component in an upset to an exit stream.\nObservers in the control room will see surges in pressure drop and temperature. Kister points out\nthat these accumulation/upset cycles show periods of hours to days.\n\nOur RGA would not have caught this problem during design. Instead, the design engineer would\nneed to scrutinize the proposed feed stream for the possibility of trace components. Of course,\n\nFall 2004\nICE Topics: Process Control by Design\n10.492\n\nLecture Notes 5: What lies beyond\nrevised 2004 Dec 17\n\nthis is only one of many topics about which the designer should play \"what if?\". The design\nengineer cannot become complacent.\n\nlife beyond design\nA component-accumulation problem might arise in an operating plant long after the original\ndesign basis no longer applies. Control, interaction, and capacity limit problems might arise, as\nwell. We have presented RGA and DC as screening tools in the context of process design.\nHowever, they may also be useful as diagnostic tools for engineers who are trying to improve\nexisting processes.\n\nSaletan (2) makes a useful division of engineering activity into three main areas: research,\ndesign, and operation. Rather than a linear progression from \"lab bench to plant\", however, he\narranges the three activities into a triangular structure. He views the interaction between\nresearch and operation to be particularly fruitful for successful process troubleshooting.\nResearchers, process designers, and plant engineers all require access to technical tools, and\nengineers in any of these areas benefit from knowing the responsibilities, capabilities, and\nconstraints of the other areas.\n\nIt is most feasible in a university lecture course to arrange activities that resemble real design,\nand a laboratory course may indicate the flavor of engineering research. Students should not\nthereby underestimate the challenges and rewards of applying their skills to operation and\ntroubleshooting during their professional careers.\n\nthe last message\nChemical processes are wonderfully complex nonlinear systems. Chemical engineers must be\nprepared to approach them at multiple levels, with a variety of tools, always looking to improve\nthe analysis, but able to employ short-cut approximations when needed. Engineering judgment\nis developed by learning from your experiences, your colleagues, and your mistakes.\n\nMay your careers be long, rewarding, and worthwhile.\n\nreferences\n(1) H. Kister, \"Component Trapping in Distillation Towers: Causes, Symptoms and Cures\",\nChem Engr Progress, August 2004.\n(2) D. Saletan, Creative Troubleshooting in the Chemical Process Industries, Chapman and\nHall, 1994.\n(3) W. Seider, J. Seader, and D. Lewin, Product and Process Design Principles, 2nd ed,\nWylie, 2004."
    }
  ]
}