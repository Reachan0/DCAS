{
  "course_name": "Process Dynamics, Operations, and Control",
  "course_description": "This course introduces dynamic processes and the engineering tasks of process operations and control. Subject covers modeling the static and dynamic behavior of processes; control strategies; design of feedback, feedforward, and other control structures; and applications to process equipment.\nDedication\nIn preparing this material, the author has recalled with pleasure his own introduction, many years ago, to Process Control. This OCW course is dedicated with gratitude, to Prof. W. C. Clements of the University of Alabama.",
  "topics": [
    "Engineering",
    "Chemical Engineering",
    "Process Control Systems",
    "Mechanical Engineering",
    "Dynamics and Control",
    "Engineering",
    "Chemical Engineering",
    "Process Control Systems",
    "Mechanical Engineering",
    "Dynamics and Control"
  ],
  "syllabus_content": "A list of topics by lecture is available in the\ncalendar\nlisted below.\n\nCourse Meeting Times\n\nLectures: 3 sessions / week, 1 hour / session\n\nCourse Description\n\nIn learning a new subject, we must receive information in sequence - following a path through multidimensional space. It is like entering a large building with unlighted rooms, holding a dim flashlight and clutching a vague map that omits some of the stairways and passages. How best to learn one's way around? In these lessons we will attempt to move through a significant portion of the structure - say, half a textbook - in about two weeks. Then we will repeat the journey several times, each time inspecting the rooms more thoroughly. By this means we hope to gain, from the start, a sense of doing an entire process control job, as well as approach each new topic in the context of a familiar path.\n\nCourse Objectives\n\nAs a student, you will learn about:\n\nSystems that vary in time, with some tools for attacking the problems\n\nSingle-loop feedback control of processes - concepts, terminology, methods, and performance\n\nSome ways to enhance feedback control\n\nSome of the hardware used in a control system\n\nI will show you:\n\nHow to represent dynamic systems by equations and by transfer functions in block diagrams\n\nHow to solve linear, constant-coefficient ODEs by Laplace transform and numerical methods\n\nHow dynamic systems respond to disturbances, particularly pulse, step, and oscillatory\n\nHow to calculate and use the frequency response of a system\n\nHow to estimate the stability limits for a system, with or without control\n\nHow to tune a single-loop controller for better response\n\nHow to enhance feedback control with cascade, feedforward, and model-based structures\n\nAn overview of sensors, valves, transducers, controllers - both hardware and performance considerations\n\nPrerequisites\n\nThe prerequisites for this course include\nDifferential Equations (18.03)\nand\nTransport Processes (10.302)\n.\n\nTextbooks\n\nMarlin, Thomas E.\nProcess Control.\n2nd ed. Boston, MA: McGraw-Hill, 2000. ISBN: 9780070393622.\n\nThis book has lots of material, good explanations, and an industrial/applied point of view. Get it, if you plan to practice chemical engineering.\n\nSeborg, Dale, Thomas Edgar, and Duncan Mellichamp.\nProcess Dynamics and Control.\n2nd ed. Hoboken, NJ: Wiley, 2003. ISBN: 9780471000778.\n\nThey have managed to be both comprehensive and concise. Excellent reference.\n\nGrading Policy\n\nCourse letter grades will be assigned on the conventional scale: A>= 90% and so on. The evaluation will be based on the Activities listed below.\n\nACTIVITIES\n\nPERCENTAGES\n\nTwo In-class Hour-examinations\n\n26%\n\nThe two hour-examinations reworked out of class (up to 5 bonus points will be added to the grade for creativity in presentation)\n\n14%\n\nProblem Sets\n\n25%\n\nPaper on a Process Control Topic (specifications given in\nassignments\nsection)\n\n20%\n\nSome number of unannounced, In-class Quizzes\n\n8%\n\nA one-hour meeting with the instructor (you must schedule it during the term; prepare to discuss recent course topics, and to explain where you most need to improve your understanding)\n\n7%\n\nThe Daily Grind\n\nThe course is arranged around eight lessons, for which notes will be provided. Use library textbooks as needed to supplement the presentation in the notes. Class time will be used to amplify, apply, and explain the material in the notes. Look for due dates in the\ncalendar\n, lecture notes in the\nlecture notes\nsection, and problem sets in the\nassignments\nsection.\n\nFix-its\n\nWe learn better if we examine the input as we receive it. At the end of each class, please submit the fix-it form. The fix-it asks\n\nWhat was the most important thing you learned?\n\nWhat topic or point was least clear?\n\nOf course additional comments, questions, requests, etc., are welcome, as well. If you use fix-its earnestly, you will benefit.\n\nLate Submission of Work\n\nAssigned work is due at noon on the dates given in the schedule. Extensions cost 10 percent for each 24-hour period beyond the deadline, up to a maximum of 30 percent. Medical and beyond-your-control problems will be dealt with individually. Plant trips and other scheduled activities are not beyond your control - allocate your time to accomplish all your obligations.\n\nCalendar\n\nThe table below gives information about lecture material and due dates for the assignments.\n\nLEC #\n\nTOPICS\n\nKEY DATES\n\nIntroduction to Processes and Systems\n\nMath Review\n\nProblem set 1 due\n\n3-7\n\nThe Blending Tank\n\nProblem set 2 due in Lec #5\n\n8-13\n\nTwo Tanks in Series\n\nProblem set 3 due\n\nProblem set 4 due in Lec #11\n\nOperability of Processes\n\nProblem set 5 due\n\nExam 1 (Lessons 1-4)\n\n16-17\n\nOperability of Processes (cont.)\n\nReworked exam 1 due in Lec #17\n\n18-20\n\nThe Heated Tank\n\nProblem set 6 due in Lec #20\n\n21-26\n\nThe Exothermic Reactor\n\nProblem set 7 due in Lec #23\n\nProblem set 8 due in Lec #26\n\nPaper topic due in Lec #26\n\n27-31\n\nHigher-order Overdamped Systems\n\nProblem set 9 due in Lec #28\n\nProblem set 10 due in Lec #31\n\n32-34\n\nCascade and Feed Forward Control Schemes\n\nProblem set 11 due in Lec #34\n\nExam 2 (Lessons 5-7)\n\n36-39\n\nCascade and Feed Forward Control Schemes (cont.)\n\nReworked exam 2 due in Lec #37\n\nPaper due in Lec #38",
  "files": [
    {
      "category": "Assignment",
      "title": "pset_1.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-450-process-dynamics-operations-and-control-spring-2006/830af4e9ca0d31b172d59f6a7f1fd258_pset_1.pdf",
      "content": "Spring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nProblem Set 1\n(1) Equation (2.2.4) gives the response of a first-order system to a step input. Let the initial\ncondition y(0) be zero. Let the step occur at t = 0. Complete this table:\n\nt/τ\ny/y(t=inf)\n\n(2) You are making measurements in the 10.26 lab using a glopwhanger apparatus: you set a\nvalue on the porfinoz dial, wait for the resbilap indicator to stabilize, and record the new reading.\nYou realize that the glopwhanger behaves as a first-order system with a time constant of 5\nminutes. About how long will it take you to obtain 10 readings? Please explain your time\nestimate. Will you be on time for the team-building meeting at 4:00?\n\n(3)\n(\n)\n)\n(\ny\nt\nt\nKU\ny\ndt\ndy\no\n=\n-\n=\n+\nτ\n\n(a) determine y by plugging into Equation (2.2-3).\n(b) determine y by recognizing that the equation is separable, so that you can integrate without\nusing the general integrating factor.\n\nPlease show your steps in both methods.\n\n(4) The first-order system is\n\n)\n(\ny\nx\ny\ndt\ndy\n=\n-\n-\n=\n\nThe input disturbance x is initially zero. At t = 2, however, x undergoes a rectangular pulse of\nmagnitude 2 and duration 2.\n\n(a) determine y by treating the pulse as a non-smooth disturbance (Section 2.3)\n(b) determine y by treating the pulse as two counteracting steps (Section 2.4)\n\nPlot your results over an appropriate time interval.\n\nrevised 2006 Feb 8"
    },
    {
      "category": "Assignment",
      "title": "pset_2.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-450-process-dynamics-operations-and-control-spring-2006/8df1594e043c496bad913c6fe822f60c_pset_2.pdf",
      "content": "Spring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nProblem Set 2\n(1) Sketch a first-order step response: mark off increments on the abscissa as multiples of the\ntime constant; mark off the ordinate as a fraction of the long-term response. This is something\nyou should memorize.\n\n(2) Modeling practice: consider the overflow tank that we represented with Equation (3.1-1).\nSuppose that the outflow is not equal to the inflow, but is rather proportional to the liquid level in\nthe tank. We still wish to describe the outlet composition behavior, but now the overall material\nbalance is important, too. Derive both balances and ponder them - discuss how the behavior\nwould differ from that of our overflow tank.\n\n(3) More modeling practice: in Section 3.7 we discussed stability. For the blending tank, we\nlooked at the equations describing response to particular disturbances, saw no e+t terms, and\ndeclared the tank theoretically stable (at least to the disturbances we checked). However, we\nrecognized that there may be practical limits on operation that would force us to think of a\nsystem as unstable, even if it were theoretically stable.\n\nWith that constraint in mind, derive a model for the liquid level in a tank that receives liquid at a\nvolumetric flow rate Fi(t) and dispenses liquid at a constant flow Fo. Is the tank stable to a sine\ninput? To a step input?\n\n(4) You are measuring a temperature in the laboratory, and your data show\n\n0.1\n0.2\n0.3\n0.4\n0.5\n0.6\n0.7\n0.8\n0.9\n1.1\ntime (minutes)\ntemperature (C)\n\nrevised 2006 Feb 13\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nProblem Set 2\n\nYou know the temperature is not really fluctuating that way, and you suspect that your\ninstrument signal has been contaminated by some high-frequency noise. You decide to run the\nsignal through a low-pass filter to remove the noise component. Suppose the filter is a first-order\nlag circuit. Draw its Bode plot so that you can see the effect on the instrument signal. What time\nconstant should you use so that the amplitude ratio of the noise component is 0.01? Have you\nimproved matters?\n\n(remember that the Bode plot is presented as a function of the radian frequency. How do you\nestimate radian frequencies from the time trace shown above?)\n\nrevised 2006 Feb 13"
    },
    {
      "category": "Assignment",
      "title": "pset_3.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-450-process-dynamics-operations-and-control-spring-2006/4e36ba4a42c5997ec4f5632a0342cf2d_pset_3.pdf",
      "content": "Spring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nProblem Set 3\n(1) Your new proportional controller arrives from eBay. On one end, the controller has an input\nport that is to be fed a signal that ranges from 0 to 100%. Beside it is a set point knob that ranges\nfrom 0 to 100%. At the other end is a port for the output signal, and a bias knob, both with the\nsame range. In the middle is the gain knob, marked from 0 to 100, and a switch that makes the\ngain be either + or -.\nYou decide to check it out on the bench. You put the set point to 50% and supply a steady 50%\nsignal to the input port. You turn the bias knob to 40%, and verify that the output is 40%.\na) You set the gain to 2 and drop the input to 45%. What happens to the output?\nb) You set the gain to -2 and the input to 55%. What is the output?\nc) You set the gain to 3 and arrange for the input to ramp from 50% to 80% over 10\nminutes. When does the output hit a limit? What is it?\nd) You set the gain to 50. At what input value does the output become 0?\n\n(2) Well, they goofed again. You told them, as in the last paragraph of Section 3.15, to set the\ncontroller gain to be positive, but they managed to make it negative. Redo Figure 3.21-1 for\nnegative gains. Explain what's happening in the closed loop when the controller gain has been\ngiven the wrong sign.\n\n(3) Control the liquid level in a tank against inflow disturbances by manipulating the outlet flow.\nUse a proportional controller. Derive the equation to describe closed-loop response. Present the\nspecial case of a step disturbance.\n\nrevised 2006 Feb 21"
    },
    {
      "category": "Assignment",
      "title": "pset_4.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-450-process-dynamics-operations-and-control-spring-2006/8cf45122579582ed8afc7680551b51f3_pset_4.pdf",
      "content": "Spring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nProblem Set 4\nDownload the file template.m from the MIT Server.\n\n(1) Read it. It's a long computer code, most of it commentary. It simulates a process in a\nfeedback control loop, integrating the equations over a period of time and displaying the traces.\nRead the code to understand how this task is performed. Notice particularly the sections marked\nfor USER INPUT - that's where you'll be doing your work. I can't grade you on this step; it's\nup to you. But don't rest until you are clear in your understanding.\n\n(2) Equation (3.1-2) is a first-order system model. Adapt template.m to compute this model over\ntime; from question (1) you should know where you do this. Do separate cases for different\ndisturbances, so that you reproduce the figures in Sections 3.3, 3.4, and 3.5. You can tell when\nyour result is right. Turn in the plots.\n(Notice that there is no control applied, so that you don't need to write the controller code yet.)\n\n(3) Lesson 4 goes through root-finding and other manipulations to predict how two tanks behave\nunder P-mode feedback control. Let's simplify that problem by assuming that the valve is fast,\nso that its time constant can be regarded as zero. Removing this \"lag term\" reduces the equation\norder to 2, and makes it feasible to solve. Do so. Calculate Figures 4.19-1 and 4.20-1 for this\nsimplified case.\n(Please use Laplace transforms to solve the equations.)\n\nrevised 2006 Feb 22"
    },
    {
      "category": "Assignment",
      "title": "pset_5.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-450-process-dynamics-operations-and-control-spring-2006/7a1737b1add4060638f9d553541bb6a4_pset_5.pdf",
      "content": "Spring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nProblem Set 5\nThe tank is 1 m tall and 60 cm in diameter. The flow to the tank varies unpredictably and\nwithout regular pattern, but has historically been between 0.06 and 0.085 m3 min-1. We desire to\npump from the tank at 0.07 m3 min-1, but are willing to adjust this flow to maintain the liquid\nlevel at 60 ± 5 cm. We obtain a level instrument that measures over the full range of the tank.\nWe also obtain a proportional controller, which takes a 0 - 100% input and delivers a 0 - 100%\noutput. We need to size an appropriate control valve for the outlet stream (part (2)), and we need\nto tune the controller (part (3)).\n\nh\nFi\nFo\nh\nFi\nFo\n\n(1) From an earlier problem set, you know that the pumped-outlet tank is unstable. You've\nalready derived a system model for such a tank. For warm-up, present it in Laplace domain, so\nthat the transform of the output liquid level [ h'(s) ] is clearly related to the inputs via transfer\nfunctions. Determine the poles of these transfer functions. Do these indicate the instability?\n\n(2) \"Size the valve.\" Ultimately, that means a physical size, something you select from a\ncatalog. However, at this point we will be content to specify the required flow capacity. Do this\nby determining the outlet flow you will need to compensate for the most demanding disturbance.\nThen make your specification 10% larger, so that you can avoid banging the valve fully open.\nFinally express your valve \"size\" as the gain Kv of the transfer function between controller and\noutlet flow rate. In writing this transfer function, presume that the valve is much faster than the\ntank, not like the one in Lesson 4.\n\n(3) Download the (new and slightly improved) file template.m from the MIT Server. Modify it to\ndescribe closed-loop operation of the tank, using the equipment we have described above:\nprocess, sensor, controller, valve. This means that you will need to code the controller\nalgorithm. Remember that the controller's job is to calculate an output that positions a valve.\nThat controller output depends, in proportional mode, on the controller bias (xco_init), the set\npoint (ysp), the sensor reading (ys), and the controller gain (Kc). The subfunction argument list\ncontains all the items you should need. When you've coded things, do some common-sense\nchecks to catch blunders. For example, run it both open- and closed-loop with steady inputs to\nverify that it holds steady state. Then run it open loop with a simple disturbance to see if the\nprocess behaves as it should.\n\nThe goal of this part (3) is to find the smallest controller gain that satisfies the control objective\nstated in the introduction, for the worst disturbances (under the limits stated above) you throw at\nit. Do so; state the gain, and turn in a disturbance response plot that shows its triumph.\nrevised 2006 Mar 2"
    },
    {
      "category": "Assignment",
      "title": "pset_6.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-450-process-dynamics-operations-and-control-spring-2006/3963eefc1bcd3ceecf06feb90bf697d3_pset_6.pdf",
      "content": "Spring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nProblem Set 6\nA metal block is to be kept at temperature Tsp. The value of Tsp is occasionally changed. A\ncheck of the Biot number convinces you that the temperature will be spatially uniform.\nFurthermore, you find that heat loss, over the range of expected operating temperatures, is\nadequately described by a linear relationship\n\nL\na\nQ\nUA(T\nT\n=\n-\n)\n\nwhere T is the block temperature, Ta is the environment temperature, and UA is what you would\nexpect it is. You embed a small resistance heater in the block; its power is linearly adjustable\nbetween 0 and Qmax. You also acquire a temperature sensor with adjustable bias and sensitivity\n\ns\nV\nb\nT\n=\n+β\n\nwhere Vs is the sensor reading in mV for temperature T. You set b and β to obtain 0 mV at Tlow\nand 10 mV at Thigh. Finally you obtain a PI controller; Fran the electrician sets it up to accept a\n10 mV input range and to output a signal that drives the heater between its limits. The controller\nsettings are gain Kc\n* (%out %in-1) and integral time TI (s).\n\nTa\nQ\nT\nTa\nQ\nT\n\n(1) Write equations for each of the four components of the feedback loop. Combine these\nequations into a single equation for the closed loop response of T to Ta and set point Tsp. It will\nbe an integro-differential equation; arrange it so that all instances of T are on the left-hand side.\nIn your equations, use physical variables; that is, every variable and parameter should be some\nobservable or settable quantity. Please employ the nomenclature used above, and introduce other\nphysical quantities as you need them.\n\n(2) Define a reference condition and recast the component equations in terms of deviation\nvariables. Use Laplace transforms to define transfer functions for the components. Combine the\ntransfer functions into a closed loop model that gives the response of T'(s) to Ta'(s) and set point\nTsp'(s). Present these transfer functions in terms of appropriate gains and time constants, which\nare defined in terms of the physical parameters.\n\n(3) Recast the component equations in terms of 0-100% scaled variables. Combine them into a\nsingle equation for the closed loop response of T* to Ta\n* and set point Tsp\n*. Define range limits\nas needed. Don't omit factors of \"100%\" if they are part of the units conversion.\n\nIn each of these presentations, scrutinize your results for dimensional consistency. Pay particular\nattention to gains, scaling factors, conversion factors, etc. There should be no dimensional\ndiscrepancies. Also, don't forget the bias terms: with no error, only deviation variables are zero.\nrevised 2006 Mar 21"
    },
    {
      "category": "Assignment",
      "title": "pset_7.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-450-process-dynamics-operations-and-control-spring-2006/b854acb860388363d15ab3027778d2c2_pset_7.pdf",
      "content": "Spring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nProblem Set 7\nThis problem set allows us to update the simulator with a full PID controller algorithm. We then\ncalculate the performance of a first order system under PI control. We can compare our results\nto examples in the Lesson notes, which were derived from analytic solutions to the system\nmodel. Your task is to represent the sketchily-described deviation-variable system in the physical\nvariables used by the simulator.\n\nOur PID algorithm is\n\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\nε\n+\nε\n+\nε\n=\n-\n∫\ndt\nd\nT\ndt\nT\nK\nx\nx\n*\nD\nt\n*\nI\n*\n*\nc\n*\nb\n,\nco\n*\nco\n\n(6.13-1)\n\nA simple numerical approximation to the algorithm is\n\n(\n)\nn\n*\n*\n*\n*\n*\n*\n*\nD\nco,n\nco,b\nc\nn\ni\nn\nn 1\ni 0\nI\nT\nt\nx\nx\nK\nT\nt\n-\n=\n⎛\n⎞\nΔ\n-\n=\nε +\nε +\nε -ε\n⎜\n⎟\nΔ\n⎝\n⎠\n∑\n\nThis sort of equation might be put into the simulator - it calculates the controller output at each\nsampling time tn; it is called the \"position form\". An alternative form computes the change in\ncontroller output at each time. We derive it by writing the position form at step n-1 and then\nsubtracting.\n\n(\n)\n(\n)\n*\n*\n*\n*\n*\n*\n*\n*\n*\nD\nco,n\nco,n 1\nc\nn\nn 1\nn\nn\nn 1\nn 2\nI\nT\nt\nx\nx\nK\nT\nt\n-\n-\n-\n⎛\n⎞\nΔ\n-\n=\nε -ε\n+\nε +\nε -ε\n+ ε\n⎜\n⎟\nΔ\n⎝\n⎠\n-\n\nThis is called the \"velocity form\". The textbooks discuss pros and cons. Our simulator can work\nwith either; I've tended to use the latter.\n\n(1) Code one of these algorithms into the simulator. For the position form, you must give your\ncontroller the bias value on each call, as well as keep up with the sum. For either form, you must\nbe able to draw on the history arrays for error from previous time-steps. Recall that the simulator\nassumes that the controller is written in scaled variables, as shown above.\n\nHow do you test your code? Same as usual - ensure that it calculates simple cases correctly.\nYou're the engineer trying to produce a defensible answer from a technical tool - it's your job to\nfigure out how to test it.\n\n(2) Figure 5.25-1 was calculated from the analytic solution. The disturbance gain for input T1 is\n0.5 (units are K/K) and time constant is 60 s. Please reproduce the three traces with your\nsimulator.\n\n**** NOTE ****. In developing this problem, I discovered an error in my calculation from the\nanalytical solution. A new edition of Lesson 5 has been posted, with a corrected Figure 5.25-1.\nrevised 2006 Mar 31"
    },
    {
      "category": "Assignment",
      "title": "pset_8.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-450-process-dynamics-operations-and-control-spring-2006/1ffd34467b661ac534919b7faf13fe3b_pset_8.pdf",
      "content": "Spring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nProblem Set 8\nThis problem set concerns representing nonlinear processes with linear system models. Our\nexothermic reactor can exhibit multiple steady-states for some values of the input variables and\nparameters. In this case, how do you define a single \"reference condition\" for a linear model, as\nwe have in previous Lessons? Suppose we pick a single reference, and then fit the linear model\naround that condition. How well does that linear model describe changes near the reference\ncondition? at one of the other possible references? Finally, we use numerical methods to solve\nthe nonlinear model, looking particularly at the unstable behavior.\n\nUse the spreadsheet \"exothermic reactor for pset8.xls\" to calculate steady-state conditions. Use\nyour Matlab simulator code to solve the nonlinear problem.\n\n(1) First of all, we have a linear model expressed in the usual dynamic parameters: time constant,\ndamping coefficient, gains. The values assigned to those parameters depend on the reference\nconditions. Compare these values side-by-side at the two stable steady-states (use the conditions\nspecified in the spreadsheet, or find different ones, as you prefer). This illustrates how two\noperating conditions might differ in their dynamic behavior, upon disturbance.\n\n(2) Next, use the linear model to predict response to inputs: calculate the long-term T and CA for\na 20 K change in Ti at each stable steady state. For each steady state, use both sets of linear\nmodel parameters. Thus for a SINGLE inlet temperature change, you have a choice of 4\npredicted responses. What does this mean, and which do you give your boss?\n\n(3) In the long term after a step change, a new steady state is reached. Therefore, repeat (2) by\ncalculating the new steady-state using the spreadsheet. Discuss why (3) and (2) differ, and\nwhether the difference is significant. Do you trust these answers more than those of (2)?\n\n(4) Now the adventure: code the nonlinear equations into the process model section of your\nMatlab simulator. The simulator template already includes an extra output variable - use this to\nrepresent the composition. Calculate the transient response to the step input in (2). The long-\nterm response should be a new steady state - the one you calculated in (3). (This is open-loop,\nso leave the controller turned off.)\n\n(5) So far, you've calculated for two stable reference conditions. With the nonlinear model, you\nshould be able to start at the unstable condition, perturb it with a tiny pulse input, and see it move\nto one of the stable conditions. (The linear model predicts an exponential excursion - with the\nlinear approximation, we lose the ability to connect the multiple steady states.)\n\n(6) We might as well try to control this thing. With PI control, can you keep the process at the\nunstable reference condition? It may require some process and utility changes in addition to\ncontroller tuning - this is why we calculate dynamic behavior before building the equipment.\n\nrevised 2006 Mar 30"
    },
    {
      "category": "Resource",
      "title": "1_systems.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-450-process-dynamics-operations-and-control-spring-2006/87bcc0d1b481eeca283f3c385325d755_1_systems.pdf",
      "content": "Spring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 1: Processes and Systems\n1.0\ncontext and direction\nProcess control is an application area of chemical engineering - an\nidentifiable specialty for the ChE. It combines chemical process\nknowledge (how physics, chemistry, and biology work in operating\nequipment) and an understanding of dynamic systems, a topic important to\nmany fields of engineering. Thus study of process control allows\nchemical engineers to span their own field, as well as form a useful\nacquaintance with allied fields. Practitioners of process control find their\nskills useful in design, operation, and troubleshooting - major categories of\nchemical engineering practice.\n\nProcess control, like any coherent topic, is an integrated body of\nknowledge - it hangs together on a multidimensional framework, and\npractitioners draw from many parts of the framework in doing their work.\nYet in learning, we must receive information in sequence - following a\npath through multidimensional space. It is like entering a large building\nwith unlighted rooms, holding a dim flashlight and clutching a vague map\nthat omits some of the stairways and passages. How best to learn one's\nway around?\n\nIn these lessons we will attempt to move through a significant portion of\nthe structure - say, half a textbook - in about two weeks. Then we will\nrepeat the journey several times, each time inspecting the rooms more\nthoroughly. By this means we hope to gain, from the start, a sense of\ndoing an entire process control job, as well as approach each new topic in\nthe context of a familiar path.\n\n1.1\nthe job we will do, over and over\nWe encounter a process, learn how it behaves, specify how we wish to\ncontrol it, choose appropriate equipment, and then explore the behavior\nunder control to see if we have improved things.\n\n1.2\nintroducing a simple process\nA large tank must be filled with liquid from a supply line. One operator\nstands at ground level to operate the feed valve. Another stands on the\ntank, gauging its level with a dipstick. When the tank is near full, the stick\noperator will instruct the other to start closing the valve. Overfilling can\ncause spills, but underfilling will cause later process problems.\n\nrevised 2006 Jan 30\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 1: Processes and Systems\n\nTo learn how the process works, we write an overall material balance on\nthe tank.\n\niF\nV\ndt\nd\nρ\n=\nρ\n\n(1.2-1)\n\nThe tank volume V can be expressed in terms of the liquid level h. The\ninlet volumetric flow rate Fi may vary with time due to supply pressure\nfluctuations and valve manipulations by the operator. The liquid density\ndepends on the temperature, but will usually not vary significantly with\ntime during the course of filling. Thus (1.2-1) becomes\n\n)t(\nF\ndt\ndh\nA\ni\n=\n\n(1.2-2)\n\nWe integrate (1.2-2) to find the liquid level as a function of time.\n\n∫\n+\n=\nt\ni\ndt\n)t(\nF\nA\n)\n(\nh\nh\n\n(1.2-3)\n\n1.3\nplanning a control scheme\nClearly the liquid level h is important, and we will call it the controlled\nvariable. Our control objective is to bring h quickly to its target value hr\nand not exceed it. (To be realistic, we would specify allowable limits ± δh\non hr.) We will call the volumetric flow Fi the manipulated variable,\nbecause we adjust it to achieve our objective for the controlled variable.\n\nThe existing control scheme is to measure the controlled variable via\ndipstick, decide when the controlled variable is near target, and instruct\nrevised 2006 Jan 30\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 1: Processes and Systems\nthe valve operator to change the manipulated variable. The scheme suffers\nfrom\n- delay in measurement. Overfilling can occur if the stick operator\ncannot complete the measurement in time.\n- performance variations. Both stick and valve operators may vary in\nattentiveness and speed of execution.\n- resources required. There are better uses for operating personnel.\n- unsafe conditions. There is too much potential for chemical exposure.\n\nA new scheme is proposed: put a timer on the valve. Calculate the time\nrequired for filling from (1.2-3). Close the valve when time has expired.\n\nThe timing scheme would no longer require an operator to be on the tank\ntop, and with a motor-driven valve actuator the entire operation could be\ndirected from a control room. These are indeed improvements. However,\nthe timing scheme abandons a crucial virtue of the existing scheme: by\nmeasuring the controlled variable, the operators can react to unexpected\ndisturbances, such as changes in the filling rate. Using knowledge of the\ncontrolled variable to motivate changes to the manipulated variable is a\nfundamental control structure, known as feedback control. The proposed\ntiming scheme has no feedback mechanism, and thus cannot accommodate\nchanges to h(0) and Fi(t) in (1.2-3).\n\nAn alternative is to build on the feedback already inherent in the two-\noperator scheme, but to improve its operation. We propose an automatic\ncontroller that behaves according to the following controller algorithm:\n\nnear\ni\nmax\nr\nnear\ni\nmax\nr\nnear\nh\nh\nF\nF\nh\nh\nh\nh\nF\nF\nh\nh\n<\n=\n-\n>\n=\n-\n\n(1.3-1)\n\nAlgorithm (1.3-1) is an idealization of what the operators are already\ndoing: filling occurs at maximum flow until the level reaches a value hnear.\nBeyond this point, the flow decreases linearly, reaching zero when h\nreaches the target hr. The setting of hnear may be adjusted to tune the\ncontrol performance.\n\n1.4\nchoosing equipment\nWe need a sensor to replace the dipstick, a valve actuator to replace the\nvalve operator, and a controller mechanism to replace the stick operator.\nWe imagine a buoyant object floating on the liquid surface. The float is\nlinked to a lever that drives the valve stem. When the liquid level is low,\nthe float rests above it on a structure so that the valve is fully open.\n\nrevised 2006 Jan 30\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 1: Processes and Systems\n\n1.5\nprocess behavior under automatic control\nTypically these things work quite well. We predict its performance by\ncombining our process model (1.2-2) with the controller algorithm (1.3-1),\nwhich eliminates the manipulated variable between the equations. We\ntake the simple case in which Fmax does not vary during filling due to\npressure fluctuations, etc. For h less than hnear,\n\nt\nA\nF\n)\n(\nh\nh\nknown\n)\n(\nh\nF\ndt\ndh\nA\nmax\nmax\n+\n=\n=\n=\n\n(1.5-1)\n\nEquation (1.5-1) can be used to calculate tnear, the time at which h reaches\nhnear. For h greater than hnear,\n\n(\n)\n(\n)\nr\nmax\nnear\nnear\nr\nnear\nr\nnear\nr\nr\nnear\nfill\nr\nnear\nh\nh\ndh\nA\nF\nh(t\n)\nh\ndt\nh\nh\nh (t\nt\n)\nh\nh\nh\nh\nexp t\nh\nh\n-\n=\n=\n-\n⎡-\n-\n=\n-\n-\n⎢\n⎥\n-\n⎢\n⎥\n⎣\n⎦\n⎤\n(1.5-2)\nrevised 2006 Jan 30\n\nContent removed due to copyright restrictions.\n(To see a cut-away diagram of a toilet, go to\nhttp://www.toiletology.com/lg-views.shtml#cutaway2x)\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 1: Processes and Systems\n\nwhere the parameter tfill is the time required for the level to reach hr at\nflow Fmax, starting from an empty tank.\n\nr\nfill\nmax\nAh\nt\nF\n=\n\n(1.5-3)\n\nThe plot shows the filling profile from h(0) = 0.10hr with several values of\nhnear/hr. Certainly the filling goes faster if the flow can go instantaneously\nfrom Fmax to zero at hr; however this will not be practical, so that hnear will\nbe less than hr.\n\n0.2\n0.4\n0.6\n0.8\n1.2\n0.2\n0.4\n0.6\n0.8\n1.2\n1.4\nt/tfill\nh/hr\nhnear/hr = 0.95\n0.75\n0.50\n0.2\n0.4\n0.6\n0.8\n1.2\n0.2\n0.4\n0.6\n0.8\n1.2\n1.4\nt/tfill\nh/hr\nhnear/hr = 0.95\n0.75\n0.50\n\n1.6\ndefining 'system'\nIn Section 1.2, we introduced a process - a tank with feed piping - whose\ninventory varied in time. We thought of the process as a collection of\nequipment and other material, marked off by a boundary in space,\ncommunicating with its environment by energy and material streams.\n\n'Process' is a good notion, important to chemical engineers. Another\nuseful notion is that of 'system'. A system is some collection of equipment\nand operations, usually with a boundary, communicating with its\nenvironment by a set of input and output signals. By these definitions, a\nprocess is a type of system, but system is more abstract and general. For\nexample, the system boundary is often tenuous: suppose that our system\ncomprises the equipment in the plant and the controller in the central\ncontrol room, with radio communication between the two. A physical\nboundary would be in two pieces, at least; perhaps we should regard this\nrevised 2006 Jan 30\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 1: Processes and Systems\nsystem boundary as partly physical (around the chemical process) and\npartly conceptual (around the controller).\n\nFurthermore, the inputs and outputs of a system need not be material and\nenergy streams, as they are for a process. System inputs are \"things that\ncause\" or \"stimuli\"; outputs are \"things that are affected\" or \"responses\".\n\nsystem\ninputs\n(causes)\noutputs\n(responses)\n\nTo approach the problem of controlling our filling process in Section 1.3,\nwe thought of it in system terms: the primary output was the liquid level h\n-- not a stream, certainly, but an important response variable of the system\n-- and inlet stream Fi was an input. And peculiar as it first seems, if the\ntank had an outlet flow Fo, it would also be an input signal, because it\ninfluences the liquid level, just as does Fi.\n\nThe point of all this is to look at a single schematic and know how to view\nit as a process, and as a system. View it as a process (Fo as an outlet\nstream) to write the material balance and make fluid mechanics\ncalculations. View it as a system (Fo as an input) to analyze the dynamic\nbehavior implied by that material balance and make control calculations.\n\nSystem dynamics is an engineering science useful to mechanical,\nelectrical, and chemical engineers, as well as others. This is because\ntransient behavior, for all the variety of systems in nature and technology,\ncan be described by a very few elements. To do our job well, we must\nunderstand more about system dynamics -- how systems behave in time.\nThat is, we must be able to describe how important output variables react\nto arbitrary disturbances.\n\n1.7\nsystems within systems\nWe call something a system and identify its inputs and outputs as a first\nstep toward understanding, predicting, and influencing its behavior. In\nsome cases it may help to determine some of the structure within the\nsystem boundaries; that is, if we identify some component systems. Each\nof these, of course, would have inputs and outputs, too.\n\nsystem\ninputs\noutputs\n\nrevised 2006 Jan 30\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 1: Processes and Systems\n\nConsidering the relationship of these component systems, we recognize\nthe existence of intermediate variables within a system. Neither inputs\nnor outputs of the main system, they connect the component systems.\nIntermediate variables may be useful in understanding and influencing\noverall system behavior.\n\n1.8\nthe system of single-loop feedback control\nWhen we add a controller to a process, we create a single time-varying\nsystem; however, it is useful to keep process and controller conceptually\ndistinct as component systems. This is because a repertoire of relatively\nfew control schemes (relationships between process and controller)\nsuffices for myriad process applications. Using the terms we defined in\nSection 1.3, we represent a control scheme called single-loop feedback\ncontrol in this fashion:\n\nprocess\ncontroller\nfinal control\nelement\nsensor\nset point\nmanipulated\nvariable\nother inputs\nother\noutputs\ncontrolled\nvariable\nsystem\nprocess\ncontroller\nfinal control\nelement\nsensor\nset point\nmanipulated\nvariable\nother inputs\nother\noutputs\ncontrolled\nvariable\nsystem\n\nFigure 1.8-1 The single-loop feedback control system and its\nsubsystems\n\nWe will see this structure repeatedly. Inside the block called \"process\" is\nthe physical process, whatever it might be, and the block is the boundary\nwe would draw if we were doing an overall material or energy balance.\nHOWEVER, we remember that the inputs and outputs are NOT\nnecessarily the same as the material and energy streams that cross the\nprocess boundary. From among the outputs, we may select a controlled\nvariable (often a pressure, temperature, flow rate, liquid level, or\ncomposition) and provide a suitable sensor to measure it. From the inputs,\nwe choose a manipulated variable (often a flow rate) and install an\nappropriate final control element (often a valve). The measurement is fed\nto the controller, which decides how to adjust the manipulated variable to\nkeep the controlled variable at the desired condition: the set point. The\nrevised 2006 Jan 30\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 1: Processes and Systems\nother inputs are potential disturbances that affect the controlled variable,\nand so require action by the controller.\n\n1.9\nconclusion\nThink of a chemical process as a dynamic system that responds in\nparticular ways to its inputs. We attach other dynamic systems (sensor,\ncontroller, etc.) to that process in a single-loop feedback structure and\narrive at a new dynamic system that responds in different ways to the\ninputs. If we do our job well, it responds in better ways, so to justify all\nthe trouble.\n\nrevised 2006 Jan 30"
    },
    {
      "category": "Resource",
      "title": "2_math.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-450-process-dynamics-operations-and-control-spring-2006/1a418cec81861b3a0c0d69c71b66b07f_2_math.pdf",
      "content": "Spring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 2: Mathematics Review\n2.0\ncontext and direction\nImagine a system that varies in time; we might plot its output vs. time. A\nplot might imply an equation, and the equation is usually an ODE\n(ordinary differential equation). Therefore, we will review the math of the\nfirst-order ODE while emphasizing how it can represent a dynamic\nsystem. We examine how the system is affected by its initial condition\nand by disturbances, where the disturbances may be non-smooth, multiple,\nor delayed.\n\n2.1\nfirst-order, linear, variable-coefficient ODE\nThe dependent variable y(t) depends on its first derivative and forcing\nfunction x(t). When the independent variable t is t0, y is y0.\n\ny\n)\nt(\ny\n)t(\nKx\n)t(\ny\ndt\ndy\n)t(\na\n=\n=\n+\n\n(2.1-1)\n\nIn writing (2.1-1) we have arranged a coefficient of +1 for y. Therefore\na(t) must have dimensions of independent variable t, and K has\ndimensions of y/x. We solve (2.1-1) by defining the integrating factor p(t)\n\n∫\n=\n)\n(\nexp\n)\n(\nt\na\ndt\nt\np\n\n(2.1-2)\n\nNotice that p(t) is dimensionless, as is the quotient under the integral. The\nsolution\n\n∫\n+\n=\nt\nt\ndt\n)t(\na\n)t(\nx\n)t(\np\n)t(\np\nK\n)t(\np\n)\nt(\ny\n)\nt(\np\n)t(\ny\n\n(2.1-3)\n\ncomprises contributions from the initial condition y(t0) and the forcing\nfunction Kx(t). These are known as the homogeneous (as if the right-hand\nside were zero) and particular (depends on the right-hand side) solutions.\nIn the language of dynamic systems, we can think of y(t) as the response\nof the system to input disturbances Kx(t) and y(t0).\n\n2.2\nfirst-order ODE, special case for process control applications\nThe independent variable t will represent time. For many process control\napplications, a(t) in (2.1-1) will be a positive constant; we call it the time\nconstant τ.\n\ny\n)\nt(\ny\n)t(\nKx\n)t(\ny\ndt\ndy\n=\n=\n+\nτ\n\n(2.2-1)\n\nThe integrating factor (2.1-2) is\n\nrevised 2005 Jan 11\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 2: Mathematics Review\nτ\n=\nτ\n=\n∫\nte\ndt\nexp\n)t(\np\n\n(2.2-2)\n\nand the solution (2.1-3) becomes\n\n(\n)\ndt\n)t(\nx\ne\ne\nK\ne\ny\n)t(\ny\nt\nt\nt\nt\nt\nt\n∫\nτ\nτ\n-\nτ\n-\n-\nτ\n+\n=\n\n(2.2-3)\n\nThe initial condition affects the system response from the beginning, but\nits effect decays to zero according to the magnitude of the time constant -\nlarger time constants represent slower decay. If not further disturbed by\nsome x(t), the first order system reaches equilibrium at zero.\n\nHowever, most practical systems are disturbed. K is a property of the\nsystem, called the gain. By its magnitude and sign, the gain influences\nhow strongly y responds to x. The form of the response depends on the\nnature of the disturbance.\n\nExample: suppose x is a unit step function at time t1. Before we proceed\nformally, let us think intuitively. From (2.2-3) we expect the response y to\ndecay toward zero from IC y0. At time t1, the system will respond to being\nhit with a step disturbance. After a long time, there will be no memory of\nthe initial condition, and the system will respond only to the disturbance\ninput. Because this is constant after the step, we guess that the response\nwill also become constant.\n\nNow the math: from (2.2-3)\n\n(\n)\n(\n)\n(\n)\n⎟⎠\n⎞\n⎜⎝\n⎛-\n-\n+\n=\n-\nτ\n+\n=\nτ\n-\n-\nτ\n-\n-\nτ\nτ\n-\nτ\n-\n-\n∫\nt\nt\nt\nt\nt\nt\nt\nt\nt\nt\ne\n)\nt\nt(\nKU\ne\ny\ndt\n)\nt\nt(\nU\ne\ne\nK\ne\ny\n)t(\ny\n\n(2.2-4)\n\nFigure 2.2-1 shows the solution. Notice that the particular solution makes\nno contribution before time t1. The initial condition decays, and with no\ndisturbance would continue to zero. At t1, however, the system responds\nto the step disturbance, approaching constant value K as time becomes\nlarge. This immediate response, followed by asymptotic approach to the\nnew steady state, is characteristic of first-order systems. Because the\nresponse does not track the step input faithfully, the response is said to lag\nbehind the input; the first-order system is sometimes called a first-order\nlag.\n\nrevised 2005 Jan 11\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 2: Mathematics Review\n0.5\ndisturbance\n0.5\n1.5\n2.5\ntime\nresponse\nt0\nt1\ny0\nK\n0.5\ndisturbance\n0.5\n1.5\n2.5\ntime\nresponse\nt0\nt1\ny0\nK\n\nFigure 2.2-1 first-order response to initial condition and step\ndisturbance\n\n2.3\npiecewise integration of non-smooth disturbances\nThe solution (2.2-3) is applied over succeeding time intervals, each\nfeaturing an initial condition (from the preceding interval) and disturbance\ninput.\n\n(\n)\n(\n)\n⎪\n⎪\n⎪\n⎪\n⎩\n⎪⎪\n⎪\n⎪\n⎨\n⎧\n<\n<\nτ\n+\n<\n<\nτ\n+\n=\n∫\n∫\nτ\nτ\n-\nτ\n-\n-\nτ\nτ\n-\nτ\n-\n-\n.\netc\nt\nt\nt\ndt\n)t(\nx\ne\ne\nK\ne)\nt(\ny\nt\nt\nt\ndt\n)t(\nx\ne\ne\nK\ne)\nt(\ny\n)t(\ny\nt\nt\nt\nt\nt\nt\nt\nt\nt\nt\nt\nt\n\n(2.3-1)\n\nExample: suppose\n\nrevised 2005 Jan 11\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 2: Mathematics Review\n(\n)\n⎪⎩\n⎪⎨\n⎧\n<\n<\n<\n-\n<\n<\n=\n=\n=\n+\nt\nt\nt\nt\nx\n)\n(\ny\nx\ny\ndt\ndy\n\n(2.3-2)\n\nIn this problem, variables t, x, and y should be presumed to have\nappropriate, if unstated, units; in these units, both gain and time constant\nare of magnitude 1. From (2.3-1),\n\n(\n)\n(\n)\n(\n)\n⎪⎩\n⎪⎨\n⎧\n<\n<\n<\n+\n-\n<\n<\n=\n-\n-\n-\n-\n-\nt\ne\ne\nt\ne\nt\nt\n)t(\ny\nt\nt\n\n(2.3-3)\n\nWith a zero initial condition and no disturbance, the system remains at\nequilibrium until the ramp disturbance begins at t = 1. Then the output\nimmediately rises in response, lagging behind the linear ramp. At t = 2,\nthe disturbance ceases, and the output decays back toward equilibrium.\n\nrevised 2005 Jan 11\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 2: Mathematics Review\n0.5\n1.5\n2.5\ndisturbance\n0.1\n0.2\n0.3\n0.4\n0.5\n0.6\n0.7\n0.8\ntime\nresponse\n0.5\n1.5\n2.5\ndisturbance\n0.1\n0.2\n0.3\n0.4\n0.5\n0.6\n0.7\n0.8\ntime\nresponse\n\n2.4\nmultiple disturbances and superimposition\nSystems can have more than one input. Consider a first-order system with\ntwo disturbance functions.\n\ny\n)\nt(\ny\n)t(\nx\nK\n)t(\nx\nK\n)t(\ny\ndt\ndy\n=\n+\n=\n+\nτ\n\n(2.4-1)\n\nApplying (2.2-3) and distributing the integral across the disturbances, we\nfind that the effects of the disturbances on y are additive.\n\n(\n)\ndt\n)t(\nx\ne\ne\nK\ndt\n)t(\nx\ne\ne\nK\ne\ny\n)t(\ny\nt\nt\nt\nt\nt\nt\nt\nt\nt\nt\n∫\n∫\nτ\nτ\n-\nτ\nτ\n-\nτ\n-\n-\nτ\n+\nτ\n+\n=\n(2.4-2)\n\nThis additive behavior is a happy characteristic of linear systems. Thus\nanother way to view problem (2.4-1) is to decompose it into component\nproblems. That is, define\n\nH\ny\ny\ny\ny\n+\n+\n=\n\n(2.4-3)\n\nrevised 2005 Jan 11\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 2: Mathematics Review\nand write (2.4-1) in three equations. We put the initial condition with no\ndisturbances, and each disturbance with a zero initial condition.\n\n)\nt(\ny\n)t(\nx\nK\n)t(\ny\ndt\ndy\n)\nt(\ny\n)t(\nx\nK\n)t(\ny\ndt\ndy\ny\n)\nt(\ny\n)t(\ny\ndt\ndy\nH\nH\nH\n=\n=\n+\nτ\n=\n=\n+\nτ\n=\n=\n+\nτ\n\n(2.4-4)\n\nEquations and initial conditions (2.4-4) can be summed to recover the\noriginal problem specification (2.4-1). The solutions are\n\n(\n)\ndt\n)t(\nx\ne\ne\nK\n)t(\ny\ndt\n)t(\nx\ne\ne\nK\n)t(\ny\ne\ny\n)t(\ny\nt\nt\nt\nt\nt\nt\nt\nt\nt\nt\nH\n∫\n∫\nτ\nτ\n-\nτ\nτ\n-\nτ\n-\n-\nτ\n=\nτ\n=\n=\n\n(2.4-5)\n\nand of course these solutions can be added to recover original solution\n(2.4-2). Thus we can view the problem of multiple disturbances as a\nsystem responding to the sum of the disturbances, or as the sum of\nresponses from several identical systems, each responding to a single\ndisturbance.\n\nExample: consider\n\n)\n(\ny\n)\nt(\nU\n)1\nt(\nU\ny\ndt\ndy\n=\n-\n-\n-\n=\n+\n\n(2.4-6)\n\nWe first place the equation in standard form, in which the coefficient of y\nis +1.\n\n)\n(\ny\n)\nt(\nU\n)1\nt(\nU\ny\ndt\ndy\n=\n-\n-\n-\n=\n+\n\n(2.4-7)\n\nEquation (2.4-7) shows us that the time constant is 1, and that the system\nresponds to the first disturbance with a gain of 3, and to the second with a\ngain of -4. The solution is\n\n(\n)\n(\n)\n)\nt(\n)\nt(\nt\ne\n)3\nt(\nU\ne\n)1\nt(\nU\ne\ny\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n+\n=\n\n(2.4-8)\n\nrevised 2005 Jan 11\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 2: Mathematics Review\nIn Figure 2.4-1, the individual solution components are plotted as solid\ntraces; their sum, which is the system response, is a dashed trace. Notice\nhow the first-order lag responds to each new disturbance as it occurs.\n0.5\ndisturbances\n-5\n-4\n-3\n-2\n-1\ntime\nresponse\n0.5\ndisturbances\n-5\n-4\n-3\n-2\n-1\ntime\nresponse\n)\n\nFigure 2.4-1 first-order response to multiple disturbances\n\nWriting the step functions explicitly in solution (2.4-8) emphasizes that\nparticular disturbances do not influence the solution until the time of their\noccurrence. For example, if they were omitted, some deceptively correct\nbut inappropriate rearrangement would lead to errors.\n\n(\n)\n(\n)\nt(\n)\nt(\nt\n)\nt(\n)\nt(\nt\n)\nt(\n)\nt(\nt\ne\ne\ne\ne\ne\ne\ne\ne\ne\ny\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n+\n-\n+\n-\n=\n+\n-\n-\n+\n=\n-\n-\n-\n+\n=\n(do not do this!)\n(2.4-9)\n\nThis notation at least implies that two of the exponential functions have\ndelayed onsets. However, further correct-but-inappropriate rearrangement\nmakes things even worse.\n\nrevised 2005 Jan 11\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 2: Mathematics Review\n(\n)\nt\nt\nt\nt\n)\nt(\n)\nt(\nt\ne\ne\ne\ne\ne\ne\ne\ne\ne\ne\ne\ny\n-\n-\n-\n-\n-\n-\n-\n-\n-\n+\n-\n+\n-\n=\n+\n-\n+\n-\n=\n+\n-\n+\n-\n=\n(do not do this!)\n(2.4-10)\n\nThe incorrect solutions are plotted with (2.4-8) in Figure 2.4-2. Equation\n(2.4-9) has become discontinuous - the response takes non-physical leaps\nat the onset of each new disturbance. Equation (2.4-10) has lost all\ndependence on the disturbances and decays from a non-physical initial\ncondition. Even with the mistakes, both incorrect solutions lead to the\ncorrect long-term condition.\n\n-5\ntime\nresponse\nsolution\neq 2.4.9\neq 2.4.10\n\nFigure 2.4-2 comparison of correct and incorrect solutions\n\n2.5\ndelayed response to disturbances\nConsider a system that reacts to a disturbance, but only after some\nintervening time interval θ has passed. That is\n\ny\n)\nt(\ny\n)\nt(\nKx\n)t(\ny\ndt\ndy\n=\nθ\n-\n=\n+\nτ\n\n(2.5-1)\n\nEquation (2.5-1) shows the dependence of y, at any time t, on the value of\nx at earlier time t - θ. The solution is written directly from (2.2-3).\n\n(\n)\ndt\n)\nt(\nx\ne\ne\nK\ne\ny\n)t(\ny\nt\nt\nt\nt\nt\nt\nθ\n-\nτ\n+\n=\n∫\nτ\nτ\n-\nτ\n-\n-\n\n(2.5-2)\n\nWe must integrate the disturbance considering the time delay. Take as an\nexample a disturbance x(t) occurring at time t1. The plot shows the\nrevised 2005 Jan 11\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 2: Mathematics Review\ndisturbance, as well as the disturbance as the system experiences it, which\nbegins at time t1 + θ. We could express this disturbance-as-experienced as\nsome new function x1(t), occurring at time t1 + θ.\n\nt0\nt1\nt1 + θ\nt0 - θ\nt1\nξ\nt\nt1 - θ\ndisturbance\nas it occurs\ndisturbance as\nexperienced by\nsystem\nx(t)\nx(t - θ) = x1(t)\nx(ξ)\nt0\nt1\nt1 + θ\nt0 - θ\nt1\nξ\nt\nt1 - θ\ndisturbance\nas it occurs\ndisturbance as\nexperienced by\nsystem\nx(t)\nx(t - θ) = x1(t)\nx(ξ)\n\nAlternatively, we could define a new time variable\n\nθ\n-\n=\nξ\nt\n\n(2.5-3)\n\nand write the input as x(ξ). The integral in (2.5-2) becomes, then,\n\nξ\nξ\n=\n=\nθ\n-\n∫\n∫\n∫\nξ\nθ\n-\nτ\nθ\n+\nξ\nτ\nτ\nd\n)\n(\nx\ne\ndt\n)t(\nx\ne\ndt\n)\nt(\nx\ne\nt\nt\nt\nt\nt\nt\nt\n\n(2.5-4)\n\nTherefore, solution (2.5-2) becomes\n\n(\n)\nξ\nξ\nτ\n+\n=\n∫\nξ\nθ\n-\nτ\nξ\nτ\nθ\nτ\n-\nτ\n-\n-\nd\n)\n(\nx\ne\ne\ne\nK\ne\ny\n)t(\ny\nt\nt\nt\nt\n\n(2.5-5)\n\nExample: consider a step disturbance at time t = 2 that affects the system\n3 time units later.\n\n)\nt(\nU\n)t(\nx\n)\n(\ny\n)\nt(\nx\ny\ndt\ndy\n-\n=\n=\n-\n=\n+\n\n(2.5-6)\n\nUsing (2.5-5)\n\nrevised 2005 Jan 11\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 2: Mathematics Review\n[\n]\n[\n]\n[\n]\n)\nt(\nt\nt\nt\nt\nt\nt\nt\nt\ne\n)\nt(\nU\ne\ne\n)\nt(\nU\ne\ne\ne\ne)\nt(\nU\ne)\n(\nU\ne\ne\nd)\n(\nU\ne\nd\n)\n(\nU\ne\ne\ne\nd\n)\n(\nU\ne\ne\ne\ny\n-\n-\n+\n-\n+\n-\n-\n-\n-\nξ\nξ\n-\nξ\nξ\n-\nξ\n-\nξ\n-\nξ\n-\n-\n-\n=\n-\n-\n=\n-\n-\n-\n=\n⎥⎦\n⎤\n⎢⎣\n⎡\n-\nξ\n=\n⎥⎥\n⎦\n⎤\n⎢⎢\n⎣\n⎡\nξ\n-\nξ\n+\nξ\n-\nξ\n=\nξ\n-\nξ\n=\n∫\n∫\n∫\n\n(2.5-7)\n\nFigure 2.5-1 shows that a typical first-order lag step response occurs 3\ntime units after being disturbed at t = 2.\n\n0.5\ndisturbances\n0.2\n0.4\n0.6\n0.8\ntime\nresponse\n0.5\ndisturbances\n0.2\n0.4\n0.6\n0.8\ntime\nresponse\n\nFigure 2.5-1 step response of first order system with dead time\n\nThe time delay in responding to a disturbance is often called dead time.\nDead time is different from lag. Lag occurs because of the combination of\ny and its derivative on the left-hand side of the equation. Dead time\nrevised 2005 Jan 11\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 2: Mathematics Review\noccurs because of a time delay in processing a disturbance on the right-\nhand side.\n\n2.6\nconclusion\nPlease become comfortable with handling ODEs. View them as systems;\nidentify their inputs and outputs, their gains and time parameters.\n\nrevised 2005 Jan 11"
    },
    {
      "category": "Resource",
      "title": "3_blend_tank.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-450-process-dynamics-operations-and-control-spring-2006/28cd628b5903b0bbabaef96f0d82f1d1_3_blend_tank.pdf",
      "content": "Spring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 3: The Blending Tank\n3.0\ncontext and direction\nA particularly simple process is a tank used for blending. Just as promised\nin Section 1.1, we will first represent the process as a dynamic system and\nexplore its response to disturbances. Then we will pose a feedback control\nscheme. We will briefly consider the equipment required to realize this\ncontrol. Finally we will explore its behavior under control.\n\nDYNAMIC SYSTEM BEHAVIOR\n\n3.1\nmath model of a simple continuous holding tank\nImagine a process stream comprising an important chemical species A in\ndilute liquid solution. It might be the effluent of some process, and we\nmight wish to use it to feed another process. Suppose that the solution\ncomposition varies unacceptably with time. We might moderate these\nswings by holding up a volume in a stirred tank: intuitively we expect the\nchanges in the outlet composition to be more moderate than those of the\nfeed stream.\n\nF, CAi\nF, CAo\nvolume V\nF, CAi\nF, CAo\nvolume V\n\nOur concern is the time-varying behavior of the process, so we should\ntreat our process as a dynamic system. To describe the system, we begin\nby writing a component material balance over the solute.\n\nAo\nAi\nAo\nFC\nFC\nVC\ndt\nd\n-\n=\n\n(3.1-1)\n\nIn writing (3.1-1) we have recognized that the tank operates in overflow:\nthe volume is constant, so that changes in the inlet flow are quickly\nduplicated in the outlet flow. Hence both streams are written in terms of a\nsingle volumetric flow F. Furthermore, for now we will regard the flow as\nconstant in time.\n\nBalance (3.1-1) also represents the concentration of the outlet stream, CAo,\nas the same as the average concentration in the tank. That is, the tank is a\nperfect mixer: the inlet stream is quickly dispersed throughout the tank\nvolume. Putting (3.1-1) into standard form,\nrevised 2005 Jan 13\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 3: The Blending Tank\n\nAi\nAo\nAo\nC\nC\ndt\ndC\nF\nV\n=\n+\n\n(3.1-2)\n\nwe identify a first-order dynamic system describing the response of the\noutlet concentration CAo to disturbances in the inlet concentration CAi.\nThe speed of response depends on the time constant, which is equal to the\nratio of tank volume and volumetric flow. Although both of these\nquantities influence the dynamic behavior of the system, they do so as a\nratio. Hence a small tank and large tank may respond at the same rate, if\ntheir flow rates are suitably scaled.\n\nSystem (3.1-2) has a gain equal to 1. This means that a sustained\ndisturbance in the inlet concentration is ultimately communicated fully to\nthe outlet.\n\nBefore solving (3.1-2) we specify a reference condition: we prefer that CAo\nbe at a particular value CAo,r. For steady operation in the desired state,\nthere is no accumulation of solute in the tank.\n\nr,\nAo\nr,\nAi\nr\nAo\nC\nC\ndt\ndC\nF\nV\n-\n=\n=\n\n(3.1-3)\n\nThus, as expected, steady outlet conditions require a steady inlet at the\nsame concentration; call it CA,r. Let us take this reference condition as an\ninitial condition in solving (3.1-2). The solution is\n\ndt\n)t(\nC\ne\ne\ne\nC\n)t(\nC\nAi\nt\nt\nt\nt\nr,\nA\nAo\n∫\nτ\nτ\n-\nτ\n-\nτ\n+\n=\n\n(3.1-4)\n\nwhere the time constant is\n\nF\nV\n=\nτ\n\n(3.1-5)\n\nEquation (3.1-4) describes how outlet concentration CAo varies as CAi\nchanges in time. In the next few sections we explore the transient\nbehavior predicted by (3.1-4).\n\n3.2\nresponse of system to steady input\nSuppose inlet concentration remains steady at CA,r. Then from (3.1-4)\n\nrevised 2005 Jan 13\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 3: The Blending Tank\nr,\nA\nt\nt\nr,\nA\nt\nr,\nA\nt\nt\nr,\nA\nt\nt\nr,\nA\nAo\nC\ne\ne\nC\ne\nC\ne\nC\ne\ne\nC\nC\n=\n⎟⎠\n⎞\n⎜⎝\n⎛\n-\n+\n=\nτ\nτ\n+\n=\nτ\nτ\n-\nτ\n-\nτ\nτ\n-\nτ\n-\n\n(3.2-1)\n\nEquation (3.2-1) merely confirms that the system remains steady if not\ndisturbed.\n\n3.3\nleaning on the system - response to step disturbance\nStep functions typify disturbances in which an input variable moves\nrelatively rapidly to some new value and remains there. Suppose that\ninput CAi is initially at the reference value CA,r and changes at time t1 to\nvalue CA1. Until t1 the outlet concentration is given by (3.2-1). From the\nstep at t1, the outlet concentration begins to respond.\n\n⎟⎠\n⎞\n⎜⎝\n⎛-\n+\n=\n⎟⎠\n⎞\n⎜⎝\n⎛\n-\n+\n=\n>\nτ\nτ\n+\n=\nτ\n-\n-\nτ\n-\n-\nτ\nτ\nτ\n-\nτ\n-\n-\nτ\nτ\n-\nτ\n-\n-\n)\nt\nt(\nA\n)\nt\nt(\nr,\nA\nt\nt\nt\nA\n)\nt\nt(\nr,\nA\nt\nt\nt\nA\nt\n)\nt\nt(\nr,\nA\nAo\ne\nC\ne\nC\ne\ne\ne\nC\ne\nC\nt\nt\ne\nC\ne\ne\nC\nC\n\n(3.3-1)\n\nIn Figure 3.3-1, CA,r = 1 and CA1 = 0.8 in arbitrary units; t1 has been set\nequal to τ. At sufficiently long time, the initial condition has no influence\nand the outlet concentration becomes equal to the new inlet concentration.\nAfter time equal to three time constants has elapsed, the response is about\n95% complete - this is typical of first-order systems.\n\nIn Section 3.1, we suggested that the tank would mitigate the effect of\nchanges in the inlet composition. Here we see that the tank will not\neliminate a step disturbance, but it does soften its arrival.\nrevised 2005 Jan 13\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 3: The Blending Tank\n0.7\n0.8\n0.9\n1.1\nt/τ\nresponse\n0.5\ndisturbance\n\nFigure 3.3-1 first-order response to step disturbance\n\n3.4\nkicking the system - response to pulse disturbance\nPulse functions typify disturbances in which an input variable moves\nrelatively rapidly to some new value and subsequently returns to normal.\nSuppose that CAi changes to CA1 at time t1 and returns to CA,r at t2. Then,\ndrawing on (3.2-1) and (3.3-1),\n\n⎪\n⎪\n⎪\n⎩\n⎪\n⎪\n⎪\n⎨\n⎧\n<\n⎟⎠\n⎞\n⎜⎝\n⎛-\n+\n⎥⎦\n⎤\n⎢⎣\n⎡\n⎟⎠\n⎞\n⎜⎝\n⎛-\n+\n<\n<\n⎟⎠\n⎞\n⎜⎝\n⎛-\n+\n<\n<\n=\nτ\n-\n-\nτ\n-\n-\nτ\n-\n-\nτ\n-\n-\nτ\n-\n-\nτ\n-\n-\nt\nt\ne\nC\ne\ne\nC\ne\nC\nt\nt\nt\ne\nC\ne\nC\nt\nt\nC\nC\n)\nt\nt(\nr,\nA\n)\nt\nt(\n)\nt\nt(\nA\n)\nt\nt(\nr,\nA\n)\nt\nt(\nA\n)\nt\nt(\nr,\nA\nr,\nA\nAo\n\n(3.4-1)\n\nIn Figure 3.4-1, CA,r = 0.6 and CA1 = 1 in arbitrary units; t1 has been set\nequal to τ and t2 to 2.5τ. We see that the tank has softened the pulse and\nreduced its peak value. A pulse is a sequence of two counteracting step\nchanges. If the pulse duration is long (compared to the time constant τ),\nrevised 2005 Jan 13\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 3: The Blending Tank\nthe system can complete the first step response before being disturbed by\nthe second.\n0.4\n0.6\n0.8\nt/τ\nresponse\n0.5\ndisturbance\n\nFigure 3.4-1 first-order response to pulse disturbance\n\n3.5\nshaking the system - response to sine disturbance\nSine functions typify disturbances that oscillate. Suppose the inlet\nconcentration varies around the reference value with amplitude A and\nfrequency ω, which has dimensions of radians per time.\n\n(\n)t\nsin\nA\nC\nC\nr,\nA\nAi\nω\n+\n=\n\n(3.5-1)\n\nFrom (3.1-4),\n\n(\n)\n(\n)\nωτ\n-\n+\nω\nτ\nω\n+\n+\nτ\nω\n+\nωτ\n-\n=\n-\nτ\n-\nt\nr,\nA\nAo\ntan\nt\nsin\nA\ne\nA\nC\nC\n\n(3.5-2)\n\nrevised 2005 Jan 13\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 3: The Blending Tank\nSolution (3.5-2) comprises the mean value CA,r, a term that decays with\ntime, and a continuing oscillation term. Thus, the long-term system\nresponse to the sine input is to oscillate at the same frequency ω. Notice,\nhowever, that the amplitude of the output oscillation is diminished by the\nsquare-root term in the denominator. Notice further that the outlet\noscillation lags the input by a phase angle tan-1(-ωτ).\n\nIn Figure 3.5-1, CA,r = 0.8 and A = 0.5 in arbitrary units; ωτ has been set\nequal to 2.5 radians, and τ to 1 in arbitrary units. The decaying portion of\nthe solution makes a negligible contribution after the first cycle. The\nphase lag and reduced amplitude of the solution are evident; our tank has\nmitigated the inlet disturbance.\n0.2\n0.4\n0.6\n0.8\n1.2\n1.4\nt/τ\ninput and response\ninput\ndecaying part\ncontinuing part\nsolution\n\nFigure 3.5-1 first-order response to sine disturbance\n\n3.6\nfrequency response and the Bode plot\nThe long-term response to a sine input is the most important part of the\nsolution; we call it the frequency response of the system. We will\nexamine the frequency response for an abstract first order system.\n(Because we wish to focus on the oscillatory response, we will write (3.6-\n1) so that x and y vary about zero. The effect of a non-zero bias term can\nbe seen in (3.5-1) and (3.5-2).)\n\nrevised 2005 Jan 13\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 3: The Blending Tank\nfr\nA\nfr\nfr\nfr\nK\nx\ny\nR\n:\nratio\namplitude\n)\n(\ntan\n:\nangle\nphase\nKA\ny\n:\namplitude\n)\nt\nsin(\ny\ny\n:\nresp\nfreq\n)t\nsin(\nA\nx\n:\ninput\nKx\ny\ndt\ndy\nτ\n:\nsystem\nτ\nω\n+\n=\n=\nωτ\n-\n=\nφ\nτ\nω\n+\n=\nφ\n+\nω\n=\nω\n=\n=\n+\n-\n\n(3.6-1)\n\nThe frequency response is a sine function, characterized by an amplitude,\nfrequency, and phase angle. The amplitude and phase angle depend on\nsystem properties (τ and K) and characteristics of the disturbance input (ω\nand A). It is convenient to show the frequency dependence on a Bode\nplot, Figure 3.6-1.\n\nThe Bode plot abscissa is ω in radians per time unit; the scale is\nlogarithmic. The frequency may be normalized by multiplying by the\nsystem time constant. Thus plotting ω is good for a particular system;\nplotting ωτ is good for systems in general.\n\nThe upper ordinate is the amplitude ratio, also on logarithmic scale. RA is\noften normalized by dividing by the system gain K. The lower ordinate is\nthe phase angle, in degrees on a linear scale.\n\nIn Figure 3.6-1, the coordinates have been normalized to depict first-order\nsystems in general; the particular point represents conditions in the\nexample of Section 3.5.\n\nFor a first order system, the normalized amplitude ratio decreases from 1\nto 0 as frequency increases. Similarly, the phase lag decreases from 0 to\n-90o. Both these measures indicate that the system can follow slow inputs\nfaithfully, but cannot keep up at high frequencies.\n\nAnother way to think about it is to view the system as a low-pass filter:\nvariations in the input signal are softened in the output, particularly for\nhigh frequencies.\n\nThe slope of the amplitude ratio plot approaches zero at low frequency;\nthe high frequency slope approaches -1. These two asymptotes intersect at\nthe corner frequency, the reciprocal of the system time constant. At the\ncorner frequency, the phase lag is -45o.\n\nrevised 2005 Jan 13\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 3: The Blending Tank\nτ\n=\nω\ncorner\n\n(3.6-2)\n\n0.01\n0.10\n1.00\n0.01\n0.1\namplitude ratio/gain\n-90\n-80\n-70\n-60\n-50\n-40\n-30\n-20\n-10\n0.01\n0.1\nωτ (radians)\nphase angle (deg)\n0.01\n0.10\n1.00\n0.01\n0.1\namplitude ratio/gain\n-90\n-80\n-70\n-60\n-50\n-40\n-30\n-20\n-10\n0.01\n0.1\nωτ (radians)\nphase angle (deg)\n\nFigure 3.6-1: Bode plot for first-order system\n\n3.7\nstability of a system\nIf we disturb our system, will it return to good operation, or will it get out\nof hand? This is asking whether the system is stable. We define stability\nas \"bounded output for a bounded input\". That means that\n- a ramp disturbance is not fair - even stable systems can get into\ntrouble if the input keeps rising.\n- a stable system should handle a step change in input, ultimately\ncoming to some new steady state. (We must be realistic, however.\nIf the system is so sensitive that a small input step leads to an\nunacceptably high, though steady, output, we might declare it\nunstable for practical purposes.)\nrevised 2005 Jan 13\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 3: The Blending Tank\n- it should also handle a sine input; here the result is in general not\nsteady state, because the output may oscillate. (Thus we\ndistinguish between 'steady state' and 'long-term stability'.)\n\nThe solutions for the typical bounded step, pulse, and sine disturbances,\ngiven in Sections 3.3 through 3.5, show no terms that grow with time, so\nlong as the time constant τ is a positive value. For these categories of\nbounded input, at least, a first-order system appears to be stable. We will\nneed to examine stability again when we introduce automatic control to\nour process.\n\n3.8\nconcentration control in a blending tank\nIn Section 3.1 we described how variations in stream composition could\nbe moderated by passing the stream through a larger volume - a holding\ntank. Let us be more ambitious and seek to control the outlet composition:\nwe add a small inlet stream Fc of concentrated solution to the tank. This\nwill allow us to adjust the composition in response to disturbances.\n\nF, CAi\nF, CAo\nvolume V\nFc, CAc\nF, CAi\nF, CAo\nvolume V\nFc, CAc\n\nOur analysis begins as in Section 3.1 with a component material balance.\n\n(\n)\nAo\nc\nAc\nc\nAi\nAo\nC\nF\nF\nC\nF\nFC\nVC\ndt\nd\n+\n-\n+\n=\n\n(3.8-1)\n\nAs before, we place (3.8-1) in standard form (response variable on the left\nwith a coefficient of +1).\n\nc\nc\nAc\nAi\nc\nAo\nAo\nc\nF\nF\nF\nF\nC\nC\nF\nF\nC\ndt\ndC\nF\nF\nF\nV\n+\n+\n+\n=\n+\n+\n\n(3.8-2)\n\nNotice that our equation coefficients each contain the input variable Fc.\nNotice, as well, that for dilute CAo and concentrated CAc stream Fc\nrevised 2005 Jan 13\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 3: The Blending Tank\n(however it may vary) will not be very large in comparison to the main\nflow F. If this is the case, we may be justified in making an engineering\napproximation: neglecting the ratio Fc/F in comparison to 1. Thus\n\nc\nAc\nAi\nAo\nAo\nF\nF\nC\nC\nC\ndt\ndC\nF\nV\n+\n=\n+\n\n(3.8-3)\n\nNow we have a linear first-order system. Comparison with (3.1-2) shows\nthe same time constant V/F and the same unity gain for inlet concentration\ndisturbances. There is a new input Fc, whose influence on CAo (i.e., gain)\nincreases with high concentration CAc and decreases with large\nthroughflow F.\n\n3.9\nuse of deviation variables in solving equations\nIn process control applications, we usually have some desired operating\ncondition. We now write system model (3.8-3) at the target steady state.\nAll variables are at reference values, denoted by subscript r.\n\nr,c\nAc\nr,\nAi\nr,\nAo\nF\nF\nC\nC\nC\n+\n=\n\n(3.9-1)\n\nWe recognize that deviations from these reference conditions represent\nerrors to be corrected. Hence we recast our system description (3.8-3) in\nterms of deviation variables; we do this by subtracting (3.9-1) from (3.8-\n3).\n\n(\n) (\n) (\n)\n(\n)\n'\nc\nAc\n'\nAi\n'\nAo\n'\nAo\nr,c\nc\nAc\nr,\nAi\nAi\nr,\nAo\nAo\nr,\nAo\nAo\nF\nF\nC\nC\nC\ndt\ndC\nF\nV\nF\nF\nF\nC\nC\nC\nC\nC\ndt\nC\nC\nd\nF\nV\n+\n=\n+\n-\n+\n-\n=\n-\n+\n-\n\n(3.9-2)\n\nwhere we indicate a deviation variable by a prime superscript. The target\ncondition of a deviation variable is zero, indicating that the process is\noperating at desired conditions. Using deviation variables\n\n- makes conceptual sense for process control because they indicate\ndeviations from desired states\n- makes the mathematical descriptions simpler\n\nThus we shall use deviation variables for derivations and modeling. For\ndoing process control (computing valve positions, e.g.) we will return to\nthe physical variables. We can recover the physical variable by adding its\ndeviation variable to its reference value. For example,\n\n)t(\nC\nC\n)t(\nC\n'\nAo\nr,\nAo\nAo\n+\n=\n\n(3.9-3)\nrevised 2005 Jan 13\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 3: The Blending Tank\n\nwhere we emphasize the variables that are time-varying.\n\n3.10\nintegration from zero initial conditions\nAs a rule, we will presume that our systems are initially at the reference\ncondition. That is, the initial conditions for our differential equations are\nzero. Integrating (3.9-2) we find\n\ndt\n)t(\nF\ne\nF\nC\ne\ndt\n)t(\nC\ne\ne\nC\n'\nc\nt\nt\nAc\nt\n'\nAi\nt\nt\nt\n'\nAo\n∫\n∫\nτ\nτ\n-\nτ\nτ\n-\nτ\n+\nτ\n=\n\n(3.10-1)\n\nEquation (3.10-1) shows how the outlet composition deviates from its\ndesired value CAo,r under disturbances to inlet composition CAi and the\nflow rate of the concentrated makeup stream Fc, where both of these are\nalso expressed as deviations from reference values. Equation (3.10-1) is\nanalogous to (3.1-4) for the simpler holding tank.\n\n3.11\nresponse to step changes\nProceeding as in Section 3.3, we presume a step in inlet composition of\nΔCAi at time t1 and of ΔFc in makeup flow at time t2.\n\n⎟⎠\n⎞\n⎜⎝\n⎛-\nΔ\n-\n+\n⎟⎠\n⎞\n⎜⎝\n⎛-\nΔ\n-\n=\nΔ\n-\nτ\n+\nΔ\n-\nτ\n=\nτ\n-\n-\nτ\n-\n-\nτ\nτ\n-\nτ\nτ\n-\n∫\n∫\n)\nt\nt(\nAc\nc\n)\nt\nt(\nAi\nt\nt\nt\nAc\nc\nt\nt\nt\nt\nAi\nt\n'\nAo\ne\nF\nC\nF\n)\nt\nt(\nU\ne\nC\n)\nt\nt(\nU\ndt\ne\nF\nC\nF\n)\nt\nt(\nU\ne\ndt\ne\nC\n)\nt\nt(\nU\ne\nC\n\n(3.11-1)\n\nCAo′ exhibits a first-order response to each of these step inputs.\n\nExample: try these numbers:\nV = 6 m3\nt1 = 0 s\nF = 0.02 m3 s-1\nΔCAi = 1 kg m-3\nFcs = 10-4 m3 s-1\nt2 = 120 s\nCAis = 8 kg m-3\nΔFc = -5×10-5 m3 s-1\nCAos = 10 kg m-3\n\nCAc = 400 kg m-3\n\nFirst, verify the steady-state material balance (3.9-1) for the desired\nconditions:\n\ns\nm\ns\nm\n)\n.0\n(\n)\n.0\n(\nm\nkg\n)\n(\nm\nkg\n)\n(\nm\nkg\n)\n(\n+\n=\n\n(3.11-2)\n\nrevised 2005 Jan 13\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 3: The Blending Tank\n(Notice that the exact steady-state balance, derived from (3.8-2), is\nsatisfied to within 1%, so that our approximation in deriving (3.8-3)\nappears to be reasonable.) The time constant for our process is\n\ns\nm\n)\n.0\n(\n)\n(\nF\nV\ns\nm\n=\n=\n=\nτ\n\n(3.11-3)\n\nSubstituting values into (3.11-1) we obtain\n\n⎟⎠\n⎞\n⎜⎝\n⎛-\n-\n-\n+\n⎟⎠\n⎞\n⎜⎝\n⎛-\n=\n⎟⎠\n⎞\n⎜⎝\n⎛-\n×\n-\n-\n+\n⎟⎠\n⎞\n⎜⎝\n⎛-\n-\n=\n-\n-\n-\n-\n-\n-\n-\n-\n)\nt(\nt\n)\nt(\n)\nt(\n'\nAo\ne\nm\nkg\n)1\n)(\nt(\nU\ne\nm\nkg\n)1(\ne\n)\n.0\n(\n)\n(\nm\nkg\n)\n)(\nt(\nU\ne\nm\nkg\n)1\n)(\nt(\nU\nC\n(3.11-4)\n\nwhere t must be computed with units of seconds. In Figure 3.11-1, we can\nsee that the reduction in make-up flow at 120 s compensates for the earlier\nincrease in inlet composition. Now we are ready to consider control.\n\nCONTROL SCHEME\n\n3.12\ndeveloping a control scheme for the blending tank\nA control scheme is the plan by which we intend to control a process. A\ncontrol scheme requires:\n\n1) specifying control objectives, consistent with the overall objectives\nof safety for people and equipment, environmental protection,\nproduct quality, and economy\n2) specifying the control architecture, in which various of the system\nvariables are assigned to roles of controlled, disturbance, and\nmanipulated variables, and their relationships specified\n3) choosing a controller algorithm\n4) specifying set points and limits\n\n3.13\nstep 1 - specify a control objective for the process\nOur control objective is to maintain the outlet composition at a constant\nvalue. Insofar as the process has been described, this seems consistent\nwith the overall objectives.\n\n3.14\nstep 2 - assign variables in the dynamic system\nThe controlled variable is clearly the outlet composition. The inlet\ncomposition is a disturbance variable: we have no influence over it, but\nmust react to its effects on the controlled variable. We do have available a\nvariable that we can manipulate: the make-up flow rate.\n\nrevised 2005 Jan 13\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 3: The Blending Tank\nWe specify feedback control as our control architecture: departure of the\ncontrolled variable from the set point will trigger corrective action in the\nmanipulated variable. Said another way, we manipulate make-up flow to\ncontrol outlet composition.\n\n-1.5\n-1\n-0.5\n0.5\n1.5\n-100\ninlet comp deviation (kg m-3)\n-0.000075\n-0.000050\n-0.000025\n0.000000\n0.000025\n0.000050\n0.000075\nmake-up flow deviation (m3 s-1)\ninlet composition\nmake-up flow\n0.00\n0.05\n0.10\n0.15\n0.20\n0.25\n0.30\n0.35\n-100\ntime\noutlet composition deviation (kg m-3)\n\nFigure 3.11-1 outlet composition response to opposing step inputs\n\n3.15\nstep 3 - introduce proportional control for our process\nThe controller algorithm dictates how the manipulated variable is to be\nadjusted in response to deviations between the controlled variable and the\nset point. We will introduce a simple and plausible algorithm, called\nrevised 2005 Jan 13\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 3: The Blending Tank\nproportional control. This algorithm specifies that the magnitude of the\nmanipulation is directly proportional to the magnitude of the deviation.\n\n(\n)\nAo\nsetpt\n,\nAo\ngain\nbias\nc\nC\nC\nK\nF\nF\n-\n=\n-\n\n(3.15-1)\n\nIn algorithm (3.15-1) the controlled variable CAo is subtracted from the set\npoint. (Subtracting from the set point, rather than the reverse, is a\nconvention.) Any non-zero result is an error. The error is multiplied by\nthe controller gain Kgain. Their product determines the degree to which\nmanipulated variable Fc differs from Fbias, its value when there is no error.\nThe gain may be adjusted in magnitude to vary the aggressiveness of the\ncontroller. Large errors and high gain lead to large changes in Fc.\n\nWe must consider the direction of the controller, as well as its strength:\nshould the outlet composition exceed the set point, the make-up flow must\nbe reduced. Algorithm (3.15-1) satisfies this requirement if controller gain\nKc is positive.\n\n3.16\nstep 4 - choose set points and limits\nThe set point is the target operating value. For many continuous processes\nthis target rarely varies. In our blending tank example, we may always\ndesire a particular outlet concentration. In other cases, such as a process\nthat makes several grades of product, the set point might be varied from\ntime to time. In batch processes, moreover, the set point can show\nfrequent variation because it provides the desired trajectory for the time-\nvarying process conditions.\n\nSeveral sorts of limits must be considered in control engineering:\n\nsafety limits: if a variable exceeds these limits, a hazard exists. Examples\nare explosive composition limits on mixtures, bursting pressure in a\nvessel, temperatures that trigger runaway reactions.\n\nThese limits are determined by the process, and the control scheme must\nbe designed to abide by them.\n\nexpected variation: it is necessary to estimate how much variation might\nbe expected in a disturbance variable. This estimate is the basis for\nspecifying the strength of the manipulated variable response. In Section\n3.11, our system model (based on the material balance) showed us how\nmuch variation in make-up flow, at specified make-up composition, was\nrequired to compensate for a particular change in the inlet composition.\n\nThese limits are determined by the process and its environment. No\namount of controller design can compensate for a manipulated variable\nthat is unequal to the disturbance task.\nrevised 2005 Jan 13\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 3: The Blending Tank\n\ntolerable variation: ideally the controlled variable would never deviate\nfrom the set point. This, of course, is unrealistic; in practice some\nvariation must be tolerated, because\n- obtaining enough information on the process and disturbance is\nusually impossible, and in any case too expensive.\n- exerting sufficient manipulative strength to suppress variation in the\ncontrol variable might be expected to require large variations in the\nmanipulated variable, which can cause problems elsewhere in the\nprocess.\n\nTolerable limits are determined by the safety limits, above, and then an\neconomic analysis that considers the cost of variation and the cost of\ncontrol. We do not expect to achieve perfect control, but good control is\nusually worth spending some money.\n\nFor the blending tank example, then, we select:\n- set point: CAo,setpt = 10 kg m-3. This would be determined by the user\nof the stream.\n- safety limits: none apparent from problem statement\n- expected variation: ±1 kg m-3; such a specification might come from\nhistorical data or engineering calculations. The steady-state material\nbalance (e.g., (3.11-1) applied at long times) shows that the make-up\nflow must vary at least ±5×10-5 m3 s-1 to compensate such\ndisturbances. However, might we need more capability during the\ncourse of a transient??\n- tolerable variation: ±0.1 kg m-3. This specification depends on the\nuser of the stream.\n\nEQUIPMENT\n\n3.17\ntype of equipment needed for process control\nFigure 3.17-1 shows our process and control scheme as two\ncommunicating systems. The system representing the process has two\ninputs and one output. Of these only one is a material stream; however,\nwe recall that systems communicate with their environment (and other\nsystems) through signals, and in the blending process the outlet\ncomposition responds to the inlet composition and make-up flow rate.\n\nThe system representing feedback control describes the needed operations,\nbut we have not described the nature of the equipment - could there be a\nsingle device that takes in a composition measurement and puts out a\nflow? Can we find a vendor to make such a device to execute controller\nalgorithm (3.15-1)? Can we have the gain knob calibrated in units\nconsistent with those we want to use for flow and composition?\nrevised 2005 Jan 13\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 3: The Blending Tank\n\n-tank to hold liquid\n-agitator to mix contents\n-inlet and outlet piping\ninlet composition\noutlet composition\nmultiply\ngain and\nadd bias\nsubtract\nfrom set\npoint\nmeasure\nsignal\nset point\nadjust\nmake-up\nflow\nsystem representing process\nsystem representing controller and other equipment\nmake-up flow\n-tank to hold liquid\n-agitator to mix contents\n-inlet and outlet piping\ninlet composition\noutlet composition\nmultiply\ngain and\nadd bias\nsubtract\nfrom set\npoint\nmeasure\nsignal\nset point\nadjust\nmake-up\nflow\nsystem representing process\nsystem representing controller and other equipment\nmake-up flow\n\nFigure 3.17-1: Closed loop feedback control of process\n\nWe will address these questions in later lessons. For now, we assume that\nthere will be several distinct pieces of equipment involved, and that they\nwork together so that\n\n(\n)\nAo\nsetpt\n,\nAo\nc\nbias\nc\nC\nC\nK\nF\nF\n-\n=\n-\n\n(3.17-1)\n\nwhere we use the conventional symbol Kc for controller gain. In the case\nof (3.17-1), we notice that the dimensions of Kc are volume2 mass-1 time-1.\n\nIn good time we will improve our description of both equipment and\ncontroller algorithms. When we do, however, we will find that the overall\nconcept of feedback control is the same as presented in Figure 3.17-1: the\ncontrolled variable is measured, decisions are made, and the manipulated\nvariable is adjusted to improve the controlled variable.\n\nCLOSED LOOP BEHAVIOR\n\n3.18\nclosing the loop - feedback control of the blending process\nOur next task will be to combine our controller algorithm with our system\nmodel to describe how the process behaves under control. We begin by\nexpressing algorithm (3.17-1) in deviation variables. At the reference\ncondition, all variables are at steady values, indicated by subscript r.\n\n(\n)\nr,\nAo\nr,\nsetpt\n,\nAo\nc\nbias\nr,c\nC\nC\nK\nF\nF\n-\n=\n-\n\n(3.18-1)\nrevised 2005 Jan 13\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 3: The Blending Tank\n\nPresumably the reference condition has no error, so that the set point is\nsimply the target outlet composition CAo,r. Thus we learn that Fbias, the\nzero-error manipulated variable value, is simply Fc,r. Subtracting (3.18-1)\nfrom (3.17-1), we find\n\n(\n)\n(\n)\n'\nAo\n'\nsetpt\n,\nAo\nc\n'\nc\nr,\nAo\nAo\nr,\nsetpt\n,\nAo\nsetpt\n,\nAo\nc\nbias\nbias\nr,c\nc\nC\nC\nK\nF\nC\nC\nC\nC\nK\nF\nF\nF\nF\n-\n=\n+\n-\n-\n=\n+\n-\n-\n\n(3.18-2)\n\nIf the set point remains at CAo,r, the deviation variable C′Ao,setpt will be\nidentically zero.\n\nWe replace the manipulated variable in system model (3.9-2) with\ncontroller algorithm (3.18-2) to find\n\n(\n'\nAo\n'\nsetpt\n,\nAo\nc\nAc\n'\nAi\n'\nAo\n'\nAo\nC\nC\nK\nF\nC\nC\nC\nd\n)\nt\ndC\n-\n+\n=\n+\nτ\n\n(3.18-3)\n\nOn expressing (3.18-3) in standard form, we arrive at a first-order\ndynamic system model representing the process under proportional-mode\nfeedback control, as shown in Figure 3.17-1.\n\n'\nsetpt\n,\nAo\nc\nAc\nc\nAc\n'\nAi\nc\nAc\n'\nAo\n'\nAo\nc\nAc\nC\nF\nK\nC\nF\nK\nC\nC\nF\nK\nC\nC\ndt\ndC\nF\nK\nC\n+\n+\n+\n=\n+\n+\nτ\n\n(3.18-4)\n\nEquation (3.18-4) describes a dynamic system (process and controller in\nclosed loop) in which the outlet composition varies with two inputs: the\ninlet composition and the set point. Figure 3.18-1 compares (3.18-4) with\nthe process model (3.9-2) alone; we see that\n- the closed loop responds more quickly because the closed loop time\nconstant is less than process time constant τ.\n- the closed loop has a smaller dependence on disturbance C′Ai because\nthe gain is less than unity. Both time constant and gain are reduced by\nincreasing the controller gain Kc.\n\n3.19\nintegration from zero initial conditions\nIn Section 3.10, we integrated our open-loop system model to find how\nC′Ao responded to inputs C′Ai and F′c. Now we integrate closed-loop\nsystem model (3.18-4) in a similar manner.\n\ndt\nC\ne\nK\ne\ndt\nC\ne\nK\ne\nC\n'\nsetpt\n,\nAo\nt\nt\nSP\nCL\nt\n'\nAi\nt\nt\nCL\nCL\nt\n'\nAo\nCL\nCL\nCL\nCL\n∫\n∫\nτ\nτ\n-\nτ\nτ\n-\nτ\n+\nτ\n=\n\n(3.19-1)\nrevised 2005 Jan 13\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 3: The Blending Tank\n\nwhere\n\nF\nK\nC\nF\nK\nC\nK\nF\nK\nC\nK\nF\nK\nC\nc\nAc\nc\nAc\nSP\nc\nAc\nCL\nc\nAc\nCL\n+\n=\n+\n=\n+\nτ\n=\nτ\n\n(3.19-2)\n\n'\nc\nAc\n'\nAi\n'\nAo\n'\nAo\nF\nF\nC\nC\nC\ndt\ndC\n+\n=\n+\nτ\n'\nsetpt\n,\nAo\nc\nAc\nc\nAc\n'\nAi\nc\nAc\n'\nAo\n'\nAo\nc\nAc\nC\nF\nK\nC\nF\nK\nC\nC\nF\nK\nC\nC\ndt\ndC\nF\nK\nC\n+\n+\n+\n=\n+\n+\nτ\nopen-loop behavior\n(the process without control)\nclosed-loop behavior\n(the process under control)\ntime constant\ndisturbance\nvariable gain\nother input\n'\nc\nAc\n'\nAi\n'\nAo\n'\nAo\nF\nF\nC\nC\nC\ndt\ndC\n+\n=\n+\nτ\n'\nsetpt\n,\nAo\nc\nAc\nc\nAc\n'\nAi\nc\nAc\n'\nAo\n'\nAo\nc\nAc\nC\nF\nK\nC\nF\nK\nC\nC\nF\nK\nC\nC\ndt\ndC\nF\nK\nC\n+\n+\n+\n=\n+\n+\nτ\nopen-loop behavior\n(the process without control)\nclosed-loop behavior\n(the process under control)\ntime constant\ndisturbance\nvariable gain\nother input\n\nFigure 3.18-1: Comparing open- and closed-loop system descriptions\n\n3.20\nclosed-loop response to pulse disturbance\nWe test our controlled process by a pulse ΔC in the inlet composition that\nbegins at time t1 and ends at t2. We find\n\n⎪\n⎪\n⎪\n⎪\n⎩\n⎪⎪\n⎪\n⎪\n⎨\n⎧\n<\n⎥\n⎦\n⎤\n⎢\n⎣\n⎡\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛-\nΔ\n<\n<\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛-\nΔ\n<\n<\n=\nτ\n-\n-\nτ\n-\n-\nτ\n-\n-\nt\nt\ne\ne\nK\nC\nt\nt\nt\ne\nK\nC\nt\nt\nC\n)\nt\nt(\n)\nt\nt(\nCL\nAi\n)\nt\nt(\nCL\nAi\n*\nAo\nCL\nCL\nCL\n\n(3.20-1)\n\nFigure 3.20-1 shows both uncontrolled (open-loop) and controlled (closed-\nloop) process responses for the same operating conditions used in Section\n3.11. We see the faster response and smaller error that we expected when\nwe examined (3.18-4) in Section 3.18. These characteristics improve as\ngain increases. Increasing gain also elicits stronger manipulated variable\naction. Thus automatic control appears to have improved matters.\n\nrevised 2005 Jan 13\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 3: The Blending Tank\n-0.5\n0.5\n1.5\ninlet comp deviation (kg m-3)\n-5.0\n-4.0\n-3.0\n-2.0\n-1.0\n0.0\nmake-up flow deviation (10-5 m3 s-1)\n0.00\n0.05\n0.10\n0.15\n0.20\n0.25\n0.30\ntime\noutlet composition deviation (kg m-3)\nKc = 0 m6 kg-1 s-1\n0.0001\n0.0003\n0.0009\n0.0009\n0.0003\n0.0001\nKc = 0 m6 kg-1 s-1\n-0.5\n0.5\n1.5\ninlet comp deviation (kg m-3)\n-5.0\n-4.0\n-3.0\n-2.0\n-1.0\n0.0\nmake-up flow deviation (10-5 m3 s-1)\n0.00\n0.05\n0.10\n0.15\n0.20\n0.25\n0.30\ntime\noutlet composition deviation (kg m-3)\nKc = 0 m6 kg-1 s-1\n0.0001\n0.0003\n0.0009\n0.0009\n0.0003\n0.0001\nKc = 0 m6 kg-1 s-1\n\nFigure 3.20-1: Response to pulse input under proportional control.\n\n3.21\nclosed-loop response to step disturbance - the offset phenomenon\nIntegrating (3.19-1) for a step of ΔC, we obtain\n\n⎟⎠\n⎞\n⎜⎝\n⎛-\nΔ\n=\nτ\n-\nCL\nt\nCL\n'\nAo\ne\nK\nC\nC\n\n(3.21-1)\nrevised 2005 Jan 13\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 3: The Blending Tank\n\nFigure 3.21-1 shows open- and closed-loop step responses. Notice that for\nno case does the controlled variable return to the set point! This is the\nphenomenon of offset, which is a characteristic of the proportional control\nalgorithm responding to step inputs.\n\nCL\n'\nAo\nsetpt\n,\nAo\nAo\nK\nC\n\n)\n(\nC\n\nC\n)\n(\nC\n\npoint\nset\n-\nresponse\n\nlongterm\n\noffset\nΔ\n=\ninf\n=\n-\ninf\n=\n=\n\n(3.21-1)\n\nRecalling (3.19-2), increasing the controller gain decreases the closed-loop\ndisturbance gain KCL, and thus decreases the offset.\n\nWe find that offset is implicit in the proportional control definition\n(3.15-1). An off-normal disturbance variable requires the manipulated\nvariable to change to compensate. For the manipulated variable to differ\nfrom its bias value, (3.15-1) shows that the error must be non-zero. Hence\nsome error must persist so that the manipulated variable can persist in\ncompensating for a persistent disturbance.\n\n3.22\nresponse to set point changes\nWe apply (3.19-1) to a change in set point.\n\n⎟⎠\n⎞\n⎜⎝\n⎛-\nΔ\n=\nτ\n-\nCL\nt\nSP\nsetpt\n,\nAo\n'\nAo\ne\nK\nC\nC\n\n(3.22-1)\n\nWe recall from (3.19-2) that KSP is less than 1. Thus, the outlet\ncomposition follows the change, but cannot reach the new set point. This\nis again offset due to proportional-mode control. Increasing controller\ngain increases KSP and reduces the offset.\n\n3.23\ntuning the controller\nChoosing values of the adjustable controller parameters, such as gain, for\ngood control is called tuning the controller. So far, our experience has\nbeen that increasing the gain decreases offset - then should we not set the\ngain as high as possible?\n\nWe should not jump to that conclusion. In general, tuning positions the\nclosed-loop response between two extremes. At one extreme is no control\nat all, gain set at zero (open-loop). At the other is too much attempted\ncontrol, driving the system to instability. In the former case, the\ncontrolled variable wanders where it will; in the latter case, over-\naggressive manipulation produces severe variations in the controlled\nvariable, worse than no control at all. Tuning seeks a middle ground in\nrevised 2005 Jan 13\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 3: The Blending Tank\nwhich control reduces variability in the controlled variable. This means\nboth rejection of disturbances and fidelity to set point changes.\n\n-0.5\n0.5\n1.5\ninlet comp deviation (kg m-3)\n-5.0\n-4.0\n-3.0\n-2.0\n-1.0\n0.0\nmake-up flow deviation (10-5 m3 s-1)\n0.00\n0.10\n0.20\n0.30\n0.40\n0.50\n0.60\n0.70\n0.80\n0.90\ntime\noutlet composition deviation (kg m-3)\nKc = 0 m6 kg-1 s-1\n0.0001\n0.0003\n0.0009\n0.0009\n0.0003\n0.0001\nKc = 0 m6 kg-1 s-1\n-0.5\n0.5\n1.5\ninlet comp deviation (kg m-3)\n-5.0\n-4.0\n-3.0\n-2.0\n-1.0\n0.0\nmake-up flow deviation (10-5 m3 s-1)\n0.00\n0.10\n0.20\n0.30\n0.40\n0.50\n0.60\n0.70\n0.80\n0.90\ntime\noutlet composition deviation (kg m-3)\n-0.5\n0.5\n1.5\ninlet comp deviation (kg m-3)\n-5.0\n-4.0\n-3.0\n-2.0\n-1.0\n0.0\nmake-up flow deviation (10-5 m3 s-1)\n0.00\n0.10\n0.20\n0.30\n0.40\n0.50\n0.60\n0.70\n0.80\n0.90\ntime\noutlet composition deviation (kg m-3)\nKc = 0 m6 kg-1 s-1\n0.0001\n0.0003\n0.0009\n0.0009\n0.0003\n0.0001\nKc = 0 m6 kg-1 s-1\n\nFigure 3.21-1: proportional control step response, showing offset\n\nrevised 2005 Jan 13\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 3: The Blending Tank\nRecall Figures 3.20-1 and 3.21-1. In these, we achieved our ±0.1 kg m-3\nspecification on outlet concentration at a gain between 0.0003 and 0.0009\nm6 kg-1 s-1. Hence we will use our model, which predicts the response to\ndisturbances, to guide us in tuning. In operation, we would use the\npredicted value as a starting point, and make further adjustments, if\nrequired, in the field.\n\n3.24\nstability of the closed-loop system\nIn Section 3.23, we said that tuning positions the controlled process\nbetween non-control and instability. We must therefore inquire into the\nstability limit. Because (3.19-1) describes the closed-loop system, we\nshould be able to seek the conditions under which it becomes unstable.\nWe invoke the notion of stability to bounded inputs that we introduced in\nSection 3.7, and we come to the same conclusion we reached there: a first-\norder system is stable to all bounded inputs, and we have not changed the\norder of the system by adding feedback control in the proportional mode.\n\nSo \"theoretically\" we can increase gain as much as we like with no\npossibility of reaching instability. Equation (3.19-2) shows that in the\nlimit of infinite controller gain, the response will be instantaneous (τCL =\n0), disturbances will be completely rejected (KCL = 0) and set points will\nbe faithfully tracked (KSP = 1).\n\nPractically, we will not be surprised to find that this is NOT true. No\nautomatically-controlled chemical process will really be first order.\nIncreasing the gain in real processes will ultimately lead to instability. We\nwill explore this point further in future lessons.\n\n3.25\nconclusion\nWe have done quite a lot:\n- used conservation equations to derive a dynamic system model of a\nprocess\n- identified three characteristic disturbances to test system responses\n- introduced the frequency response and Bode plots\n- discussed how to formulate a control scheme\n- introduced proportional-mode control and explored its behavior\n- compared open- and closed-loop response\n- learned how tuning fits between limits of no control and instability\n\nWe will elaborate each of these topics in later lessons.\n\nrevised 2005 Jan 13"
    },
    {
      "category": "Resource",
      "title": "4_tanksinseries.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-450-process-dynamics-operations-and-control-spring-2006/2bbe9f70037e6584b54d043a3c843300_4_tanksinseries.pdf",
      "content": "Spring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\n4.0\ncontext and direction\nIn Lesson 3 we performed a material balance on a mixing tank and derived\na first-order system model. We used that model to predict the open-loop\nprocess behavior and its closed-loop behavior, under feedback control. In\nthis lesson, we complicate the process, and find that some additional\nanalysis tools will be useful.\n\nDYNAMIC SYSTEM BEHAVIOR\n\n4.1\nmath model of continuous blending tanks\nWe consider two tanks in series with single inlet and outlet streams.\n\nF, CAi\nF, CA1\nvolume V1\nvolume V2\nF, CA2\nF, CAi\nF, CA1\nvolume V1\nvolume V2\nF, CA2\n\nOur component A mass balance is written over each tank.\n\nA\nA\nA\nA\nAi\nA\nFC\nFC\nC\nV\ndt\nd\nFC\nFC\nC\nV\ndt\nd\n-\n=\n-\n=\n\n(4.1-1)\n\nAs in Lesson 3, we have recognized that each tank operates in overflow:\nthe volume is constant, so that changes in the inlet flow are quickly\nduplicated in the outlet flow. Hence all streams are written in terms of a\nsingle volumetric flow F. Again, we will regard the flow as constant in\ntime. Also, each tank is well mixed.\n\nPutting (4.1-1) into standard form\n\nA\nA\nA\nAi\nA\nA\nC\nC\ndt\ndC\nC\nC\ndt\ndC\n=\n+\nτ\n=\n+\nτ\n\n(4.1-2)\n\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\nwe identify two first-order dynamic systems coupled through the\ncomposition of the intermediate stream, CA1. If we view the tanks as\nseparate systems, we see that CA1 is the response variable of the first tank\nand the input to the second. If instead we view the pair of tanks as a single\nsystem, CA1 becomes an intermediate variable. The speed of response\ndepends on two time constants, which (as before) are equal to the ratio of\nvolume for each tank and the common volumetric flow.\n\nWe write (4.1-2) at a steady reference condition to find\n\n(4.1-3)\nr,2\nA\nr,1\nA\nr,\nAi\nr,\nA\nC\nC\nC\nC\n=\n=\n=\n\nWe subtract the reference condition from (4.1-2) and thus express the\nvariables in deviation form.\n\n'\nA\n'\nA\n'\nA\n'\nAi\n'\nA\n'\nA\nC\nC\ndt\ndC\nC\nC\ndt\ndC\n=\n+\nτ\n=\n+\nτ\n\n(4.1-4)\n\n4.2\nsolving the coupled equations - a second-order system\nAs usual, we will take the initial condition to be zero (response variables\nat their reference conditions). We may solve (4.1-4) in two ways:\n\nBecause the first equation contains only C′\nA1, we may integrate it directly\nto find C′\nA1 as a function of the input C′\nAi. This solution becomes the\nforcing function in the second equation, which may be integrated directly\nto find C′\nA2. That is\n\ndt\nC\ne\ne\nC\nt\n'\nAi\nt\nt\n'\nA\n1∫\nτ\nτ\n-\nτ\n=\n\n(4.2-1)\n\n∫\n∫\n⎥\n⎦\n⎤\n⎢\n⎣\n⎡\nτ\nτ\n=\nτ\nτ\n-\nτ\nτ\n-\nt\nt\n'\nAi\nt\nt\nt\nt\n'\nA\ndt\ndt\nC\ne\ne\ne\ne\nC\n\n(4.2-2)\n\nOn defining a specific disturbance C′\nAi we can integrate (4.2-2) to a\nsolution.\n\nAlternatively, we may eliminate the intermediate variable C′\nA1 between\nthe equations (4.1-4) and obtain a second-order equation for C′\nA2 as a\nfunction of C′\nAi. The steps are\n\n(1) differentiate the second equation\n(2) solve the first equation for the derivative of C′\nA1\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\n(3) solve the original second equation for C′\nA1\n(4) substitute in the equation of the first step.\n\nThe result is\n\n(\n)\n'\nAi\n'\nA\n'\nA\n'\nA\nC\nC\ndt\ndC\ndt\nC\nd\n=\n+\nτ\n+\nτ\n+\nτ\nτ\n\n(4.2-3)\n\nTwo mass storage elements led to two first-order equations, which have\ncombined to produce a single second-order equation. A homogeneous\nsolution to (4.2-3) can be found directly, but the particular solution\ndepends on the nature of the disturbance:\n\n(\n)\n'\nAi\n'\npart\n,2\nA\nt\nt\n'\nA\nC\nC\ne\nA\ne\nA\nC\n+\n+\n=\nτ\n-\nτ\n-\n\n(4.2-4)\n\nwhere the constants A1 and A2 are found by invoking initial conditions\nafter the particular solution is determined.\n\n4.3\nresponse of system to step disturbance\nSuppose a step change ΔC occurs in the inlet concentration at time td.\nEither (4.2-2) or (4.2-4) yields\n\n(\n)\nd\nd\n(t t )\n(t t )\n'\nA2\nd\nC\nU t\nt\nC 1\ne\ne\n-\n-\n-\n-\nτ\n⎡\n⎤\nτ\nτ\n=\n-\nΔ\n-\n+\n⎢\nτ -τ\nτ -τ\n⎣\n⎦\nτ ⎥\n(4.3-1)\n\nEach tank contributes a first-order response based on its own time\nconstant. However, these responses are weighted by factors that depend\non both time constants.\n\nThe result in Figure 4.3-1 looks somewhat different from the first-order\nresponses we have seen. We have plotted the step response of a second-\norder system with τ1 = 1 and τ1 = 1.5 in arbitrary units. At sufficiently\nlong time, the initial condition has no influence and the outlet\nconcentration will become equal to the new inlet concentration; in this\nrespect it looks like the first-order system response. However, the initial\nbehavior differs: the outlet concentration rises gradually instead of\nabruptly. This S-shaped curve, often called \"sigmoid\", is a feature of\nsystems of order greater than one. Physically, we can understand this by\nrealizing that the change in inlet concentration must spread through two\ntanks, and it reaches the second tank only after being diluted in the first.\n\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\n0.5\nC*Ai/ C\n0.2\n0.4\n0.6\n0.8\nt\nC*A2/\nC\n0.5\nC*Ai/ C\n0.2\n0.4\n0.6\n0.8\nt\nC*A2/\nC\n\nFigure 4.3-1: Response to step change in inlet composition\n\n4.4\nintroducing the Laplace transform\nWe bother with the Laplace transform for two reasons:\n- after the initial learning pains, it actually makes the math easier, so we\nwill use it in derivations\n- some of the terminology in linear systems and process control is based\non formulating the equations with Laplace transforms.\n\nDefinition: the Laplace transform turns a function of time y(t) into a\nfunction of the complex variable s. Variable s has dimensions of\nreciprocal time. All the information contained in the time-domain\nfunction is preserved in the Laplace domain.\n\n{\n} ∫\ninf\n-\n=\n=\nstdt\ne)t(\ny\n)t(\ny\nL\n)s(\ny\n\n(4.4-1)\n\n(In these notes, we use the notation y(s) merely to indicate that y(t) has\nbeen transformed; we do not mean that y(s) has the same functional\ndependence on s that it does on t.)\n\nFunctional transforms: textbooks (for example, Marlin, Sec. 4.2) usually\ninclude tables of transform pairs, so these derivations from definition\n(4.4-1) are primarily to demonstrate how the tables came to be.\n\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\n{\n}\ns\nCe\ne\ns\nC\ndt\ne\nC\ndt\ne)\nt\nt(\nCU\n)\nt\nt(\nCU\nL\nd\nd\nd\nst\nt\nst\nt\nst\nst\nd\nd\n-\ninf\n-\ninf\n-\ninf\n-\n=\n-\n=\n=\n-\n=\n-\n∫\n∫\n\n(4.4-2)\n\n{\n}\na\ns\nC\ne\na\ns\nC\ndt\ne\ne\nC\nCe\nL\nt)\na\ns(\nst\nat\nat\n+\n=\n+\n-\n=\n=\n+\n-\ninf\n-\n-\ninf\n-\n∫\n\n(4.4-3)\n\nOperational transforms: this allows us to transform entire equations, not\njust particular functions.\n\n(\n)\n{\n}\n)\n(\nf\n)t(\nf\nsL\ne)t(\nf\ndt\ne)t(\nf\ns\ndt\nfe\ndt\nd\ne)t(\nsf\ndt\ne\ndt\n)t(\ndf\ndt\n)t(\ndf\nL\nst\nst\nst\nst\nst\n-\n=\n+\n=\n⎥⎦\n⎤\n⎢⎣\n⎡\n+\n=\n=\n⎭⎬⎫\n⎩⎨⎧\n-\ninf\ninf\n-\ninf\n-\n-\n-\ninf\n∫\n∫\n∫\n\n(4.4-4)\n\n( )\n( )\n( )\n( )\n( )\n{\n}\n( )\n( )\n{\n}\nt\nf\nL\ns\n\ne\nd\nf\ns\nt\nf\nL\ns\n\ne\nd\nf\nd\ns\ndt\ne\nt\nf\ns\n\ndt\ne\nd\nf\nd\nf\nL\nst\nt\nst\nt\nst\nst\nt\nt\n=\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\nξ\nξ\n-\n=\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\nξ\nξ\n-\n=\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\nξ\nξ\n=\n⎭\n⎬\n⎫\n⎩\n⎨\n⎧\nξ\nξ\ninf\n-\ninf\n-\ninf\n-\ninf\n-\n∫\n∫\n∫\n∫\n∫∫\n∫\n\n(4.4-5)\n\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\n\nInverting transforms: use the tables to invert simple Laplace-domain\nfunctions to their time-domain equivalents. To simplify the polynomial\nfunctions often found in control engineering we may use partial fraction\nexpansion. The complicated ratio in (4.4-6) can be inverted if is expanded\ninto a series of simpler fractions.\n\n...\n)\ns(\nC\n...\n)\ns(\nC\n)\ns(\nC\n...\n)\ns(\n)\ns(\n)s(\nN\n)s(\nD\n)s(\nN\nm\nn\nn\nm\nn\n+\nα\n-\n+\n+\nα\n-\n+\nα\n-\n=\nα\n-\nα\n-\n=\n-\n\n(4.4-6)\n\nIn (4.4-6), α1 and α2 are repeated roots of the denominator. The inverse\ntransform of each term will involve an exponential function of the root αi.\n\n)!\nn\n(\ne\nCt\n)t(\nf\n)\ns(\nC\n)s(\nf\nt\nn\nn\n-\n=\n⇒\nα\n-\n=\nα\n-\n\n(4.4-7)\n\nVariety in the values of the coefficients Ci comes from the numerator\nfunction N(s).\n\nhow to write the expansion\nArrange the denominator so that the coefficient of each s is 1. If there are\nno repeated roots, each root appears in one term.\n\n)\ns(\nC\n)\ns(\nC\n)\ns(\nC\n)\ns\n)(\ns\n)(\ns(\n)s(\nN\nα\n-\n+\nα\n-\n+\nα\n-\n=\nα\n-\nα\n-\nα\n-\n\n(4.4-8)\n\nIf a root is repeated, it requires a term for each repetition.\n\n)\ns(\nC\n)\ns(\nC\n)\ns(\nC\n)\ns\n)(\ns(\n)s(\nN\nα\n-\n+\nα\n-\n+\nα\n-\n=\nα\n-\nα\n-\n\n(4.4-9)\n\nSome roots may appear as complex conjugate pairs, so that, for example\n\njb\na\njb\na\n-\n=\nα\n+\n=\nα\n\n(4.4-10)\n\nwhere j is the square root of -1.\n\nhow to solve for the coefficients - it's only algebra\n1) For each of the real, distinct roots, multiply the expansion by each RH\ndenominator and substitute the value of the root for s to isolate the\ncoefficient. This also works for the highest power of a repeated root.\n2) With some coefficients determined, it may be easiest to substitute\narbitrary values for s to get equations in the unknown coefficients.\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\n3) For repeated roots, either\n(3a) multiply the expansion by s and take the limit as s → inf.\nHowever, this will not isolate coefficients associated with\nrepeated complex roots.\n(3b) multiply the expansion by the RH denominator of highest power.\nDifferentiate this equation with respect to s, and substitute the\nvalue of the root for s. Continue differentiating in this manner to\nisolate successive coefficients.\n4) For complex roots, solving for one coefficient is enough. The other\ncoefficient will be the complex conjugate.\n\n4.5\nsolving linear ODEs with Laplace transforms\nWe return to (4.1-4), the two equations that describe concentration in the\ntanks.\n\n'\nA\n'\nA\n'\nA\n'\nAi\n'\nA\n'\nA\nC\nC\ndt\ndC\nC\nC\ndt\ndC\n=\n+\nτ\n=\n+\nτ\n\n(4.1-4)\n\nWe perform the Laplace transform on the entire first equation. It\ndistributes across addition, and constant τ1 may be factored out.\n\n{\n}\n{\n}\n{\n'\nAi\n'\nA\n'\nA\n'\nAi\n'\nA\n'\nA\nC\nL\nC\nL\ndt\ndC\nL\nC\nL\nC\ndt\ndC\nL\n=\n+\n⎭\n⎬\n⎫\n⎩\n⎨\n⎧\nτ\n=\n⎭\n⎬\n⎫\n⎩\n⎨\n⎧\n+\nτ\n}\n\n(4.5-1)\n\nWe next perform an operational transform on the derivative. Because the\nfunctional forms of the variables C′\nA1 and C′\nAi are not yet known, we\nsimply indicate a variable in the Laplace domain.\n\n{\n}\n)s(\nC\n)s(\nC\n)s(\nsC\n)s(\nC\n)s(\nC\n)\n(\nC\n)s(\nsC\n'\nAi\n'\nA\n'\nA\n'\nAi\n'\nA\n'\nA\n'\nA\n=\n+\nτ\n=\n+\n-\nτ\n\n(4.5-2)\n\nWe can easily solve (4.5-2) for C′\nA1. If we similarly treat the second\nequation in (4.1-4), we arrive at the equivalent formulation in the Laplace\ndomain.\n\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\n)s(\nC\ns\n)s(\nC\n)s(\nC\ns\n)s(\nC\n'\nA\n'\nA\n'\nAi\n'\nA\n+\nτ\n=\n+\nτ\n=\n\n(4.5-3)\n\nEquations (4.5-3) are not solutions - we have not solved anything! We\nmerely have a new formulation of problem (4.1-4), a formulation that is\nmore abstract (what on earth is Laplace domain?) and yet simpler, by\nvirtue of being algebraic. It is important to remember that all the\ninformation held in the differential equations (4.1-4) is preserved in the\nLaplace domain formulation (4.5-3).\n\nWe proceed toward solution by eliminating the intermediate variable in\n(4.5-3). We find\n\n)s(\nC\ns\ns\n)s(\nC\n'\nAi\n'\nA\n+\nτ\n+\nτ\n=\n\n(4.5-4)\n\nWith (4.5-4) we have gone as far as we can without knowing more about\nthe disturbance. That is, we cannot invert the right-hand side of (4.5-4)\nuntil we can actually substitute a functional transform for the variable\nC′\nAi(s). In this sense, (4.5-4) resembles (4.2-2) and (4.2-4): a solution\nneeding more specification.\n\nAs in Section 4.3, suppose a step change ΔC occurs in the inlet\nconcentration at time td.\n\n(\n) C\nt\nt\nU\n)t(\nC\nd\n'\nAi\nΔ\n-\n=\n\n(4.5-5)\n\nWe must take the Laplace transform,\n\ns\nt\n'\nAi\nd\ne\ns\nC\n)s(\nC\n-\nΔ\n=\n\n(4.5-6)\n\nwhich we may substitute into (4.5-4).\n\ns\nt\n'\nA\nd\ne\ns\nC\ns\ns\n)s(\nC\n-\nΔ\n+\nτ\n+\nτ\n=\n\n(4.5-7)\n\nThis IS the solution, the step response of the two tanks in series. Of\ncourse, it really must be inverted to the time domain. We treat the\npolynomial denominator from either the tables or partial fraction\nexpansion:\n\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\nt\nt\ne\ne\ns\ns\ns\nL\nτ\n-\nτ\n-\n-\nτ\n-\nτ\nτ\n+\nτ\n-\nτ\nτ\n-\n=\n⎭\n⎬\n⎫\n⎩\n⎨\n⎧\n+\nτ\n+\nτ\n\n(4.5-8)\n\nNext we apply the time delay\n\n(\n)\n⎥⎦\n⎤\n⎢⎣\n⎡\nτ\n-\nτ\nτ\n+\nτ\n-\nτ\nτ\n-\n-\n=\n⎭\n⎬\n⎫\n⎩\n⎨\n⎧\n+\nτ\n+\nτ\nτ\n-\n-\nτ\n-\n-\n-\n-\nd\nd\nd\n)\nt\nt(\n)\nt\nt(\nd\ns\nt\ne\ne\nt\nt\nU\ne\ns\ns\ns\nL\n\n(4.5-9)\n\nRemembering the constant factor, we complete the inverse transform of\n(4.5-7).\n\n⎥⎦\n⎤\n⎢⎣\n⎡\nτ\n-\nτ\nτ\n+\nτ\n-\nτ\nτ\n-\nΔ\n-\n=\nτ\n-\n-\nτ\n-\n-\nd\nd\n)\nt\nt(\n)\nt\nt(\nd\n'\nA\ne\ne\nC\n)\nt\nt(\nU\nC\n\n(4.5-10)\n\nwhich, of course, is identical to (4.3-1), derived in the time domain.\n\n4.6\ndescribing systems with transfer functions\nIn Section 4.1 we derived a system model to describe transient behavior in a tanks-in-series\nprocess. Then in Section 4.5 we used Laplace transforms to solve it. Let us now do the same\nprocedure in the abstract. Begin with the first-order lag, written in deviation variables:\n\n)\n(\ny\n)t(\nKx\ny\ndt\ndy\n'\n'\n'\n'\n=\n=\n+\nτ\n\n(4.6-1)\n\nAfter taking Laplace transforms, we relate input and output by an algebraic equation:\n\n)s(\nx\ns\nK\n)s(\ny\n'\n'\n+\nτ\n=\n\n(4.6-2)\n\nThe ratio in (4.6-2) multiplies x′(s) (the transform of disturbance x′(t)) and in the process\nconverts that signal into y′(s) (the transform of the response y′(t)). We call this ratio the transfer\nfunction G(s).\n\ns\nK\n)s(\nx\n)s(\ny\n)s(\nG\n'\n'\n+\nτ\n=\n=\n\n(4.6-3)\n\nG(s) contains all the information about the ODE (4.6-1). We should from now recognize it,\nwhen we see it, as a first-order lag. Should we want to know how the first-order lag behaves in\nresponse to some disturbance, we transform the disturbance, multiply it by the first-order lag\ntransfer function, and then take the inverse transform of the result.\n\nLet us generalize (4.5-4), which described two first-order lags in series:\n\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\n)s(\nx\ns\nK\ns\nK\n)s(\ny\n'\n'\n+\nτ\n+\nτ\n=\n\n(4.6-4)\n\nThe transfer function for this second-order system is a product of two first-\norder lags\n\n)s(\nG\n)s(\nG\n)s(\nG\ns\nK\ns\nK\n)s(\nx\n)s(\ny\n'\n'\n=\n=\n+\nτ\n+\nτ\n=\n\n(4.6-5)\n\nWe shall consider a transfer function to be a completely satisfactory\ndescription of a dynamic system. We shall learn to notice its gain (long-\nterm steady-state relationship between y′ and x′), time constants, and poles\n(roots of the denominator).\n\nTable 4.6-1: Characteristics of systems we have studied\ntype\nequation\ntransfer\nfunction\npoles\nsteady\nstate\ngain\n1st order lag\n)t(\nKx\n)t(\ny\ndt\ndy\n'\n'\n'\n=\n+\nτ\n\n+\ns\nK\nτ\n\n-τ-1\nK\n2nd order\noverdamped*\n(\n)\n)t(\nKx\ny\ndt\ndy\ndt\ny\nd\n'\n'\n'\n'\n=\n+\nτ\n+\nτ\n+\nτ\nτ\n\n)1\ns\n)(\ns\n(\nK\n+\nτ\n+\nτ\n-τ1\n-1\n-τ2\n-1\nK\n*why \"overdamped\"? There are other 2nd order forms to be encountered.\n\n4.7\ndescribing systems with block diagrams\nThe block diagram is a graphical display of the system in the Laplace domain.\n\nx′(s)\nG(s)\ny′(s)\nIt comprises blocks and arrows, and thus resembles many other types of flow diagram. In our\nuse with control systems, however, the arrows represent signals, variables that change in time,\nwhich are not necessarily actual flow streams. The block contains the transfer function, which\nmay be as simple as a units conversion between x and y, or a description of more complicated\ndynamic behavior. Remember that the transfer function incorporates all the dynamic\ninformation in the system equations. This diagram implies the Laplace domain relationship\n\n)s(\nx\n)s(\nG\n)s(\ny\n'\n'\n=\n\n(4.7-1)\n\nThe real value of block diagrams is to represent the flow of signals among multiple blocks.\n\nThe Block Diagram Rules (see Marlin, Sec.4.4):\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\n- exclusion: only one input and output to a block.\nsystem\ninputs\noutputs\nsystem\ninputs\noutputs\n\n- summing: two signals may be summed at an explicit summing\njunction. The algebraic sign is indicated at the junction (if omitted,\nis presumed to be positive).\nG1(s)\nG3(s)\nG2(s)\nx'\n1(s)\nx 2(s)\ny'\n2(s)\ny'\n1(s)\nx'\n3(s)\ny 3(s)\n-\n+\nG1(s)\nG3(s)\nG2(s)\nx'\n1(s)\nx'\n2(s)\ny'\n2(s)\ny'\n1(s)\nx'\n3(s)\ny'\n3(s)\n-\n+\nG1(s)\nG3(s)\nG2(s)\nx'\n1(s)\nx 2(s)\ny'\n2(s)\ny'\n1(s)\nx'\n3(s)\ny 3(s)\n-\n+\nG1(s)\nG3(s)\nG2(s)\nx'\n1(s)\nx'\n2(s)\ny'\n2(s)\ny'\n1(s)\nx'\n3(s)\ny'\n3(s)\n-\n+\n\n- multiple assignment: a single signal may feed its value to multiple\nblocks. This does NOT indicate that the signal is divided up\namong the blocks.\nG1(s)\nG3(s)\nG2(s)\nx 1(s)\ny 2(s)\ny 1(s)\ny 3(s)\ny 1(s)\nG1(s)\nG3(s)\nG2(s)\nx'1(s)\ny'2(s)\ny'1(s)\ny'3(s)\ny'1(s)\nG1(s)\nG3(s)\nG2(s)\nx 1(s)\ny 2(s)\ny 1(s)\ny 3(s)\ny 1(s)\nG1(s)\nG3(s)\nG2(s)\nx'1(s)\ny'2(s)\ny'1(s)\ny'3(s)\ny'1(s)\n\nBlock diagrams may be turned into equations by simple algebra. It is usually most convenient to\nstart with an output and work backwards by substitution. In the summing diagram\n\n(\n)\n(\n(s)\n(s)x\n(s)G\nG\n(s)\n(s)x\n(s)G\nG\n(s)\n(s)x\nG\n(s)\n(s)x\nG\n(s)\nG\n(s)\ny\n(s)\ny\n(s)\nG\n(s)\n(s)x\nG\n(s)\ny\n'\n'\n'\n'\n'\n'\n'\n'\n-\n=\n-\n=\n-\n=\n=\n)\n\n(4.7-2)\n\nIn the multiple assignment diagram\n\n)s(\nx\n)s(\nG\n)s(\nG\n)s(\ny\n)s(\nG\n)s(\ny\n)s(\nx\n)s(\nG\n)s(\nG\n)s(\ny\n)s(\nG\n)s(\ny\n'\n'\n'\n'\n'\n'\n=\n=\n=\n=\n\n(4.7-3)\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\n\nSimilarly, equations may be turned into block diagrams. System (4.7-2) has two inputs and thus\nrequires at least 2 blocks.\n\nG1(s) G3(s)\nG2(s) G3(s)\nx 1(s)\nx 2(s)\ny 3(s)\n-\n+\nG1(s) G3(s)\nG2(s) G3(s)\nx'\n1(s)\nx'\n2(s)\ny'\n3(s)\n-\n+\nG1(s) G3(s)\nG2(s) G3(s)\nx 1(s)\nx 2(s)\ny 3(s)\n-\n+\nG1(s) G3(s)\nG2(s) G3(s)\nx'\n1(s)\nx'\n2(s)\ny'\n3(s)\n-\n+\n\nSystem (4.7-3) has two outputs for one input. Input x*\n1 is not split - its full value is sent to each\nof two blocks.\n\nG1(s) G3(s)\nG1(s) G2(s)\nx 1(s)\ny 2(s)\ny 3(s)\nG1(s) G3(s)\nG1(s) G2(s)\nx'1(s)\ny'\n2(s)\ny'3(s)\nG1(s) G3(s)\nG1(s) G2(s)\nx 1(s)\ny 2(s)\ny 3(s)\nG1(s) G3(s)\nG1(s) G2(s)\nx'1(s)\ny'\n2(s)\ny'3(s)\n\nThis pair of block diagrams is equivalent to the pair from which they were derived.\n\nAs a further illustration, we apply the block diagram rules to the two-tank\nsystem in (4.5-3):\n\ns\ns\n+\nτ\n+\nτ\ns\n1 +\nτ\ns\n2 +\nτ\nC Ai(s)\nC'\nA1(s)\nC'\nA2(s)\nC'\nAi(s)\nC'\nA2(s)\nOR\ns\ns\n+\nτ\n+\nτ\ns\n1 +\nτ\ns\n2 +\nτ\nC'\nAi(s)\nC A1(s)\nC A2(s)\nC Ai(s)\nC A2(s)\nOR\ns\ns\n+\nτ\n+\nτ\ns\n1 +\nτ\ns\n2 +\nτ\nC Ai(s)\nC'\nA1(s)\nC'\nA2(s)\nC'\nAi(s)\nC'\nA2(s)\nOR\ns\ns\n+\nτ\n+\nτ\ns\n1 +\nτ\ns\n2 +\nτ\nC'\nAi(s)\nC A1(s)\nC A2(s)\nC Ai(s)\nC A2(s)\nOR\n\n4.8\nfrequency response from the transfer function\nIn Section 3.5 we derived the system response to a sine input by\nintegrating the differential equation. We learned that the frequency\nresponse - that is, the long-term oscillation - could be characterized by its\namplitude ratio and phase angle; these quantities were expressed on a\nBode plot.\n\nAlternatively, we may derive the frequency response directly from the\ntransfer function by substituting jω for s, where j is the square root of -1\nand ω is the radian frequency of the sine input. For the second-order\ntransfer function (4.6-5),\n\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\n(\n)(\n)\n(\n)(\n)\n(\n)(\n)\n(\n)\n(\n)(\n)\nj\nK\nK\nj\nj\nK\nK\nj\nj\nK\nK\n)\nj(\nG\nω\nτ\n+\nω\nτ\n+\nτ\n+\nτ\nω\n-\nω\nτ\nτ\n-\n=\nω\nτ\n+\nω\nτ\n+\nω\nτ\n-\nω\nτ\n-\n=\nω\nτ\n+\nω\nτ\n+\n=\nω\n\n(4.8-1)\n\nThe function G(jω), although perhaps daunting to behold, is simply a\ncomplex number. As such, it has real and imaginary parts, and a\nmagnitude and a phase angle. It turns out that the magnitude of G(jω) is\nthe amplitude ratio of the frequency response.\n\n(\n)\n(\n)\n(\n)\n(\n)(\n)\n(\n)\n(\n)(\n)\nK\nK\nK\nK\nK\nK\n)\nj(\nG\nω\nτ\n+\nω\nτ\n+\n=\nω\nτ\n+\nω\nτ\n+\nτ\nτ\nω\n+\nτ\n+\nτ\nω\n+\n=\nω\nτ\n+\nω\nτ\n+\nτ\n+\nτ\nω\n+\nω\nτ\nτ\n-\n=\nω\n\n(4.8-2)\n\nFurthermore, the phase angle of G(jω) is the frequency response phase\nangle.\n\n(\n)\n(\n)\n(\n)\ntan\n)\nj(\nG\nRe\n)\nj(\nG\nIm\ntan\n)\nj(\nG\nω\nτ\nτ\n-\nτ\n+\nτ\nω\n-\n=\nω\nω\n=\nω\n∠\n-\n-\n\n(4.8-3)\n\nIn Figure 4.8-1, the Bode plot abscissa has been normalized by the square\nroot of the product of the time constants. We see that the amplitude ratio\nof a second-order system declines more swiftly than that of a first-order\nsystem: the slope of the high-frequency asymptote is -2. Unbalancing the\ntime constants further decreases the amplitude ratio. The phase angle can\nreach -180o. It is symmetric about -90o.\n\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\n0.01\n0.10\n1.00\n0.01\n0.1\namplitude ratio/gain\n-180\n-150\n-120\n-90\n-60\n-30\n0.01\n0.1\nω(τ1τ2)0.5 (radians)\nphase angle (deg)\n2 =\nτ\nτ\n1.1\n0.01\n0.10\n1.00\n0.01\n0.1\namplitude ratio/gain\n-180\n-150\n-120\n-90\n-60\n-30\n0.01\n0.1\nω(τ1τ2)0.5 (radians)\nphase angle (deg)\n2 =\nτ\nτ\n1.1\n\nFigure 4.8-1: Bode plot for overdamped second order system\n\n4.9\nstability of the two-tank system, and linear systems in general\nThe step response (4.5-10) shows no terms that grow with time, so long as\nthe time constants are positive. Furthermore, the amplitude ratio in Figure\n4.8-1 is bounded. Thus, a second-order overdamped system appears to be\nstable to bounded inputs. In practical terms, a concentration disturbance at\nthe inlet should not provoke a runaway response at the outlet.\n\nWe have seen first- and second-order linear systems. Let us generalize to\narbitrary order:\n\n'\n'\n'\nn\n'\nn\nn\nn\n'\nn\nn\nx\ny\ndt\ndy\na\ndt\ny\nd\na\ndt\ny\nd\na\n=\n+\n+\n+\n+\n-\n-\n-\n\"\n\n(4.9-1)\n\nThe function x′ represents all manner of bounded disturbances, expressed\nin deviation form. The system properties, however, reside on the left-hand\nside of (4.9-1), and its stability behavior should be independent of the\nparticular nature of the disturbances x′. Hence, we may examine the\nhomogeneous equation\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\n\ny\ndt\ndy\na\ndt\ny\nd\na\ndt\ny\nd\na\n'\n'\nn\n'\nn\nn\nn\n'\nn\nn\n=\n+\n+\n+\n+\n-\n-\n-\n\"\n\n(4.9-2)\n\nThe solution to (4.9-2) is the sum of n terms, each containing a factor eαit,\nwhere αi is a real root, or the real part of a complex root, of the\ncharacteristic equation.\n\nr\na\nr\na\nr\na\nn\nn\nn\nn\n=\n+\n+\n+\n+\n-\n-\n\"\n\n(4.9-3)\n\nHence if all the αi are negative, the solution cannot grow with time and\nwill thus be stable. If we take the Laplace transform of (4.9-1),\n\ns\na\ns\na\ns\na\n)s(\nG\n)s(\nx\n)s(\ny\nn\nn\nn\nn\n'\n'\n+\n+\n+\n+\n=\n=\n-\n-\n\"\n\n(4.9-4)\n\nwe see that the denominator of the transfer function is identical to the\ncharacteristic equation. Hence, the stability of the system is determined\nby the poles of the transfer function: poles with zero or positive real parts\nindicate a system unstable to bounded disturbances. Table 4.6-1 shows\nthat first-order lag and overdamped second-order systems are stable if\ntheir time constants are positive.\n\nCONTROL SCHEME\n\n4.10\nstep 1 - specify a control objective for the process\nOur control objective is to maintain the outlet composition CA2 at a\nconstant value.\n\n4.11\nstep 2 - assign variables in the dynamic system\nThe controlled variable is clearly CA2. The inlet composition CAi is a\ndisturbance variable. The composition CA1 is an intermediate variable.\nWe have no candidate manipulated variable; hence we decide to add a\nconcentrated make-up stream as we did with the single tank in Lesson 3.\nWe could add the stream to the first or the second tank - we seek advice:\n\nOne advisor says, \"Add it to the first tank, where the disturbance enters.\nThat way, the manipulation can interact thoroughly with the disturbance;\nit's a matter of success through cooperation.\" A second advisor says,\n\"Add it to the second tank. That way the manipulated variable can affect\nthe controlled variable more directly, through one tank instead of two.\"\nThis advice brings to mind the difference we have seen between first- and\nsecond-order responses. Yet the first advisor is better-dressed, friendlier,\nand has a comforting manner - we decide to add the make-up stream to the\nfirst tank.\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\n\nMaterial balances on the solute give\n\nA\nA\nA\nc\nc\nc\nAc\nAi\nc\nA\nA\nc\nC\nC\ndt\ndC\nF\nF\nV\nF\nF\nF\nC\nC\nF\nF\nF\nC\ndt\ndC\nF\nF\nV\n=\n+\n+\n+\n+\n+\n=\n+\n+\n\n(4.11-1)\n\nWe expect to use a relatively small make-up flow Fc of concentration CAc;\nhence we make the approximation that F + Fc ~ F. Hence\n\nA\nA\nA\nc\nAc\nAi\nA\nA\nC\nC\ndt\ndC\nF\nV\nF\nF\nC\nC\nC\ndt\ndC\nF\nV\n=\n+\n+\n=\n+\n\n(4.11-2)\n\nAs is our custom, we write (4.11-2) at a steady reference condition and\nsubtract this reference to leave the variables in deviation form. After\ntaking Laplace transforms, we eliminate intermediate variable C′\nA1(s) to\nfind\n\n(\n)(\n)\n(\n)(\n)\n)s(\nF\ns\ns\nF\nC\n)s(\nC\ns\ns\n)s(\nC\n'\nc\nAc\n'\nAi\n'\nA\n+\nτ\n+\nτ\n+\n+\nτ\n+\nτ\n=\n\n(4.11-3)\n\nThe time constants are the usual volume-to-flow ratios. The poles of the\ntwo transfer functions are negative, so adding a make-up stream has not\nmade the system unstable. Compare (4.11-3) to (4.5-4), which describes\nthe two tanks without makeup flow. Figure 4.11-1, the block diagram of\n(4.11-3), emphasizes that controlled variable CA2 is influenced by both\ndisturbance CAi and manipulated variable Fc.\n\n(\n)(\n)\ns\ns\n+\nτ\n+\nτ\n(\n)(\n)\ns\ns\nF\nC\nAc\n+\nτ\n+\nτ\n)s(\nC\n'\nAi\n)s(\nC\n'\nA\n)s(\nF\n'\nc\n(\n)(\n)\ns\ns\n+\nτ\n+\nτ\n(\n)(\n)\ns\ns\nF\nC\nAc\n+\nτ\n+\nτ\n)s(\nCAi\n)s(\nC\nA\n)s(\nFc\n(\n)(\n)\ns\ns\n+\nτ\n+\nτ\n(\n)(\n)\ns\ns\nF\nC\nAc\n+\nτ\n+\nτ\n)s(\nC\n'\nAi\n)s(\nC\n'\nA\n)s(\nF\n'\nc\n(\n)(\n)\ns\ns\n+\nτ\n+\nτ\n(\n)(\n)\ns\ns\nF\nC\nAc\n+\nτ\n+\nτ\n)s(\nCAi\n)s(\nC\nA\n)s(\nFc\n\nFigure 4.11-1: Block diagram of two-tank mixing process\n\n4.12\nstep 3 - proportional control\nWe will use proportional control. Although we recognize the\ndisadvantage of offset, as demonstrated in Lesson 3, we feel confident in\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\nour ability to manage it at an acceptable level by increasing the controller\ngain. The proportional algorithm is\n\n(\n)\nA\nsetpt\n,2\nA\ngain\nbias\nc\nC\nC\nK\nF\nF\n-\n=\n-\n\n(4.12-1)\n\nShould the outlet composition fall below the set point, the error will\nbecome positive. A positive controller gain Kgain will increase make-up\nflow Fc above the bias value, which will act to increase the outlet\ncomposition.\n\n4.13\nstep 4 - choose set points and limits\nAs in Section 3.16, we identify any applicable safety limits, choose the\ndesired operating point, specify limits of tolerable variation about it, and\nsupply make-up flow in sufficient quantity to counteract the anticipated\ndisturbances.\n\nEQUIPMENT\n\n4.14\ncomponents of the feedback control loop\nWe should consider the equipment more realistically. Figure 4.14-1 is a\nblock diagram showing the four components found in most process control\napplications: process, sensor, controller, and final control element. Each\nblock contains a transfer function that relates output to input. The signals\nbetween blocks are Laplace transforms of deviation variables. We\nrecognize that the process will typically comprise multiple blocks for\ndisturbance and manipulated variable inputs. An example is the mixing\ntank process that shown in Figure 4.11-1.\n\nGd(s)\nGm(s)\nGs(s)\nGc(s)\nGv(s)\n-\nx'\nd(s)\nx'\nm(s)\ny'\nc (s)\nε' (s)\ny'\nco(s)\ny'\nsp,e(s)\ny'\ns (s)\nprocess\ncontroller\nsensor\nfinal\ncontrol\nelement\nGsp(s)\ny'\nsp(s)\nGd(s)\nGm(s)\nGs(s)\nGc(s)\nGv(s)\n-\nx'\nd(s)\nx'\nm(s)\ny'\nc (s)\nε' (s)\ny'\nco(s)\ny'\nsp,e(s)\ny'\ns (s)\nprocess\ncontroller\nsensor\nfinal\ncontrol\nelement\nGsp(s)\ny'\nsp(s)\n\nFigure 4.14-1: General block diagram of feedback control loop\n\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\nThe output signal that we have designated as the controlled variable y′c is\nmeasured by a sensor. In our mixing tank example, we need some\nmeasurement that reliably indicates composition; depending on the nature\nof the solution, it might be a chromatograph, conductivity meter,\nspectrometer, densitometer, etc.\n\nThe controller subtracts the sensor signal y′s from the set point y′sp and\nexecutes the controller algorithm Gc(s) on the error. The subtraction is\nsometimes said to take place in the comparator.\n\nThe controller output y′co drives a final control element to produce\nmanipulated variable x′m. In chemical process industries this is most often\na valve in a pipe carrying some fluid stream, but it could also be a motor, a\nheater control, etc.\n\n4.15\ntransfer functions for loop components\nAlthough we are not yet ready to address hardware, we can improve our\ndescription of equipment behavior by posing transfer functions for each of\nthe closed loop components indicated in Figure 4.14-1. Notice that a\ntransfer function has two main parts: steady and dynamic.\n- The steady part is the gain; gain indicates the magnitude of the effect\nof the transfer function on the input signal, and it performs the units\nconversion between input and output. In (4.11-3), the transfer function\nthat converts make-up flow Fc into outlet concentration CA2 has a gain\nof CAc/F. The gain depends on these two process parameters, and the\nunits are chosen to be consistent with those of the input and output\nsignals. The other transfer function in (4.11-3) has a dimensionless\nunity gain, independent of process parameters.\n- The dynamic part is everything else - all the system time constants and\nthe functions of the Laplace variable s. The dynamic part\ncharacterizes the way that an input signal is processed in time. In\n(4.11-3), both transfer functions feature second-order dynamics.\n\nsensor\nLet us presume that the sensor is fast - really fast - so that negligible time\nelapses between a change in the controlled variable yc and its\nmeasurement ys. Then the transfer function is\n\n'\nc\ns\n'\ns\ny\nK\ny =\n\n(4.15-1)\n\nBeing really fast means that the transfer function has NO dynamic part.\nSuch a transfer function indicates a \"pure gain\" process, one in which\nchanges in the input are \"instantaneously\" seen in the output. The\ndimensions of the gain Ks are\n\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\niable\nvar\ncontrolled\nin\n_\ncontroller\n)\n(\nKs =\n\n(4.15-2)\n\nwhere the sensor is presumed to deliver the measurement to the controller\nin suitable \"controller_in\" units.\n\ncontroller\nWe see that a proportional controller is also a pure gain process between\nerror signal and controller response.\n\n'\nc\n'\nco\nK\ny\nε\n=\n\n(4.15-3)\n\nwhere the error is conventionally defined with the set point as positive:\n\n'\ns\n'\nsp\n'\ny\ny\n-\n=\nε\n\n(4.15-4)\n\nFor now we will leave the controller signal dimensions unspecified.\nHowever, we can be sure that the gain has dimensions of\n\nin\n_\ncontroller\nout\n_\ncontroller\n)\n(\nKc =\n\n(4.15-5)\n\nset point\nThe error signal has dimensions suitable for the controller, which implies\nthat ysp and ys have the same units. However, the operator might prefer to\nhave the set point expressed in the units of the controlled variable (so-\ncalled engineering units), which implies that ysp,e and yc have the same\nunits. The set point transfer function performs this unit conversion; it is a\npure gain process with gain identical to that of the sensor. That is\n\n(4.15-6)\ns\nsp\nK\nG\n=\n\nfinal control element\nThe valve is a mechanical device that takes some time to move. We might\nimagine that a valve can change more quickly than a large chemical\nprocess vessel, and thus that for many control applications the valve\ndynamics can be neglected. In our case, however, we will assume that the\nvalve operates with first-order dynamics, such that\n\n'\nco\nv\nv\n'\nm\ny\ns\nK\nx\n+\nτ\n=\n\n(4.15-7)\n\nThe valve gain has dimensions of\n\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\nout\n_\ncontroller\nflow\n)\n(\nK v =\n\n(4.15-8)\n\nCLOSED LOOP BEHAVIOR\n\n4.16\nassembling the components into a closed loop\nThe closed loop block diagram in Figure 4.14-1 shows how the loop\ncomponents are arranged. The transfer functions for the various\ncomponents are defined in Section 4.15. We will now use the block\ndiagram rules to derive the equations for the closed loop, in three steps:\n- in general, good for any application of Figure 4.14-1\n- applying the choices we made in Section 4.15\n- adapting the general nomenclature of Section 4.15 to the two-tank\nmixing process\n\nWe begin with the controlled variable, which is the output of the closed\nloop system, and work backward through the diagram until all paths are\ntraced and the inputs appear.\n\n(\n))s(\ny\nG\n)s(\ny\nG\nG\nG\nG\n)s(\nx\nG\n)s(\nG\nG\nG\n)s(\nx\nG\n)s(\nx\nG\n)s(\nx\nG\n)s(\ny\n'\nc\ns\n'\ne,\nsp\nsp\nc\nv\nm\n'\nd\nd\n'\nc\nv\nm\n'\nd\nd\n'\nm\nm\n'\nd\nd\n'\nc\n-\n+\n=\nε\n+\n=\n+\n=\n\n(4.16-1)\n\nAt this point, we collect the controlled variable on the left-hand side.\n\n(\n)\n(\n)\n(\n)\n)s(\ny\nG\nG\nG\nG\nG\nG\nG\nG\n)s(\nx\nG\nG\nG\nG\nG\n)s(\ny\n)s(\ny\nG\nG\nG\nG\n)s(\nx\nG\nG\nG\nG\nG\n)s(\ny\n'\ne,\nsp\ns\nc\nv\nm\nsp\nc\nv\nm\n'\nd\ns\nc\nv\nm\nd\n'\nc\n'\ne,\nsp\nsp\nc\nv\nm\n'\nd\nd\ns\nc\nv\nm\n'\nc\n+\n+\n+\n=\n+\n=\n+\n\n(4.16-2)\n\nEquation (4.16-2) shows how a controlled variable responds to a\ndisturbance and set point inputs. It is derived from Figure 4.14-1 and\napplies to any system that can be represented by the figure.\n\nWe now specialize (4.16-2) with transfer functions we defined in Section\n4.15. These use the general nomenclature of Figure 4.14-1, but depend on\nassumptions we made about fast sensors and first-order valves.\n\n)s(\ny\nK\nK\ns\nK\nG\nK\nK\ns\nK\nG\n)s(\nx\nK\nK\ns\nK\nG\nG\n)s(\ny\n'\ne,\nsp\ns\nc\nv\nv\nm\ns\nc\nv\nv\nm\n'\nd\ns\nc\nv\nv\nm\nd\n'\nc\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n+\nτ\n+\n+\nτ\n+\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n+\nτ\n+\n=\n\n(4.16-3)\n\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\nEquation (4.16-3) begins to show how the general transfer functions\nbecome specific functions of the Laplace variable s. Now we further\nspecialize (4.16-3) to the two-tank problem by substituting the process\ntransfer functions and specific nomenclature from (4.11-3) or,\nequivalently, Figure 4.11-1.\n\n(\n)(\n)\n(\n)(\n)\n(\n)(\n)\n(\n)(\n)\n)s(\nC\nK\nK\ns\nK\ns\ns\nF\nC\nK\nK\ns\nK\ns\ns\nF\nC\n)s(\nC\nK\nK\ns\nK\ns\ns\nF\nC\ns\ns\n)s(\nC\n'\nsp\n,2\nA\ns\nc\nv\nv\nAc\ns\nc\nv\nv\nAc\n'\nAi\ns\nc\nv\nv\nAc\n'\nA\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n+\nτ\n+\nτ\n+\nτ\n+\n+\nτ\n+\nτ\n+\nτ\n+\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n+\nτ\n+\nτ\n+\nτ\n+\n+\nτ\n+\nτ\n=\n\n(4.16-4)\n\nBeneath its apparent complexity, (4.16-4) simply tells how the outlet\nconcentration reacts to disturbances and to a set point input. This closed-\nloop response is compared in Figure 4.16-1 to the open-loop response of\nthe process.\n\n(\n)(\n)\n(\n)(\n)\n)s(\nF\ns\ns\nF\nC\n)s(\nC\ns\ns\n)s(\nC\n'\nc\nAc\n'\nAi\n'\nA\n+\nτ\n+\nτ\n+\n+\nτ\n+\nτ\n=\n(\n)(\n)\n(\n)(\n)\n(\n)(\n)\n(\n)(\n)\n)s(\nC\nK\nK\ns\nK\ns\ns\nF\nC\nK\nK\ns\nK\ns\ns\nF\nC\n)s(\nC\nK\nK\ns\nK\ns\ns\nF\nC\ns\ns\n)s(\nC\n'\nsp\n,2\nA\ns\nc\nv\nv\nAc\ns\nc\nv\nv\nAc\n'\nAi\ns\nc\nv\nv\nAc\n'\nA\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n+\nτ\n+\nτ\n+\nτ\n+\n+\nτ\n+\nτ\n+\nτ\n+\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n+\nτ\n+\nτ\n+\nτ\n+\n+\nτ\n+\nτ\n=\ntransfer function for disturbance\nother inputs\n(\n)(\n)\n(\n)(\n)\n)s(\nF\ns\ns\nF\nC\n)s(\nC\ns\ns\n)s(\nC\n'\nc\nAc\n'\nAi\n'\nA\n+\nτ\n+\nτ\n+\n+\nτ\n+\nτ\n=\n(\n)(\n)\n(\n)(\n)\n(\n)(\n)\n(\n)(\n)\n)s(\nC\nK\nK\ns\nK\ns\ns\nF\nC\nK\nK\ns\nK\ns\ns\nF\nC\n)s(\nC\nK\nK\ns\nK\ns\ns\nF\nC\ns\ns\n)s(\nC\n'\nsp\n,2\nA\ns\nc\nv\nv\nAc\ns\nc\nv\nv\nAc\n'\nAi\ns\nc\nv\nv\nAc\n'\nA\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n+\nτ\n+\nτ\n+\nτ\n+\n+\nτ\n+\nτ\n+\nτ\n+\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n+\nτ\n+\nτ\n+\nτ\n+\n+\nτ\n+\nτ\n=\ntransfer function for disturbance\nother inputs\n\nFigure 4.16-1: Comparing open- and closed-loop responses\n\nIt is clear that the disturbance response has a different character, because\nthe transfer function has changed. IF we made a good decision on control\nalgorithm, and IF we tune the controller properly, the closed-loop response\nshould be better.\n\n4.17\nsome perspective on how we derived the closed-loop response\nRemember what we did: we proposed a block diagram of feedback control\nand derived the associated transfer functions between inputs and output.\nThen we substituted the component transfer functions appropriate to our\nparticular problem.\n\nInstead of the block diagram algebra, we could have combined the Laplace\ndomain equations of Section 4.15 directly, eliminating intermediate\nvariables until we arrived at (4.16-4).\n\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\nFurthermore, we could have proceeded entirely in the time domain, as we\ndid in Lesson 3. That is, the second-order process ODE could have been\ncombined with the first-order valve ODE and algebraic equations for\nsensor and controller to arrive at an ODE for the controlled variable with\ndisturbance and set point forcing functions.\n\nWe have used new tools - the Laplace transform and the block diagram -\nbut the underlying objective, and the relationships between inputs and\noutputs, were the same as working in the time domain. This is not\nmysterious.\n\n4.18\ncalculating closed-loop responses\nBut how does the closed-loop perform? We approach this by simplifying\n(4.16-4).\n\n)s(\nC\nF\nC\nK\nK\nK\ns\ns\ns\nF\nC\nK\nK\nK\n)s(\nC\nF\nC\nK\nK\nK\ns\ns\ns\ns\n)s(\nC\n'\nsp\n,2\nA\nv\nAc\ns\nc\nv\nv\nv\nv\nv\nAc\ns\nc\nv\n'\nAi\nv\nAc\ns\nc\nv\nv\nv\nv\nv\nv\n'\nA\nτ\nτ\nτ\n+\n+\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\nτ\nτ\nτ\nτ\n+\nτ\n+\nτ\n+\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\nτ\n+\nτ\n+\nτ\n+\nτ\nτ\nτ\n+\n+\nτ\nτ\nτ\n+\n+\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\nτ\nτ\nτ\nτ\n+\nτ\n+\nτ\n+\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\nτ\n+\nτ\n+\nτ\n+\nτ\nτ\nτ\n+\nτ\n=\n\n(4.18-1)\n\nClearly we did not succeed at that... As with (4.5-4) and (4.11-3), we\nwould like to substitute a particular disturbance for C′Ai(s) in (4.18-1) and\ninvert the result to obtain the time response of CA2. Here we encounter an\nobstacle: our transform tables do not feature anything as complicated as\n(4.18-1). Furthermore, to use partial fraction expansion we must find the\nroots of the cubic equation; however, we are unlikely to find an analytical\nexpression for these. That is unfortunate, because it would be helpful to\nknow how the transfer function poles depend on the controller gain Kc.\n\nWe resort to numerical methods. Here is our plan:\n- do a partial-fraction expansion of each transfer function in (4.18-1) in\nterms of the poles\n- multiply each term in the expansion by the disturbance of interest and\ninvert to find the response\n- for a particular value of controller gain Kc, find the poles numerically\n- repeat for different values of Kc to map out the behavior\n\nThis expedient of using numerical calculations does not show us the\nfunctional dependence of the response on the parameters, but it does get\nthe job done.\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\n\nWe will begin with the disturbance transfer function in (4.18-1). The\npolynomial ratio part of the transfer function is written as the sum of\nfractions.\n\n(\n)(\n)(\n)\nv\nv\nAc\ns\nc\nv\nv\nv\nv\nv\ns\nC\ns\nC\ns\nC\ns\ns\ns\ns\nF\nC\nK\nK\nK\ns\ns\ns\ns\nα\n-\n+\nα\n-\n+\nα\n-\n=\nα\n-\nα\n-\nα\n-\n+\nτ\n=\nτ\nτ\nτ\n+\n+\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\nτ\nτ\nτ\nτ\n+\nτ\n+\nτ\n+\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\nτ\n+\nτ\n+\nτ\n+\n+\nτ\n\n(4.18-2)\n\nThe poles of the transfer function are αi, and the coefficients Ci depend on\nthese poles, as well as the numerator. We will keep in mind that both αi,\nand Ci depend on the system time constants and gains, as well as the\ncontroller gain Kc. Solving for the coefficients is an algebra problem. The\nresults are\n\n(\n)(\n)\n(\n)(\n)\n(\n)(\n)\nv\nv\nv\nC\nC\nC\nα\n-\nα\nα\n-\nα\n+\nα\nτ\n=\nα\n-\nα\nα\n-\nα\n+\nα\nτ\n=\nα\n-\nα\nα\n-\nα\n+\nα\nτ\n=\n\n(4.18-3)\n\nThus numerical values of coefficients Ci can be computed for each set of\npoles αi.\n\nNow we use expansion (4.18-2) to rewrite (4.18-1) for a disturbance\nresponse. With no change in set point, C′A2,sp(s) is identically zero.\n\n)s(\nC\ns\nC\ns\nC\ns\nC\n)s(\nC\ns\nC\ns\nC\ns\nC\n)s(\nC\n'\nAi\nv\n'\nAi\nv\n'\nA\n⎥\n⎥\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎢\n⎢\n⎣\n⎡\n+\nα\n-\nα\n-\n+\n+\nα\n-\nα\n-\n+\n+\nα\n-\nα\n-\nτ\nτ\nτ\n=\n⎥⎦\n⎤\n⎢⎣\n⎡\nα\n-\n+\nα\n-\n+\nα\n-\nτ\nτ\nτ\n=\n\n(4.18-4)\n\nNow, as an example, we pose a step disturbance in the inlet composition.\n\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\n\ns\nt\n'\nAi\nd\n'\nAi\nd\ne\ns\nC\n)s(\nC\n)\nt\nt(\nCU\n)t(\nC\n-\nΔ\n=\n-\nΔ\n=\n\n(4.18-5)\n\nWe substitute the step disturbance (4.18-5) into the system model (4.18-4)\nto obtain\n\ns\nt\nv\n'\nA\nd\ne\ns\ns\nC\ns\ns\nC\ns\ns\nC\nC\n)s(\nC\n-\n⎥\n⎥\n⎥\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎢\n⎢\n⎢\n⎣\n⎡\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n+\nα\n-\nα\n-\n+\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n+\nα\n-\nα\n-\n+\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n+\nα\n-\nα\n-\nτ\nτ\nτ\nΔ\n=\n\n(4.18-6)\n\nEach term inverts to a step response. Remembering to apply the time\ndelay, we find the result\n\n(\n)\n(\n)\n(\nd\nd\nd\n(t t )\n(t t )\n(t t )\nd\nA2\nv\nCU(t\nt )\nC\nC\nC\nC\n(t)\n1 e\n1 e\n1 e\nα\n-\nα\n-\nα\n-\n⎡\n⎤\nΔ\n-\n-\n-\n-\n′\n=\n-\n+\n-\n+\n-\n⎢\n⎥\nτ τ τ\nα\nα\nα\n⎣\n⎦) (4.18-7)\n\nExamining (4.18-7) we learn that the exponential terms contribute\naccording to the magnitude of the pole αi: small poles (larger time\nconstants) cause the term to persist. We see that there will be offset,\nbecause C′\nA2 does not go to zero at long times. The amount of offset will\ndepend on the magnitude of the coefficients Ci; our experience in Lesson 3\nwould suggest that these will become smaller as the controller gain Kc\nincreases.\n\n4.19\ncalculating the response for a particular example\nWe begin with similar parameter values to our example in Lesson 3:\nF = 1.2 m3 min-1\nFc,r = 6×10-3 m3 min-1\nV1 = 6 m3 (thus τ1 = 5 min)\nV2 = 4 m3 (thus τ2 = 3.33 min)\nCAi,r = 8 kg m-3\nCAo,r = 10 kg m-3\nCAc = 400 kg m-3\nτv = 0.1 min\nKv = 0.01 m3 min-1 controller_out-1\nKs = 0.5 controller_in m3 kg-3\n\nWe may calculate roots in (4.18-2) with calculators, spreadsheets, or\ncomputer code. For example, using matlab we obtain roots of polynomial\ns2 + 3s +4 by\n\n>> roots ([1 3 4])\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\n\nans =\n\n-1.5000 + 1.3229i\n-1.5000 - 1.3229i\n\nTable 4.19-1: poles of closed loop disturbance transfer function\nKc (out in-1)\nα1 (min-1) α2 (min-1)\nα3 (min-1)\n-10\n-0.2\n-0.3\n0.012\n-10.0001\n-0.2143\n-0.2856\n0.024\n-10.0003\n-0.2437\n-0.2561\n\nNotice that zero controller gain leads to poles equal to the negative inverse\nof the three system time constants. Thus our closed-loop transfer function\nreduces to describe the behavior of the process alone, under open-loop\nconditions. After using the poles in Table 4.19-1 to compute the solution\n(4.18-7) we obtain a plot of the response behavior. Indeed controller gain\ncan be increased to reduce the effects of the input disturbance.\n\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\n0.00\n0.20\n0.40\n0.60\n0.80\n1.00\n1.20\ntime (min)\noutlet composition deviation (kg m\n-3)\n-0.5\n0.5\n1.5\ninlet comp deviation (kg m\n-3)\n-2.5\n-2.0\n-1.5\n-1.0\n-0.5\n0.0\nmake-up deviation (10\n-6 m\n3 s\n-1)\nKc = 0\n0.012\n0.024\n0.00\n0.20\n0.40\n0.60\n0.80\n1.00\n1.20\ntime (min)\noutlet composition deviation (kg m\n-3)\n-0.5\n0.5\n1.5\ninlet comp deviation (kg m\n-3)\n-2.5\n-2.0\n-1.5\n-1.0\n-0.5\n0.0\nmake-up deviation (10\n-6 m\n3 s\n-1)\nKc = 0\n0.012\n0.024\n\nFigure 4.19-1: Step response of two tanks under proportional control\n\n4.20\nsurprise - increasing gain introduces oscillations!\nWe have been very tentative with the gain setting, so we act more\naggressively to suppress offset. The poles become complex!\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\n\nTable 4.20-1: complex poles of transfer function\nKc (out in-1)\nα1 (min-1)\nα2 (min-1)\nα3 (min-1)\n0.1\n-10.001\n-0.249 + j0.088\n-0.249 - j 0.088\n-10.10\n-0.198 + j1.00\n-0.198 - j1.00\n-10.48\n-0.011 + j2.20\n-0.011 - j2.20\n\nWe must modify (4.18-7) to accommodate complex numbers. The roots\nα2 and α3 are complex conjugates, and (recalling our discussion of partial\nfraction expansion) so are coefficients C2 and C3. We define four new real\nquantities to replace the complex ones:\n\njB\nA\nC\njB\nA\nC\njb\na\njb\na\n-\n=\nα\n+\n=\nα\n-\n=\nα\n+\n=\nα\n\n(4.20-1)\n\nWe substitute these definitions into (4.18-7), recalling Euler's relation,\n\n(\n)\n(\nbt\nsin\nj\nbt\ncos\ne\ne\nat\nt\njb\na\n+\n=\n+\n)\n(4.20-2)\n\nto obtain\n\n(\n)\n(\n)⎥⎦\n⎤\n⎢⎣\n⎡\n-\n-\n-\n+\n-\n-\nα\n-\nτ\nτ\nτ\n-\nΔ\n=\n-\n-\nα\n)\nt\nt(\nb\nsin\nB\n)\nt\nt(\nb\ncos\nA\ne\nA\ne\nC\n)\nt\nt(\nCU\n)t(\nC\nd\nd\n)\nt\nt(\na\n)\nt\nt(\nv\nd\n'\nA\nd\nd\n(4.20-3)\n\nParameters A, B, a, and b are not variables with time, in the sense of CA2,\nbut they do depend on the value of the controller gain Kc. Parameters a\nand b are found (via the root-finding procedure) in Table 4.20-1. A and B\ncome via complex algebra from (4.18-3).\n\n(\n)\n(\n)(\n)\n[\n]\n(\n)(\n)\n(\n)\n(\n)(\n)\n[\n]\nv\nv\nb\na\nb\na\nb\nb\na\na\na\nb\na\nB\nb\na\nb\na\nb\nab\nb\nb\na\nb\nA\n+\n-\nα\n+\n+\n-\nα\n+\n-\nα\n+\nτ\n=\n+\n-\nα\n+\n-\nα\n+\n+\nτ\n-\n=\n\n(4.20-4)\n\nTaking data from Table 4.20-1 and using (4.20-4), we can plot response\n(4.20-3).\n\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\n-0.5\n0.5\n1.5\ninlet comp deviation (kg m\n-3)\n-14\n-12\n-10\n-8\n-6\n-4\n-2\nmake-up flow deviation (10\n-5 m\n3 s\n-1)\n0.00\n0.10\n0.20\n0.30\n0.40\n0.50\n0.60\n0.70\n0.80\n0.90\ntime (min)\noutlet composition deviation (kg m\n-3)\nKc = 0.1\n-0.5\n0.5\n1.5\ninlet comp deviation (kg m\n-3)\n-14\n-12\n-10\n-8\n-6\n-4\n-2\nmake-up flow deviation (10\n-5 m\n3 s\n-1)\n0.00\n0.10\n0.20\n0.30\n0.40\n0.50\n0.60\n0.70\n0.80\n0.90\ntime (min)\noutlet composition deviation (kg m\n-3)\nKc = 0.1\n\nFigure 4.20-1: Oscillatory step response\n\nFor the single tank of Lesson 3, the closed loop behavior was qualitatively\nthe same as that of the process itself. Here, however, closing the loop has\nintroduced behavior we would NOT see in the process alone: the response\nvariable oscillates in response to a steady input. The key is the third-order\ncharacteristic equation, which can admit complex roots. The transfer\nfunction is third order because the second-order process was placed in a\nfeedback loop with a first-order valve. If the system mathematics provide\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\na true representation of the process equipment, we will see oscillations in\noperation.\n\n4.21\nclosed-loop stability by the Bode criterion\nFigure 4.20-1 shows us that, despite the onset of oscillations, increasing\ngain suppresses the offset. However, we must still be mindful of the\npossibility of instability. In Figure 4.21-1 we plot the poles on a complex\nplane. We see that increasing gain brings the closed loop to the point of\noscillation and then increases the imaginary (oscillatory) component. We\nobserve also that the real component approaches zero. Recalling that\nstability depends on the real parts of the poles being negative, we see that\nthe closed loop will become unstable at a controller gain between 50 and\n60.\n\n-4.00\n-3.00\n-2.00\n-1.00\n0.00\n1.00\n2.00\n3.00\n4.00\n-12\n-10\n-8\n-6\n-4\n-2\nreal (min-1)\nimaginary (min\n-1)\narrows show increasing Kc\nfrom 0 to 100\n-4.00\n-3.00\n-2.00\n-1.00\n0.00\n1.00\n2.00\n3.00\n4.00\n-12\n-10\n-8\n-6\n-4\n-2\nreal (min-1)\nimaginary (min\n-1)\narrows show increasing Kc\nfrom 0 to 100\n\nFigure 4.20-1: Root locus plot\n\nThis root locus plot provides a map of the stability limit; this is\nparticularly helpful, because we were unable to derive a single expression\nthat showed the effect of controller gain on the real parts of the poles. We\nmight imagine that finding the poles will only become more difficult as we\nconsider more complicated processes and controllers. Hence we introduce\nan alternative means of predicting stability: the Bode criterion.\n\nWe develop the criterion intuitively; recalling Figure 4.14-1, we begin by\nrealizing that instability in a previously stable system happens because of\nfeedback in a closed loop. Suppose that the output signal y′\nc contains\nsome fluctuating component at a particular frequency ωc. This component\nis inverted in the comparator by being subtracted from the set point, and is\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\nfed to the controller. If the loop (process, controller, sensor, valve, etc.)\ncontributes a phase delay of -180° at frequency ωc, the inverted signal\nreturns to the output in phase to reinforce the fluctuation. If in addition\nthe amplitude ratio at ωc is greater than one, the fluctuation will grow.\n\nWe are not contriving a circumstance here. In any realistic process there\nwill be small disturbances, fluctuations over a wide domain of frequency.\nThe loop processes these fluctuations according to its frequency response\ncharacteristics. Depending on the amplitude ratio, signals at some\nfrequencies may be amplified. Assuredly, signals at high frequencies will\nbe delayed by at least 180°. If these conditions overlap, there will be an\noscillating signal that will grow. We need not supply it; the system will\nselect it from the spectrum of background noise. This intuitive\ndevelopment is described in more detail by Marlin (Sec.10.6).\n\nTo turn our intuition into a method, we return to the general description of\nthe closed loop transfer function in (4.16-2). Recall that the poles are the\nroots of the characteristic equation, which is the denominator of the\ntransfer function. This characteristic equation is always of the form 1 plus\nthe product of the transfer functions around the loop. For convenience, we\nwill call this product the loop transfer function GL.\n\nL\nm\nv\nc\ns\nG\nG\nG\nG\nG\nequation\nstic\ncharacteri\n+\n=\n+\n=\n\n(4.21-1)\n\nIt is the amplitude ratio and phase angle, that is, the frequency response, of\nGL that determines whether signals will grow in the loop. First we find ωc,\nthe frequency at which the phase delay is -180°. At this crossover\nfrequency, we inspect the amplitude ratio; if it is less than one, the system\nwill attenuate reinforced disturbances, and thus be stable.\n\nThus the Bode criterion evaluates the stability of (1 + GL)-1 from the\nfrequency response of GL.\n\nFor our process, (4.16-4) gives\n\n(\n)(\n)\ns\nc\nv\nv\nAc\nL\nK\nK\ns\nK\ns\ns\nF\nC\n)s(\nG\n+\nτ\n+\nτ\n+\nτ\n=\n\n(4.21-2)\n\nThe phase angle of GL is the sum of the phase angles of the various\nelements in (4.21-2).\n\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\n\n(\n)\n(\n)\n(\n)\nv\nv\nv\ns\nc\nAc\nL\ntan\ntan\ntan\ns\ns\ns\nK\nK\nK\nF\nC\n)\nj(\nG\nωτ\n-\n+\nωτ\n-\n+\nωτ\n-\n+\n=\n+\nτ\n∠\n+\n+\nτ\n∠\n+\n+\nτ\n∠\n+\n∠\n=\nω\n∠\n-\n-\n-\n\n(4.21-3)\n\nEquation (4.21-3) may be solved for the crossover frequency ωc; that is,\nthe frequency at which the loop delays the signal by -180o.\n\n(\n)\n(\n)\n(\n)\nv\nc\nc\nc\ntan\ntan\ntan\nτ\nω\n-\n+\nτ\nω\n-\n+\nτ\nω\n-\n=\n-\n-\n-\n-\nD\n\n(4.21-4)\n\nThe amplitude ratio of GL is the product of the amplitude ratios of the\nvarious elements in (4.21-2).\n\nv\nv\ns\nc\nAc\nv\nv\ns\nc\nAc\nL\nK\nK\nK\nF\nC\ns\ns\ns\nK\nK\nK\nF\nC\n)\nj(\nG\nτ\nω\n+\nτ\nω\n+\nτ\nω\n+\n=\n+\nτ\n×\n+\nτ\n×\n+\nτ\n×\n=\nω\n\n(4.21-5)\n\nWe are particularly interested in the amplitude ratio at the crossover\nfrequency, RAc.\n\nv\nc\nc\nc\nv\ns\nc\nAc\nAc\nK\nK\nK\nF\nC\nR\nτ\nω\n+\nτ\nω\n+\nτ\nω\n+\n=\n\n(4.21-6)\n\nUsing the data in Section 4.19, we find the crossover frequency from\n(4.21-4) to be 2.25 radians minute-1. We notice that phase lag in the loop\ndepends only on the tanks and valve; the proportional controller, being a\n\"pure gain\" system, contributes no lag to the dynamic response of the\nloop. Hence the crossover frequency does not vary with the controller\ngain setting.\n\nUsing the crossover frequency and further data from Section 4.19, we find\nfrom (4.21-6) that the crossover amplitude ratio will be 1 when the\ncontroller gain Kc is 52.55. The effect of controller gain is to amplify the\nsignals in the loop. Around Kc = 52.55, therefore, the system output will\noscillate unabated at frequency ωc. At higher gain settings, the amplitude\nof the oscillation will grow in time. (The frequency of these oscillations\ndepends on the poles of the transfer function.)\n\nFigure 4.21-1 is a Bode plot for the loop transfer function GL, showing\ngains below, at, and above the instability threshold. The stability\nthreshold (amplitude ratio = 1, phase angle = -180°) is shown by a single\npoint at the crossover frequency\n\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\n0.01\n0.1\n0.01\n0.1\namplitude ratio\n-300\n-250\n-200\n-150\n-100\n-50\n0.01\n0.1\nω (radians min\n-1)\nphase angle (deg)\nKc = 100\n52.55\ncrossover point\n0.01\n0.1\n0.01\n0.1\namplitude ratio\n-300\n-250\n-200\n-150\n-100\n-50\n0.01\n0.1\nω (radians min\n-1)\nphase angle (deg)\nKc = 100\n52.55\ncrossover point\n\nFigure 4.21-1: Bode plot for loop transfer function\n\nFigure 4.21-2 shows unstable step responses at gains of 60 and 100. The\nlatter response quickly gets out of hand. Notice how the make-up flow\nvaries in response to the increasing error in the outlet composition.\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\n-0.5\n0.5\n1.5\ninlet comp deviation (kg m\n-3)\n-50\n-40\n-30\n-20\n-10\nmake-up flow deviation (10\n-5 m\n3 s\n-1)\n-0.30\n-0.20\n-0.10\n0.00\n0.10\n0.20\n0.30\ntime (min)\noutlet composition deviation (kg m\n-3)\nKc = 100\n-0.5\n0.5\n1.5\ninlet comp deviation (kg m\n-3)\n-50\n-40\n-30\n-20\n-10\nmake-up flow deviation (10\n-5 m\n3 s\n-1)\n-0.30\n-0.20\n-0.10\n0.00\n0.10\n0.20\n0.30\ntime (min)\noutlet composition deviation (kg m\n-3)\nKc = 100\n\nFigure 4.21-2: Step response for two-tank process at high gains\n\n4.22\ntuning based on stability limit - gain and phase margin\nWe tune a controller seeking good performance, somewhere between the\nextremes of \"no control\" and \"instability\". One method of tuning is\nsimply to maintain a reasonable distance from the instability limit and\npresume that the result is an improvement over having no control. Thus,\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\nwe find the instability threshold and tune the controller to leave margins\nbetween these conditions and normal operation. The margins are\nindicated in Figure 4.22-1, which shows a Bode plot for the loop transfer\nfunction GL at some arbitrary controller setting.\n\nRAc\nφ1\n-180\nωc\nω1\nGM > 1\nPM > 0\nRA\nφ\nω\n(1)\n(2)\n(3)\n(4)\nRAc\nφ1\n-180\nωc\nω1\nGM > 1\nPM > 0\nRA\nφ\nω\n(1)\n(2)\n(3)\n(4)\n\nFigure 4.22-1: Illustration of gain margin and phase margin at a\nsingle controller setting\n\nThe gain margin and phase margin are the distances shown on the\nordinates. Their definitions are\n\n(\n)\n(\n)\nstability\nfor\nPM\nstability\nfor\nR\nGM\nAc\n>\nφ\n+\n=\n>\n=\nD\n\n(4.22-1)\n\nThe controller setting determines the amplitude ratio and phase angle\ncurves. From those curves we then calculate the margins to see if they are\nsatisfactory:\n\n(1) use a phase angle of -180° to find the crossover frequency ωc\n(2) use an amplitude ratio of 1 to find the frequency ω1\n(3) use ωc to find the amplitude ratio RAc, and thus GM\n(4) use ω1 to find the phase angle φ1, and thus PM\n\nIn Figure 4.22-1, the system is stable. However, as the controller gain is\nincreased, the Bode plot will shift so that ω1 and ωc approach each other.\nAt the instability threshold, ω1 equals ωc, the gain margin is 1, and phase\nmargin is zero.\n\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\nA procedure for tuning proportional controllers by stability margin is:\n\n(1) use a phase angle of -180° to find the crossover frequency ωc\n(2) at ωc, find the gain that makes RAc = 1 (stability limit)\n(3) at ωc, reduce the gain to make RAc = 1/GM (gain margin)\n(4) use a phase angle of PM -180° to find the frequency ω1\n(5) at ω1, find the gain that makes RA = 1 (phase margin)\n\nMarlin (Sec.10.8) recommends tuning to maintain GM ~ 2 and PM ~ 30°.\nTypically one or the other will be limiting.\n\nFigure 4.22-2 shows the results of calculations for our tank example.\nEarlier, we found the crossover frequency from (4.21-4). Then (4.21-6)\nwas solved for the controller gain that gave RAc = 0.5 (thus GM = 2). The\nresult was Kc = 26.3. Then (4.21-3) was solved for the frequency ω1 to\ngive a phase angle of -150° (thus PM = 30°). Then (4.21-5) was solved\nfor the controller gain that gave an amplitude ratio of 1 at frequency ω1.\nThe result was a much lower gain of 7. Therefore for our system, PM is\nlimiting, and the lower gain would be chosen. For reference, Figure 4.22-\n2 also shows the stability limit determined earlier.\n\nThe gain and phase margins have given us a tuning criterion for selecting\na controller gain. Using the chosen gain, we can now predict the\nperformance in response to disturbances and set point changes. The\ncalculations would be similar to those illustrated in Sections 4.19 and\n4.20: a partial fraction expansion leading to an expression for the\nresponse, with parameter values based on numerical root-finding.\n\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\n0.01\n0.1\n0.01\n0.1\namplitude ratio\n-300\n-250\n-200\n-150\n-100\n-50\n0.01\n0.1\nω (radians min\n-1)\nphase angle (deg)\nKc = 52.55\n26.3\n0.01\n0.1\n0.01\n0.1\namplitude ratio\n-300\n-250\n-200\n-150\n-100\n-50\n0.01\n0.1\nω (radians min\n-1)\nphase angle (deg)\nKc = 52.55\n26.3\n\nFigure 4.22-2: Bode plot illustrating GM and PM limits on gain\n\n4.23\nconclusion\nWe have completed dynamic analysis and control of a more complicated\nprocess than in Lesson 3. In doing so we have introduced new tools for\nanalysis - the Laplace transforms and block diagrams - and developed\nstability and tuning criteria.\n\nWas it a good idea to listen to the appealing advisor and put the make-up\nflow into the first tank? A good way to examine the question would be to\nrepeat the full analysis for the other case. Even without doing that,\nhowever, we might reflect how removing one lag from the system might\naffect the Bode stability criterion for the closed loop...\n\n4.24\nreference\nMarlin, Thomas E. Process Control. 2nd ed. Boston, MA: McGraw-Hill, 2000.\nISBN: 0070393621.\n\n4.25\nnomenclature\na\nconstant\nrevised 2006 Mar 6\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 4: Two Tanks in Series\nA\nconstant\nA1,A2 constants of integration\nb\nconstant\nB\nconstant\nC\nconstant\nC1... constants in partial fraction expansion\nCA1\nintermediate stream concentration of solute A\n\nCA2\nexit stream concentration of solute A\nCAc\nmake-up stream concentration of solute A\n\nCAi\ninlet stream concentration of solute A\n\nCAs\nreference concentration of solute A at steady state\nΔC\nchange in solute concentration\nF\nvolumetric flowrate\nFc\nvolumetric flowrate of make-up stream\nf\nfunction\nG\ntransfer function\nIm\noperator that takes imaginary part of complex number\nj\nsquare root of -1\nK\ngain (time-independent part of transfer function)\nL\nLaplace operator\nN(s)\npolynomial in s\nr\ndummy variable in polynomial characteristic equation\nRe\noperator that takes real part of complex number\nRA\nthe amplitude ratio of the loop transfer function\nRAc\nthe amplitude ratio of the loop transfer function at the crossover frequency\ns\ncomplex Laplace domain variable\nt\ntime\ntd\ntime at which disturbance occurs\nU\nunit step function\nV1\nvolume of tank 1\nV2\nvolume of tank 2\nx(t)\ninput signal to system\ny(t)\noutput signal from system\nα1 ... roots of polynomial in s\nε\nerror; set point minus controlled variable\nτ1\ntime constant of tank 1\nτ2\ntime constant of tank 2\nτv\ntime constant of valve\nξ\ndummy variable of integration\nω\nradian frequency (has dimensions of radians time-1)\nωc\ncrossover frequency, at which loop transfer function lag is -180°\n\nrevised 2006 Mar 6"
    },
    {
      "category": "Resource",
      "title": "5_heated_tank.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-450-process-dynamics-operations-and-control-spring-2006/dc573f23401eeb5822818fbaa177eaac_5_heated_tank.pdf",
      "content": "Spring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\n5.0\ncontext and direction\nFrom Lesson 3 to Lesson 4, we increased the dynamic order of the\nprocess, introduced the Laplace transform and block diagram tools, took\nmore account of equipment, and discovered how control can produce\ninstability. Now we change the process: our system models have\npreviously depended on material balances, but now we will write the\nenergy balance. We will also introduce the integral mode of control in the\nalgorithm.\n\nDYNAMIC SYSTEM BEHAVIOR\n\n5.1\na heated tank\nWe consider a tank that blends and heats two inlet streams. The heating\nmedium is a condensing vapor at temperature Tc in a heat exchanger of\nsurface area A.\n\nF1 T1\nF2 T2\nF To\nTc\nV\nA\nF1 T1\nF2 T2\nF To\nTc\nV\nA\n\nFor the present, we continue to assume constant mass in an overflow tank.\nWriting the material balance,\n\nF\nF\nF\nρ\n=\nρ\n+\nρ\n\n(5.1-1)\n\nThis is not yet the time for complications: we will approximate the\nphysical properties of the liquid (density, heat capacity, etc.) as constants.\nWe will also simplify the problem by assuming that the flow rates remain\nconstant in time. The energy balance is\n\n(\n)\n)\nT\nT\n(\nFC\n)\nT\nT\n(\nUA\n)\nT\nT\n(\nC\nF\n)\nT\nT\n(\nC\nF\n)\nT\nT\n(\nVC\ndt\nd\nref\no\np\no\nc\nref\np\nref\np\nref\no\np\n-\nρ\n-\n-\n+\n-\nρ\n+\n-\nρ\n=\n-\nρ\n(5.1-2)\n\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\nwhere the overall heat transfer coefficient is U and the thermodynamic\nreference is Tref. We identify a steady-state operating reference condition\nwith all variables at their desired values.\n\n(\n)\n)\nT\nT\n(\nFC\n)\nT\nT\n(\nUA\n)\nT\nT\n(\nC\nF\n)\nT\nT\n(\nC\nF\n)\nT\nT\n(\nVC\ndt\nd\nref\nor\np\nor\ncr\nref\nr\np\nref\nr\np\nref\nor\np\n-\nρ\n-\n-\n+\n-\nρ\n+\n-\nρ\n=\n=\n-\nρ\n\n(5.1-3)\n\nWe subtract (5.1-3) from (5.1-2), define deviation variables, and rearrange\nto standard form.\n\n'\nc\np\n'\np\np\n'\np\np\n'\no\n'\no\np\np\nT\nUA\nFC\nUA\nT\nUA\nFC\nC\nF\nT\nUA\nFC\nC\nF\nT\ndt\ndT\nUA\nFC\nVC\n+\nρ\n+\n+\nρ\nρ\n+\n+\nρ\nρ\n=\n+\n+\nρ\nρ\n\n(5.1-4)\n\nTo make some sense of the equation coefficients, define the tank residence\ntime\n\nF\nV\nR =\nτ\n\n(5.1-5)\n\nand a ratio of the capability for heat transfer to the capability for enthalpy\nremoval by flow.\n\np\nFC\nUA\nρ\n=\nβ\n\n(5.1-6)\n\nβ thus indicates the importance of heat transfer in the mixing of the fluids.\nWe now use (5.1-5) and (5.1-6) to define the dynamic parameters: time\nconstant and gains.\n\nβ\n+\nτ\n=\nτ\nR\n(5.1-7)\n\nThus the dynamic response of the tank temperature to disturbances is\nfaster as heat transfer capability (β) becomes more significant. For no heat\ntransfer (β = 0) the time constant is equal to the residence time.\n\nβ\n+\n= 1\nF\nF\nK\n\n(5.1-8)\nβ\n+\n= 1\nF\nF\nK\n\n(5.1-9)\n\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\nGains K1 and K2 show the effects of inlet temperatures T1 and T2 on the\noutlet temperature. For example, a change in T1 will have a small effect\non To if the inlet flow rate F1 is small compared to overall flow F.\n\nβ\n+\nβ\n= 1\nK3\n\n(5.1-10)\n\nGain K3 shows the effect of changes in the temperature Tc of the\ncondensing vapor. For high heat transfer capability, β is large, and gain\nK3 approaches unity.\n\nOur system model of the heated tank is finally written\n\n'\nc\n'\n'\n'\no\n'\no\nT\nK\nT\nK\nT\nK\nT\ndt\ndT\n+\n+\n=\n+\nτ\n\n(5.1-11)\n\nwhich shows a first-order system with three inputs. As is our custom, we\nwill take the initial condition on T′\no as zero.\n\n5.2\nsolving by laplace transform\nSolution by Laplace transform is straightforward:\n\n{\n}\n{ }\n{ }\n{ }\n{ }\n(\n)\n)s(\nT\ns\nK\n)s(\nT\ns\nK\n)s(\nT\ns\nK\n)s(\nT\n)s(\nT\nK\n)s(\nT\nK\n)s(\nT\nK\n)s(\nT\n)\n(\nT\n)s(\nsT\nT\nL\nK\nT\nL\nK\nT\nL\nK\nT\nL\ndt\ndT\nL\nT\nK\nT\nK\nT\nK\nL\nT\ndt\ndT\nL\n'\nc\n'\n'\n'\no\n'\nc\n'\n'\n'\no\n'\no\n'\no\n'\nc\n'\n'\n'\no\n'\no\n'\nc\n'\n'\n'\no\n'\no\n+\nτ\n+\n+\nτ\n+\n+\nτ\n=\n+\n+\n=\n+\n-\nτ\n+\n+\n=\n+\n⎭\n⎬\n⎫\n⎩\n⎨\n⎧\nτ\n+\n+\n=\n⎭\n⎬\n⎫\n⎩\n⎨\n⎧\n+\nτ\n\n(5.2-1)\n\nOutput T′\no is related to three inputs, each through a first-order transfer\nfunction.\n\n5.3\nresponse of system to step disturbance\nSuppose the tank is disturbed by a step change ΔT1 in temperature T1. We\nhave studied first-order systems, so we already know what the first-order\nstep response looks like: at the time of disturbance td, the output T′\no will\ndepart from its initial zero value toward an ultimate value equal to the\nproduct of gain K1 and the step ΔT1. The time required depends on the\nmagnitude of time constant τ: when time equal to one time constant has\npassed (i.e., t = td + τ) the outlet temperature will be about 63% of its way\ntoward the long-term value.\n\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\nHowever, doing the formalities for two step disturbances and one steady\ninput,\n\n(\n)\n(\n)\nT\nt\nt\nU\nT\nT\nt\nt\nU\nT\nT\n'\nc\nd\n'\nd\n'\n=\n-\nΔ\n=\n-\nΔ\n=\n\n(5.3-1)\n\nWe take Laplace transforms of these input variables:\n\n)s(\nT\ne\ns\nT\n)s(\nT\ne\ns\nT\n)s(\nT\n'\nc\ns\nt\n'\ns\nt\n'\nd\nd\n=\nΔ\n=\nΔ\n=\n-\n-\n\n(5.3-2)\n\nThen we substitute (5.3-2) into the system model (5.2-1).\n\ns\nK\ne\ns\nT\ns\nK\ne\ns\nT\ns\nK\n)s(\nT\ns\nt\ns\nt\n'\no\nd\nd\n+\nτ\n+\nΔ\n+\nτ\n+\nΔ\n+\nτ\n=\n-\n-\n\n(5.3-3)\n\nWe must invert each term; this is most easily done by processing the\npolynomial first and then applying the time delay. Thus\n\nτ\n-\n-\n-\n=\n⎭⎬⎫\n⎩⎨⎧\n+\nτ\nt\ne\ns\ns\nL\n\n(5.3-4)\n(\n)\n⎟⎠\n⎞\n⎜⎝\n⎛-\n-\n=\n⎭\n⎬\n⎫\n⎩\n⎨\n⎧\n⎟\n⎠\n⎞\n⎜\n⎝\n⎛\n+\nτ\nτ\n-\n-\n-\n-\n)\nt\nt(\nd\ns\nt\nd\nd\ne\nt\nt\nU\ne\ns\ns\nL\n\n(5.3-5)\n\nand finally\n\n(\n)\n(\n)\n⎟⎠\n⎞\n⎜⎝\n⎛-\n-\nΔ\n+\n⎟⎠\n⎞\n⎜⎝\n⎛-\n-\nΔ\n=\nτ\n-\n-\nτ\n-\n-\n)\nt\nt(\nd\n)\nt\nt(\nd\n*\no\nd\nd\ne\nt\nt\nU\nT\nK\ne\nt\nt\nU\nT\nK\nT\n\n(5.3-6)\n\nFigure 5.3-1 shows a sample calculation for opposing input disturbances.\nNotice that the gains K1 and K2 are less than unity. This is because we\ndilute each disturbance with other streams: streams of matter (two input\nflows) and energy (through the heat transfer surface). From the plot, can\nyou tell which gain is greater?\n\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\n-4\n-3\n-2\n-1\nt (s)\nT'o (K)\n-10\n-5\nT'1 and T'2 (K)\n\nFigure 5.3-1: Response of outlet temperature to steps in two inlets\n\n5.4\nstability of the heated tank\nSystem model (5.2-1) has one negative pole, s = -τ-1\n, because the time\nconstant is a positive quantity. Hence, the system is stable to all bounded\ninputs. Therefore, a blip in the inlet temperature will not set off wild\ntemperature excursions at the outlet.\n\n5.5\nnumerical solution of ODEs\nAnalytical solutions to equations are desirable, but many useful equations\nsimply cannot be solved. When we \"solve an ODE numerically\" we\nexecute a set of calculations that results in a \"numerical solution\": in\neffect, a table of numbers. One column in that table contains values of the\nindependent variable, and the other column holds associated values of the\ndependent variable. A table of numbers lacks the economy of presentation\nand conceptual insight offered by an analytical expression. However, a\ntable of numbers is much better than no solution, and it can certainly be\nplotted.\n\nMatlab offers a suite of functions for solving differential equations. For\nexample, the following file contains code to produce a plot\nindistinguishable from that of the analytical solution in Figure 5.3-1.\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\n\nfunction heated_tank (tauR, beta, F1frac)\n% program to solve Eqn (5.1-11)\n% the temperature of the heated tank is disturbed by the temperatures of\n% the inlet streams and the condensing temperature of the vapor in the\n% heat exchanger bundle\n\n% INPUT variables\n% tauR residence time in seconds\n% beta heat transfer significance parameter\n% F1frac fraction of flow in stream 1\n\n% OUTPUT variables\n% To the deviation in outlet temperature is plotted\n\n% NOTE: all system variables are in deviation form\n\n% define equation parameters\ntau = tauR/(1+beta) ; % time constant in seconds\nK1 = F1frac/(1+beta) ; % stream 1 gain\nK2 = (1 - F1frac)/(1+beta) ; % stream 2 gain\nK3 = beta/(1+beta) ; % heat exchange gain\n\n% define the disturbances - first interval\ntspan = [0, 10] ; % set the time interval\nToinit = 0 ; % start out at reference condition\nT1 = 0; T2 = 0; Tc = 0; % no disturbances\n\n% integrate the equation\n[t,To] = ode45(@hot_tank,tspan,Toinit,[],tau,K1,K2,K3,T1,T2,Tc) ;\n\n% plot the solution\nplot (t,To)\nhold on % allow plot to be updated with further plotting\n\n% define the disturbances - second interval\ntspan = [10, 50] ; % set the time interval\nToinit = To(size(To,1)); % start out at most recent value\nT1 = 10; T2 = 0; Tc = 0; % introduce step in T1\n\n% integrate the equation\n[t,To] = ode45(@hot_tank,tspan,Toinit,[],tau,K1,K2,K3,T1,T2,Tc) ;\n\n% plot the solution\nplot (t,To)\n\n% define the disturbances - third interval\ntspan = [50, 250] ; % set the time interval\nToinit = To(size(To,1)); % start out at most recent value\nT1 = 10; T2 = -5; Tc = 0; % introduce step in T2\n\n% integrate the equation\n[t,To] = ode45(@hot_tank,tspan,Toinit,[],tau,K1,K2,K3,T1,T2,Tc) ;\n\n% plot the solution\nplot (t,To)\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\nhold off % turn off the plot hold\n\nend % heated_tank\n\n% define the differential equation in a subfunction\nfunction dTodt = hot_tank(t,To,tau,K1,K2,K3,T1,T2,Tc)\ndTodt = (K1*T1 + K2*T2 + K3*Tc - To)/tau ;\nend\n\nThe Matlab function ode45 is one of several routines available for\nintegrating ordinary differential equations. The output arguments are a\ncolumn vector for time t and another for temperature deviation To. The\ninput argument @hot_tank directs ode45 to the subfunction in which\nthe equation is defined. Notice the way in which hot_tank is written:\nthe equation is arranged to calculate the derivative of output variable To\nas a function of To and the input variables. ode45 calls hot_tank\nrepeatedly as it marches through the time interval denoted by the row\nvector tspan.\n\n5.6\nscaled variables versus deviation variables\nWe introduced deviation variables so that any non-zero variable - positive\nor negative - would be seen as a departure from the ideal reference\ncondition. Deviation variables also allowed us to define and use transfer\nfunctions in expressing our system models through Laplace transforms.\n\nWe must, however, finally read real instruments and control real\nprocesses. For these purposes, it is common to represent sensor readings,\ncontroller outputs, and valve-stem positions on a scale of 0 to 100. Such\nscaled variables obscure actual values, but immediately reveal context.\nThat is, a visitor to a control room would not know the significance of a\nparticular tank level reading of 2.6 m, but could interpret 96% easily. An\neveryday example of a sensor that presents a scaled variable is the fuel\ngauge in an automobile.\n\nTo scale physical variable y, for example, we identify the range in which\nwe expect it to vary: from ymin to ymax. We then subtract some bias value\nfrom y and divide the difference by the range:\n\n%\ny\ny\ny\ny\ny\nmin\nmax\nb\n*\n-\n-\n≡\n\n(5.6-1)\n\nIf the bias value yb is set to the minimum ymin, then y* varies between 0\nand 100%. This is the typical control room presentation. If instead the\nbias value is set to the reference value yr, then y* varies from\n\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\n%\ny\ny\ny\ny\ny\n%\ny\ny\ny\ny\nmin\nmax\nr\nmax\n*\nmin\nmax\nr\nmin\n-\n-\n≤\n≤\n-\n-\n\n(5.6-2)\n\nThe scaled range is still 100% wide, but includes both positive and\nnegative regions, depending on where yr lies between ymin and ymax. Of\ncourse, yb may be set to any arbitrary value between the limits, but ymin\nand yr are generally the most useful.\n\nWe will use primes (′) to denote deviation variables and asterisks (*) for\nscaled variables. Unadorned variables will be presumed to be physical.\nTo convert a deviation variable y′ (from an analytical solution, e.g.) for\npresentation as a scaled variable y*, the definitions are combined:\n\n(\n)\n%\ny\ny\ny\ny\ny\ny\nmin\nmax\nb\nr\n'\n*\n-\n-\n+\n≡\n\n(5.6-3)\n\nFor example, Figure 5.6-1 shows a temperature trace expressed in\nphysical, deviation, and scaled form. Because these are linear\ntransformations, the basic character of the variable is unchanged.\n\n5.7\njust when I was getting accustomed to deviation variables!\nWe will tend to use deviation variables for analytic solutions and\nderivations because of the convenience of zero initial conditions. We will\nuse scaled variables for our numerical work, in which each time step\nmoves the solution to a new value from the \"initial condition\" of the\nprevious step.\n\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\nT(oC)\nT*(%)\n-3\nT'(oC)\nt\nT(oC)\nT*(%)\n-3\nT'(oC)\nt\n\nFigure 5.6-1 Expressing the variable in physical, deviation, and scaled forms\n\nCONTROL SCHEME\n\n5.8\nstep 1 - specify a control objective for the process\nOur control objective is to maintain the outlet temperature To at a constant\nvalue. In particular, we prefer not to have offset in response to step-like\ninputs. This means we must do something besides proportional mode.\n\n5.9\nstep 2 - assign variables in the dynamic system\nThe controlled variable is clearly To. The inlet temperatures T1 and T2 are\ndisturbance variables.\n\nBy the model, we are left with the condensing vapor temperature as the\nmanipulated variable. But what sort of valve adjusts temperature? We\nwill discuss this below when we select equipment.\n\n5.10\nstep 3 - PI (proportional-integral) control\nWe introduced proportional control as an intuitively appealing mechanism\n- the response increases with the severity of the error. However,\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\nproportional control suffers from offset. To counter this defect, we\nintroduce a second mode of control, called integral, to complement the\nproportional behavior.\n\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\nε\n+\nε\n=\n-\n∫\nt\n*\nI\n*\n*\nc\n*\nb\n,\nco\n*\nco\ndt\nT\nK\nx\nx\n\n(5.10-1)\n\nwhere x*\nco is the controller output and the controlled variable error is\n\n*\n*\nsp\n*\ny\ny\n-\n=\nε\n\n(5.10-2)\n\nBefore we discuss the integral mode, let us understand why we have\nwritten the controller algorithm in scaled variables. The controller is not\nspecific to a process; it merely produces a response according to the error\nit receives. Hence it is most reasonable to build it so that error and\nresponse are expressed as percentages of a range; whatever y may be as a\nphysical variable, in Equation (5.10-2) the scaled controlled variable y* is\nsubtracted from y*\nsp, which is the preferred position on the scale. The\nresulting error ε* is processed by the controller in Equation (5.10-1) to\ngenerate a scaled output x*\nco. The bias output x*\nco,b is the controller's\nresting state, achieved when there has been no error.\n\nIntegral mode integrates the error, so that the controller output x*\nco, which\ndrives the manipulated variable in the loop, increases with the persistence\nof error ε*, in addition to its severity. The influence of the integral mode is\nset by the magnitude of the integral time TI. In the special case of a\nconstant error input to the controller, TI is the time in which the controller\noutput doubles. Thus decreasing TI strengthens the controller response.\nVery large TI disables the integral mode, leaving a proportional controller.\nThe dimensionless controller gain K*\nc acts on both the proportional and\nintegral modes.\n\nAs an example, let us test a controller in isolation, so that we supply a\ncontrolled variable independently, and the controller output has no effect.\nSuppose we set K*\nc to 1 and TI to 1 minute. Suppose the set point is 40%\nand the bias output 50%. Initially, there is no error, and so the controller\noutput is 50%. Figure 5.10-1 shows the controller response to a step\nincrease in the controlled variable from 40 to 60%. Because the error\nsuddenly becomes -20%, the proportional mode calls for the output to\nchange by -20% (gain of +1). Thus x*\nco becomes 30%. Over the next\nminute, there is no change in the controlled variable. Hence the integral\nmode calls for more controller output. In 1 minute, x*\nco decreases by\nanother 20% and so reaches 10%.\n\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\nAt one minute, we contrive to return the controlled variable to set point, so\nthat the error is again zero. The proportional mode then ceases to call for\noutput. However, the integral mode still remembers the earlier error, and\nso the output returns to 30%, not the original 50%. We will see later that\nwhen the controller is placed in a feedback loop, not isolated as we have\nused it here, the integral mode acts to eliminate offset.\n\ny*(%)\nx*\nco(%)\n-20\nε*(%)\nt\ny*(%)\nx*\nco(%)\n-20\nε*(%)\nt\n\nFigure 5.10-1: response of isolated PI controller to an input pulse\n\nFor our analytical work, we will want to express the controller algorithm\nin deviation variables. We proceed by substituting from definition (5.6-1)\ninto the algorithm (5.10-1) and (5.10-2).\n\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\n(\n)\n(\n)\nmin\nmax\nmin\nmax\n'\n'\nsp\nmin\nmax\nsp\nmin\nmax\nmin\nmin\nmax\nmin\nsp\n*\ny\ny\n%\n\ny\ny\n%\ny\ny\n\ny\ny\n%\ny\ny\n\n%\ny\ny\ny\ny\n%\ny\ny\ny\ny\n-\nε\n=\n-\n-\n=\n-\n-\n=\n-\n-\n-\n-\n-\n=\nε\n\n(5.10-3)\n\nWe can see that ε* represents the physical variable error ε multiplied by a\nratio of scaling ranges. Continuing with the controller output\n\n'\nco\nr,\nco\nco\nb,\nco\nco\nb\n,\nco\nco\n*\nb\n,\nco\n*\nco\nx\n\nx\nx\n\nx\nx\n\n%\n%\n%\nx\n%\n%\n%\nx\nx\nx\n=\n-\n=\n-\n=\n-\n-\n-\n-\n-\n=\n-\n\n(5.10-4)\n\nIn (5.10-4) we recognize that the controller bias is most reasonably\nthought of as its value at the reference condition. Also, because controller\noutput ranges from 0 to 100%, its \"physical\" value is identical to its scaled\nvalue. Rewriting algorithm (5.10-1)\n\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\nε\n+\nε\n=\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\nε\n+\nε\nΔ\n=\n∫\n∫\nt\nI\nc\nt\nI\n*\nc\n'\nco\ndt\nT\nK\n\ndt\nT\ny\n%\nK\nx\n\n(5.10-5)\n\nThe dimensionless controller gain K*\nc (the setting that would actually be\nfound \"on\" the controller itself) is multiplied by the ratio 100% Δy-1 to\nproduce a dimensional quantity Kc. Kc converts the dimensions of the\nerror ε to the % units of controller output xco. If the error ε were expressed\nin the units of a physical variable (a liquid level, for example), Δy would\nperhaps be some number of centimeters. If error were instead expressed\nin terms of the output of a signal transducer on the measuring instrument,\nΔy might be in volts or milliamps.\n\nThe Laplace transform of controller algorithm (5.10-5) is\n\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\nε\n+\nε\n=\n)s(\ns\nT\n)s(\nK\n)s(\nx\nI\nc\n'\nco\n\n(5.10-6)\n\n5.11\nstep 4 - choose set points and limits\nThe heated blending tank might require an occasional change of set point,\ndepending on product grade, time of year, other process conditions, etc.\nAt present we are presuming that the tank is part of a continuous process,\nso that its normal operating mode is to maintain temperature at the set\npoint. Such a tank could also be used in a batch process, however. In this\ncase, the set point might be an active function of time, according to the\nrecipe of the batch.\n\nLimits placed on temperature can be both high and low, depending on the\nprocess. Reasons for imposing high limits are often undesirable chemical\nchanges: polymerization, product degradation, fouling, side reactions.\nBoth high and low limits may be imposed to avoid phase changes: boiling\nand freezing for liquids.\n\nWe institute regulatory control, using, e.g., proportional-integral\ncontrollers, to keep controlled variables within acceptable operating limits.\nHowever, when there are safety limits to be enforced, regulatory control\nmay be superseded by a safety control system. Thus a reactor temperature\nmay normally be regulated within operating limits, but some higher value\nwill trigger an audible alarm in the control room, and some yet higher\nvalue will initiate emergency response or shutdown procedures that\noverride normal regulatory control.\n\nEQUIPMENT\n\n5.12\nthe sensor in the feedback control loop\nTemperature may be measured with a variety of instruments that respond\nto temperature with an electrical signal, including thermocouples,\nthermistors, RTDs (resistance thermometry devices), etc. In this section,\nwe address both the static (calibration) and dynamic (time response)\ncharacteristics of temperature sensors, with reference to our heated tank\nexample.\n\nCalibration of the sensor is determining the relationship between the actual\nquantity of interest (the temperature at some location in the fluid) and the\noutput given by the sensor (which can be a voltage, a current in a circuit, a\ndigital representation, etc., depending on the instrument). When we speak\nof a sensor, we usually refer to both the sensing element (such as the\nbimetallic junction of a thermocouple) and signal conditioning electronics.\nIt is this latter component that produces a linear relationship between\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\ntemperature and sensor output, even though the behavior of the sensing\nelement itself may be nonlinear.\n\nThus we relate the physical temperature To and its sensor reading Ts by\n\ns\no\ns\ns\nb\nT\nK\nT\n+\n=\n\n(5.12-1)\n\nIn a handheld digital thermometer, the electronics are adjusted so that gain\nKs is unity and bias bs is zero: 26oC produces a reading of 26oC. In a\ncontrol loop, however, we are more likely to have To produce an electric\ncurrent that ranges over 4 to 20 mA, where these limits correspond to the\nexpected range of temperature variation. Current loops are a good way to\ntransmit signals over the sorts of distances that separate operating\nprocesses from their control rooms.\n\nThe sensor range is adjusted by varying Ks and bs. For example, suppose\nthat we wish to follow To over the range 50 to 100oC. Then\n\n( )\n(\n)\n(\n)\n(\n)\n(\n)\n(\n)mA\n\nb\n\nK\nmA\n\n.0\nK\n\nb\nC\nK\nmA\n\nb\nC\nK\nmA\n\ns\ns\ns\ns\ns\ns\n-\n=\n=\n⇒\n+\n=\n+\n=\n-\nD\nD\n\n(5.12-2)\n\nWe express the sensor calibration in deviation variables by subtracting the\nreference state from (5.12-1). Suppose we wish to use 75oC as a reference\noperating condition. At the reference, the sensor output will be 12 mA.\n\n'\no\ns\n'\ns\nT\nK\nT =\n\n(5.12-3)\n\nWe obtain a 0 to 100% range by taking the scaled variable reference as the\nminimum temperature.\n\n( )\n(\n)\n(\n)\n(\n)\n%\nC\nC\nT\n%\nmA\nmA\nT\nT\no\ns\n*\ns\nD\nD\n-\n-\n=\n-\n-\n=\n\n(5.12-4)\n\nFrom (5.12-4), we see that the scaled sensor output may be defined in\nterms of the sensor reading or the controlled variable itself. A temperature\nof 75oC causes a sensor output of 12 mA, or 50% of range.\n\nWe now consider the dynamic response of our sensor. Suppose we place\nthe sensor in fluid at 50oC and allow it to equilibrate, so that its output is 4\nmA. We now move the sensor suddenly to another fluid at 100oC; how\nquickly does the sensor respond to this step input? How long until the\noutput becomes 20 mA? Classic textbook treatments of thermocouples\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\nand thermometers indicate that the sensor response is first-order. Hence,\nwe may write the sensor transfer function as\n\n)s(\nT\ns\nK\n)s(\nT\n'\no\ns\ns\n'\ns\n+\nτ\n=\n\n(5.12-5)\n\nIn (5.12-5) Ks is the sensor gain that was determined by calibration in\n(5.12-2) and (5.12-3). The sensor has a time constant τs that depends on,\ne.g., the mass of the sensor element and the rate of heat transfer to the\nsensor. It will follow a step input in T′o with the familiar first-order\nexponential trace.\n\nHowever, we plan to immerse the sensor in a large stirred tank. Therefore,\nwe are unlikely to encounter step changes in To. In fact, it is often the case\nthat the sensor time constant τs is small in comparison to the tank time\nconstant τ, given in (5.1-7). This implies that Ts will keep up with changes\nin To, so that we can simplify (5.12-5) to a pure gain process.\n\n)s(\nT\nK\n)s(\nT\n'\no\ns\n'\ns\n=\n\n(5.12-6)\n\n5.13\nthe valve in the feedback control loop\nPhysically, the controller output dictates the opening of a valve that admits\nthe heating fluid to the heat exchanger. The figure shows a steam supply\nheader, a line to the heat exchanger, and a steam trap at the exit, which\ndelivers condensate to the condensate return header.\n\nsteam supply header\ncondensate return\nsteam trap\nheat exchanger\nbundle in tank\nsteam supply header\ncondensate return\nsteam trap\nheat exchanger\nbundle in tank\n\nViewing the control valve as a dynamic system, we think of the valve\nconverting the controller output (measured as %out) to the temperature of\nthe condensing steam (measured in degrees). This is not quite as\nfarfetched as it may sound:\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\n- the controller output (between 0 and 100%) specifies the position of the valve stem\n(between closed and open).\n- The valve opening varies the resistance presented to the flow.\n- Resistance relates any flow through the valve to the pressure drop required by that\nflow.\n- The pressure drop across the valve relates the steam supply pressure to the pressure at\nwhich the steam condenses in the heat exchanger.\n- The prevailing pressure in the heat exchanger determines the condensing temperature.\n- The condensing temperature determines the rate of heat transfer from vapor to tank.\n- The heat transfer rate determines the rate at which steam condenses to supply the\nheat.\nThus the flow admitted by the valve is the flow that is able to condense at\na temperature high enough to transfer that heat of condensation to the\nliquid in the tank. In short, we open the valve to supply more heat.\n\nLet us not become lost among momentum equation, vapor pressure\nrelationship, empirical flow resistance relationships, etc., which we\ninvoked above. Our purpose is to describe the action of the controller\nupon the condensing temperature, and so we need a gain (from steady-\nstate relationships) and dynamic description (from the rate processes).\nWill a simple first-order description be sufficient?\n\n)s(\nx\ns\nK\n)s(\nT\n'\nco\nv\nv\n'\nc\n+\nτ\n=\n\n(5.13-1)\n\nWe will address this question more thoroughly in Lesson 6. For the\npresent, while not dismissing our skepticism, we will accept (5.13-1).\nThat is, we presume that over some range of operating conditions, at least,\nthe change in condensing temperature is directly proportional to a change\nin controller output. The underlined phrase is a key one: our linear (i.e.,\nconstant gain) model is an approximation, and part of our engineering job\nis to determine how far our model can be trusted.\n\nRegarding dynamic response, the first-order response of Tc to xco is also\nan approximation. In Lesson 4 we used this description of our valve, and\nwe saw that our second-order process combined with the valve to produce\na third-order closed loop. In this lesson, however, we have other topics to\nexplore, so we will presume that the characteristic time τv for changing the\ncondensing temperature is much smaller than the mixing tank time\nconstant τ, so that\n\n)s(\nx\nK\n)s(\nT\n'\nco\nv\n'\nc\n=\n\n(5.13-2)\n\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\nWe have said, then, that we expect the dynamic response of the closed\nloop to depend primarily on the dynamic characteristics of the process,\nand very little on the characteristics of sensor (Section 5.12) and valve\n(Section 5.13).\n\n5.14\nnumerical controller calculations\nIn Lessons 3 and 4, we have expressed controller behavior in\nmathematical terms and predicted the closed loop behavior by solving\nprocess and controller equations simultaneously. We posit \"step\ndisturbance\" and then make a plot of what the equations say. This\ndynamic system representation is useful if it can help us manage real\nequipment.\n\nWe understand that our process is actually a tank, but what does the\ncontroller look like? For many years, the controller was a physical box\nthat manipulated air flow with bellows and dampers; its output was an air\npressure that positioned a valve stem. Coughanowr and Koppel (chap.22)\ndescribe such mechanisms.\n\nNow, the controller is most often a program that runs on a microprocessor.\nThe program input is numbers that represent physical signals from the\nsensor. The algorithm (5.10-1) is computed numerically. The output\nnumbers are fed to a transducer that makes physical adjustments to a\nvalve.\n\nWhereas our analytical solutions represent continuous connection between\ncontroller and process, the computer program controller samples the\nprocess values at intervals. Marlin (chap.11) discusses the effect of\nsampling frequency on controller performance.\n\nA very simple controller program outline is given below:\n\ninitialization\nset up arrays to hold variables\nset controller parameters (Kc*, TI)\n\nloop for automatic control\ninterrogate sensor to determine controlled variable at t_now\nuse comparator to determine set point and calculate error\nuse controller algorithm to calculate controller output at t_now\nadminister controller output to process\nupdate monitor plot with values at t_now\nwait for time interval Δt to pass\nset new value of t_now and return to beginning of loop\n\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\nIn this course, we will embellish this scheme with coding to simulate the\nprocess, as well, so that we can make numerical simulations of processes\nunder control.\n\nCLOSED LOOP BEHAVIOR\n\n5.15\nclosed loop transfer functions\nWe recall the general feedback block diagram introduced in Lesson 4.\nHere we modify it to show our two disturbance inputs, but the control\narchitecture is unchanged.\n\nGd2(s)\nGm(s)\nGs(s)\nGc(s)\nGv(s)\n-\nx'\nd2(s)\nx'\nm(s)\ny' (s)\nε' (s)\nx'co(s)\ny'sp(s)\ny's (s)\nprocess\ncontroller\nfinal\ncontrol\nelement\nGsp(s)\ny'sp,s(s)\nGd1(s)\nx'\nd1(s)\nGd2(s)\nGm(s)\nGs(s)\nGc(s)\nGv(s)\n-\nx'\nd2(s)\nx'\nm(s)\ny' (s)\nε' (s)\nx'co(s)\ny'sp(s)\ny's (s)\nprocess\ncontroller\nfinal\ncontrol\nelement\nGsp(s)\ny'sp,s(s)\nGd1(s)\nx'\nd1(s)\n\nFrom the diagram, our general closed loop model is\n\n(\n)\n(\n)\n(\n)\n)s(\ny\nG\nG\nG\nG\nG\nG\nG\nG\n)s(\nx\nG\nG\nG\nG\nG\n)s(\nx\nG\nG\nG\nG\nG\n)s(\ny\n'\nsp\ns\nc\nv\nm\nsp\nc\nv\nm\n'\nd\ns\nc\nv\nm\nd\n'\nd\ns\nc\nv\nm\nd\n'\nc\n+\n+\n+\n+\n+\n=\n(5.15-1)\n\nWe apply (5.15-1) to our heated tank by inserting the particular transfer\nfunctions from Sections 5.2, 5.12, 5.13, and 5.14. Thus the disturbance\ntransfer function is\n\ns\nK\nK\nK\nK\nK\nK\nK\nK\nT\ns\nK\nK\nK\nK\nT\ns\nK\nK\nK\nK\nT\nK\n)s(\nT\n)s(\nT\nv\nc\ns\nv\nc\ns\nI\nv\nc\ns\nI\nv\nc\ns\nI\n'\n'\no\n+\n+\n+\nτ\n=\n\n(5.15-2)\n\n(and similarly for disturbance T2) and the set point transfer function is\n\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\ns\nK\nK\nK\nK\nK\nK\nK\nK\nT\ns\nK\nK\nK\nK\nT\ns\nT\n)s(\nT\n)s(\nT\nv\nc\ns\nv\nc\ns\nI\nv\nc\ns\nI\nI\n'\nsp\n'\no\n+\n+\n+\nτ\n+\n=\n\n(5.15-3)\n\nAdding integral control to a first order process has resulted in a closed\nloop with second-order dynamics.\n\n5.16\nclosed-loop behavior - set point step response\nResponses to disturbance inputs and set point changes will depend on the\npoles of (5.15-3). These are\n\n(\n)\nτ\n+\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\nτ\n-\n+\n±\n-\n-\n=\nK\nK\nK\nK\nK\nK\nK\nK\nT\nK\nK\nK\nK\ns,\ns\nv\nc\ns\nv\nc\ns\nI\nv\nc\ns\n\n(5.16-1)\n\nWe observe that the poles could be complex, so that the closed loop\nresponse could be oscillatory. The tendency toward a negative square\nroot, and thus oscillation, is exacerbated by reducing the integral time TI.\nWe also observe that the real part of the poles is negative, indicating a\nstable system.\n\nWe illustrate set point step response for real poles, where the set point is\nchanged by magnitude ΔT:\n\n⎥\n⎥\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎢\n⎢\n⎣\n⎡\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n+\nΔ\n=\nt\ns\nI\nt\ns\nI\n'\no\ne\ns\ns\nT\ns\ne\ns\ns\nT\ns\nT\nT\n\n(5.16-2)\n\nThe response is written in terms of poles s1 and s2. Because they are\nnegative, the two exponential terms decay in time, leaving the long-term\nchange in set point as ΔT. Thus we requested that the tank temperature\nchange by ΔT, and the tank temperature changed by ΔT. There is no\noffset - this is the contribution of the integral mode of control.\n\n5.17\nsecond order systems\nIn Lesson 4, we described the two tanks in series as an overdamped\nsecond-order system; now our heated tank with integral-mode control is\nalso second order, but perhaps not overdamped. We defer further\nexploration of our closed loop behavior until we learn more about the\nproperties of second-order systems. Thus we consider\n\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\ndt\ndy\n)\n(\ny\ndt\ndx\nM\n)t(\nKx\n)t(\ny\ndt\ndy\ndt\ny\nd\nt\n=\n=\n+\n=\n+\nβ\n+\nα\n=\n\n(5.17-1)\n\nAs before, we will assume that all initial conditions on response variable\ny(t) are zero, so that the system is initially at steady state, and will be\ndriven only by disturbance x(t). Parameter K has dimensions of y divided\nby x; it is the steady-state gain. Parameter M measures the sensitivity of\nthe system to the rate of change of the disturbance x(t); it has the\ndimensions of K multiplied by time. Both K and M may be positive or\nnegative, as may α and β.\n\nWe solve (5.17-1) by Laplace transform.\n\ns\ns\nK\nMs\n)s(\nx\n)s(\ny\n+\nβ\n+\nα\n+\n=\n\n(5.17-2)\n\nThe behavior of the solution depends fundamentally on the poles of (5.17-\n2). From the properties of the quadratic equation we recall that the poles\nare real for\n\nβ\n<\nα\n\n(5.17-3)\n\nA map relating system stability to coefficients α and β is given in Figure\n5.17-1.\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\n-3\n-2\n-1\n-1.6\n-1.2\n-0.8\n-0.4\n0.4\n0.8\n1.2\n1.6\nalpha\nbeta\nunequal, negative\npoles: stable, non-\noscillating\ncomplex negative\npoles: stable,\noscillating\nimaginary poles:\npersistent\noscillation\ncomplex positive\npoles: unstable,\noscillating\nequal, negative\npoles: stable, non-\noscillating\nequal, positive\npoles: excursively\nunstable\nunequal, positive\npoles: excursively\nunstable\nunequal poles of\nopposite sign:\nexcursively\nunstable\n-3\n-2\n-1\n-1.6\n-1.2\n-0.8\n-0.4\n0.4\n0.8\n1.2\n1.6\nalpha\nbeta\nunequal, negative\npoles: stable, non-\noscillating\ncomplex negative\npoles: stable,\noscillating\nimaginary poles:\npersistent\noscillation\ncomplex positive\npoles: unstable,\noscillating\nequal, negative\npoles: stable, non-\noscillating\nequal, positive\npoles: excursively\nunstable\nunequal, positive\npoles: excursively\nunstable\nunequal poles of\nopposite sign:\nexcursively\nunstable\n\nFigure 5.17-1. Second-order system stability related to equation coefficients\n\nWith real poles, it is convenient to factor the denominator, and thus\nexpress the second-order system in terms of two first-order systems in\nwhich the characteristic times τ1 and τ2 may be positive or negative.\n\n,\nα\n-\nβ\n±\nβ\n=\nτ\nτ\n\n(5.17-4)\n\nWe compare side-by-side second-order and first-order systems:\n\nTable 5.17-1. Second-order system (τ1, τ2 form) - real poles\n\nsecond-order\nfirst-order\nequation\n(\n)\ndt\ndy\n)\n(\ny\ndt\ndx\nM\n)t(\nKx\n)t(\ny\ndt\ndy\ndt\ny\nd\nt\n=\n=\n+\n=\n+\nτ\n+\nτ\n+\nτ\nτ\n=\n\n)\n(\ny\n)t(\nKx\n)t(\ny\ndt\ndy\n=\n=\n+\nτ\n\ntransfer\nfunction\n(\n)(\n)1\ns\ns\nMs\nK\n)s(\nx\n)s(\ny\n+\nτ\n+\nτ\n+\n=\n\ns\nK\n)s(\nx\n)s(\ny\n+\nτ\n=\n\nPoles\n,\ns\nτ\n-\nτ\n-\n=\n\nτ\n-\n=\ns\n\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\nZeroes\nM\nK\ns\n-\n=\n\nnone\n\nThe system will be stable if both τ1 and τ2 are positive, as they were for the\nmixing tanks of Lesson 4. A second-order step response is\n\n(\n)\n(\n)\n(\n)\n⎥\n⎦\n⎤\n⎢\n⎣\n⎡\nτ\n-\nτ\nτ\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\nτ\n-\n+\nτ\n-\nτ\nτ\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\nτ\n-\n-\n-\n=\nτ\n-\n-\nτ\n-\n-\nd\nd\nt\nt\nt\nt\nd\ne\nK\nM\ne\nK\nM\nt\nt\nAKU\n)t(\ny\n\n(5.17-5)\n\nWhen α, the coefficient of the second derivative, is positive (right-hand-\nside of Figure 5.17-1), it is customary to express the second-order system\nin an alternative way:\n\nTable 5.17-2. Second-order system (τ, ξ form) - complex poles\n\nsecond-order\nfirst-order\nequation\ndt\ndy\n)\n(\ny\n)t(\nKx\ndt\ndx\nM\n)t(\ny\ndt\ndy\ndt\ny\nd\nt\n=\n=\n+\n=\n+\nξτ\n+\nτ\n=\n\n)\n(\ny\n)t(\nKx\n)t(\ny\ndt\ndy\n=\n=\n+\nτ\n\ntransfer\nfunction\ns\ns\nK\nMs\n)s(\nx\n)s(\ny\n+\nξτ\n+\nτ\n+\n=\n\ns\nK\n)s(\nx\n)s(\ny\n+\nτ\n=\n\npoles\n(\n)\ns\n2 -\nξ\n±\nξ\nτ\n-\n=\n\nτ\n-\n=\ns\n\nzeroes\nM\nK\ns\n-\n=\n\nnone\n\nRelationships between the characteristic times τ1 and τ2 and the alternative\nparameters τ and ξ are\n\n(\n)\n-\nξ\n+\nξ\nτ\n=\n-\nξ\n-\nξ\nτ\n=\nτ\n\n(5.17-6)\n\n(\n)\n-\nξ\n-\nξ\nτ\n=\n-\nξ\n+\nξ\nτ\n=\nτ\n\n(5.17-7)\n\n1τ\nτ\n=\nτ\n\n(5.17-8)\n\nτ\nτ\nτ\n+\nτ\n=\nξ\n\n(5.17-9)\n\nτ + τ = τξ\n(5.17-10)\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\n\nτ -τ = τ ξ -1\n(5.17-11)\n\nAs in the first-order system, τ has the dimension of time and represents a\ncharacteristic time of the system. We will take it to be positive;\ndimensionless ξ in the second-order system, however, we will allow to be\npositive or negative. Parameter ξ is called the damping coefficient, and\nthe character of the response depends markedly on its value, as we will\nexplore in the next few sections.\n\n5.18\noverdamped systems: ξ > 1\nThe poles are real, negative, and unequal. We have seen such a system in\nLesson 4, a system of unequal tanks in series. The overdamped response\nto an input step of magnitude A is\n\n(\n)\n(\n)\n(\n)\n(\n)\n(\n)\n(\n)\n⎥\n⎥\n⎥\n⎥\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎢\n⎢\n⎢\n⎢\n⎣\n⎡\n⎪\n⎪\n⎭\n⎪\n⎪\n⎬\n⎫\n⎪\n⎪\n⎩\n⎪\n⎪\n⎨\n⎧\n-\nξ\n-\nξ\n-\nξ\n⎟\n⎠\n⎞\n⎜\n⎝\n⎛\n-\nξ\n+\nξ\nτ\n-\n-\n-\nξ\n-\nξ\n+\nξ\n⎟\n⎠\n⎞\n⎜\n⎝\n⎛\n-\nξ\n-\nξ\nτ\n-\n-\n-\n=\nτ\n-\n-\nξ\n-\nτ\n-\n-\nξ\nτ\n-\nξ\n-\nd\nd\nd\nt\nt\nt\nt\nt\nt\nd\ne\nK\nM\ne\nK\nM\ne\nt\nt\nAKU\n)t(\ny\n(5.18-1)\n\nFigure 5.18-1 shows step responses for various ξ, with M = 0. In contrast\nto the first-order response, the trace has a sigmoid shape: a slow start and\nan inflection point. Larger ξ make the response more sluggish.\n\n5.19\ncritically damped systems: ξ = 1\nFor this special condition, the poles are real, negative, and equal. This is\nthe case for two identical tanks in series. The step response is\n\n(\n)\n(\n)\n(\n)\n⎥\n⎦\n⎤\n⎢\n⎣\n⎡\n⎭\n⎬\n⎫\n⎩\n⎨\n⎧\nτ\n-\n⎟\n⎠\n⎞\n⎜\n⎝\n⎛\nτ\n-\n+\n-\n-\n=\nτ\n-\n-\nd\nt\nt\nd\nt\nt\nK\nM\ne\nt\nt\nAKU\n)t(\ny\nd\n\n(5.19-1)\n\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\n0.2\n0.4\n0.6\n0.8\n1.2\ntime\ny(t)\nξ = 3\n1.5\n1.1\n0.2\n0.4\n0.6\n0.8\n1.2\ntime\ny(t)\nξ = 3\n1.5\n1.1\n\nFigure 5.18-1. Step response for overdamped second-order system with M = 0.\n\n5.20\nunderdamped systems: ξ < 1\nThe poles are complex conjugates, and the system will oscillate even for a\nnon-periodic disturbance. The overdamped response (5.18-1) may be\nmodified by substituting\n\n(\n)\nj\nξ\n-\n=\nξ\n-\n-\n=\n-\nξ\n\n(5.20-1)\n\nand using Euler's relation to find\n\n(\n)\n(\n)\n(\n)\n(\n)\n⎥\n⎥\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎢\n⎢\n⎣\n⎡\n⎪\n⎭\n⎪\n⎬\n⎫\n⎪\n⎩\n⎪\n⎨\n⎧\nτ\n-\nξ\n-\nξ\n-\nτ\n-\nξ\n+\nτ\n-\nξ\n-\n-\n-\n=\nτ\n-\nξ\n-\nd\nd\nt\nt\nd\nt\nt\nsin\nK\nM\nt\nt\ncos\ne\nt\nt\nAKU\n)t(\ny\nd\n(5.20-2)\n\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\nor equivalently\n\n(\n)\n(\n)\n(\n)\n⎥\n⎥\n⎥\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎢\n⎢\n⎢\n⎣\n⎡\n⎪\n⎭\n⎪\n⎬\n⎫\n⎪\n⎩\n⎪\n⎨\n⎧\nτ\n-\nξ\nξ\n-\n+\nτ\n-\nξ\n-\n⎟⎟\n⎟\n⎟\n⎟\n⎠\n⎞\n⎜⎜\n⎜\n⎜\n⎜\n⎝\n⎛\nξ\n-\n⎟⎠\n⎞\n⎜⎝\n⎛\nτ\n-\nξ\n+\nξ\n-\n-\n-\n=\n-\nτ\n-\nξ\n-\nK\nM\ntan\nt\nt\nsin\nK\nM\ne\nt\nt\nAKU\n)t(\ny\nd\nt\nt\nd\nd\n\n(5.20-3)\n\n5.21\nunstable systems: ξ < 0\nWhen the damping factor is less than zero, the exponential terms in (5.20-\n2) and (5.20-3) increase with time, and the system is unstable to\ndisturbances.\n\n5.22\ninverse responses\nWhen the disturbance rate-of-change factor M is non-zero, and of opposite\nsign to the gain K, the system can show an inverse response; that it, the\ninitial response of the system is opposite to its ultimate direction. Figure\n5.22-1 shows a second-order response that initially is negative, but\nultimately oscillates around a positive change. The usual textbook\nexample is that of level control in a boiler - adding water will initially\nlower the liquid level, as measured by the sensor, because bubbling is\nsuppressed. Such inverse responses present challenges to controllers,\nbecause they start off by making the problem worse.\n\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\nStep Response\n-0.2\n0.2\n0.4\n0.6\n0.8\n1.2\n1.4\ntime\nx(t) and y(t)\ninput\npole 1 first order\npole 2 first order\nresponse\n\nFigure 5.22-1. Second-order system; inverse response.\n\n5.23\ngeneral map for second order\nFigure 5.23-1 relates the qualitative behavior of a second-order system to\nits damping coefficient and MK-1τ-1, a group that is the reciprocal of the\nproduct of the time constant and the transfer function zero. The major\ndivisions of behavior correspond to the value of ξ, but various other\nfeatures depend on this other group.\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\nSolution Characteristic Map\n-5\n-4\n-3\n-2\n-1\n-2.5\n-2\n-1.5\n-1\n-0.5\n0.5\n1.5\n2.5\ndamping coefficient\nreciprocal zero*tau\noverdamped\noscillatory\nstable\noscillatory\nunstable\nexcursive\ninverse\novershoot\npseudo 1st order\nsigmoid\ninverse\nSolution Characteristic Map\n-5\n-4\n-3\n-2\n-1\n-2.5\n-2\n-1.5\n-1\n-0.5\n0.5\n1.5\n2.5\ndamping coefficient\nreciprocal zero*tau\noverdamped\noscillatory\nstable\noscillatory\nunstable\nexcursive\ninverse\novershoot\npseudo 1st order\nsigmoid\ninverse\n\nFigure 5.23-1. Map relating character of step response to model parameters\n\n5.24\nMeasures that characterize the underdamped step response\nOscillatory responses are common. We have focused on second-order as a\ntype for an oscillatory system: we have derived equations and inferred\nbehavior. However, much process control work is conducted in the\nopposite direction: we observe oscillatory sensor readings, and we must\ntry to infer a workable system model, as well as diagnose faults.\n\nPractitioners use several measures to characterize an observed response\n(Coughanowr and Koppel, 1965). For the particular case of the 2nd order\nsystem, we can supplement these definitions with equations, but for an\nunknown system we can only compute the measures from recorded data.\n\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\n0.2\n0.4\n0.6\n0.8\n1.2\n1.4\n1.6\n1.8\nnormalized time\nnormalized response\nB\nA\nC\np\nrise time\nresponse time\n\nFigure 5.24-1. Oscillatory response to step input.\n\novershoot - response exceeds the ultimate value; equal to A/B\n\ne\novershoot\nξ\n-\nπξ\n-\n=\n\ndecay ratio - ratio of successive peaks, equal to C/A\n\ne\novershoot\n\nratio\ndecay\nξ\n-\nπξ\n-\n=\n=\n\nrise time - time to first reach the ultimate value\n\nresponse time - time until response remains within ±5% of ultimate value\n\nperiod - time between peaks, or between alternate crossings of the\nultimate value.\n\nf\np\nξ\n-\nπτ\n=\n⎟\n⎠\n⎞\n⎜\n⎝\n⎛\nω\nπ\n=\n=\n\nnatural period - period if there is no damping. A step disturbance will\ncause an undamped system to oscillate perpetually about its ultimate\nvalue. Notice that the time constant τ is directly proportional to the\nnatural period. Notice also that damping lengthens the period.\n\n5.25\ndisturbance response for the heated tank\nArmed with more knowledge of second order systems, we see that\nallowing the response to be underdamped will return the controlled\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\nvariable to the vicinity of the set point more quickly than in an\noverdamped response. However, if the damping coefficient becomes too\nsmall, the oscillation amplitude and persistence may be unacceptable. We\nreturn to the disturbance transfer function in (5.15-2) and recognize the\ncharacteristic time and damping coefficient.\n\nv\nc\ns\nI\ncl\nK\nK\nK\nK\nT\nτ\n=\nτ\n\n(5.25-1)\n\nv\nc\ns\nI\nv\nc\ns\nK\nK\nK\nK\nT\nK\nK\nK\nK\nτ\n+\n=\nξ\n\n(5.25-2)\n\nFrom (5.25-1) we see that increasing controller gain Kc and decreasing the\nintegral time TI tend to speed the loop response. Both these adjustments\nmove the controller in the direction of aggressive tuning. The results of\naggressive tuning are mixed on the damping coefficient - decreasing TI\nincreases oscillation, but increasing Kc suppresses it. The lower limit of ξ,\nhowever, is zero, so our second-order closed loop can be unstable\n(theoretically) only in the limit of zero integral time.\n\nFor a step disturbance in T1 of magnitude ΔT, we find from (5.15-2),\n(5.25-1), and (5.25-2)\n\ns\nT\ns\ns\ns\nK\nK\nK\nK\nT\nK\n)s(\nT\ncl\ncl\nv\nc\ns\nI\n'\no\nΔ\n+\n+\n=\nξ\nτ\nτ\n\n(5.25-3)\n\nwhich may be inverted to give\n\ncl\nt\ncl\nv\nc\ns\nI\n'\no\nt\nsin\ne\nK\nK\nK\nK\nT\nT\nK\n)t(\nT\ncl\nτ\nξ\nξ\nτ\nτ\nξ\n-\n-\nΔ\n=\n-\n\n(5.25-4)\n\nEquation (5.25-4) shows that the response oscillates about, and decays to,\nzero; as with the set point response we calculated in (5.16-2), there is no\noffset in the controlled variable, in spite of the permanent change in input.\nThus integral-mode control has improved our ability to control the outlet\ntemperature.\n\nFigure 5.25-1 shows responses for several controller tunings - that is,\nseveral choices of parameters Kc (represented within the loop gain K) and\nTI (scaled to the process time constant). Upon reducing the integral time,\nwe reduce the amplitude of the error but undergo more oscillation. By\nincreasing the gain, we speed the decay and thus reduce both the\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\namplitude of the error and time spent away from set point: a 10 K inlet\ndisturbance affects the outlet temperature by less than 1 K.\n\n-0.5\n0.5\n1.5\nt (s)\nT'o (K)\nK=1 TI/tau=0.5\nK=1 TI/tau=0.1\nK=3 TI/tau=0.1\n\nFigure 5.25-1. Step response of heated tank under PI control.\n\n5.26\ntuning the controller - measures of performance\nIn Lesson 4 we tuned by keeping our distance from the stability boundary,\nbut did not consider whether performance was satisfactory. In Section\n5.25 we saw that we could adjust two controller parameters independently\nto affect the response, and that there was a trade-off between amplitude\nand oscillation. It is time to introduce standard measures for the\ncontrolled variable that allow us to compare different tunings\nquantitatively.\n\nintegral error (IE) -- can be deceptively small if errors are balanced\n\n∫\ninf\n=\ndt\n)t(\nIE\nε\n\n(5.26-1)\n\nintegral absolute error (IAE) -- accounts for any deviation\n\n∫\ninf\n=\ndt\n)t(\nIAE\nε\n\n(5.26-2)\n\nintegral square error (ISE) -- emphasizes large errors\n\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\n[\n]\n∫\ninf\n=\n2dt\n)t(\nISE\nε\n\n(5.26-3)\n\nintegral time absolute error (ITAE) -- emphasizes persistent errors\n\n∫\ninf\n=\ndt\n)t(\nt\nITAE\nε\n\n(5.26-4)\n\nOf course, these integral error measures can be defined for scaled error ε*,\nas well. The latter three will always increase as the controlled variable\nspends time away from the set point, so in general, smaller means better\ncontrol. The measures can be calculated from plant data to compare the\nresults of different tunings. They can also be used to compare the results\nof simulations. For example, we could calculate IAE for the three traces\nin Figure 5.25-1.\n\nFurthermore, we could optimize by seeking a combination of tuning\nparameters that minimized one of the error measures. Thus, the controller\nwould be tuned by an objective performance criterion. For response\n(5.25-4), of course, such an optimization would be expected to lead to\ninfinite gain and zero integral time, because (as we determined by\nexamining the poles of the transfer function in Section 5.16) the closed\nloop is stable for all tunings. In a less idealized system, however, an\noptimum is more likely to exist.\n\n5.27\nstability by Bode criterion\nWe were assured of closed loop stability in Section 5.16. Even so, we\nexamine the frequency response of the loop transfer function.\n\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛+\n+\nτ\n=\ns\nT\ns\nK\nK\nK\nK\nG\nI\nv\nc\ns\nL\n\n(5.26-1)\n\nFrom the table of frequency response components in Marlin (Sec.10.6) we\nfind\nI\nv\nc\ns\nA\nT\nK\nK\nK\nK\nR\nω\nτ\n+\nω\n+\n=\n\n(5.26-2)\n\nand\n\n(\n)\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\nω\n-\n+\nωτ\n-\n=\nφ\n-\n-\nI\nT\ntan\ntan\n\n(5.26-3)\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\n\nThe Bode plot is made for three ratios of tank time constant τ to controller\nsetting TI. For the least aggressive tuning with large TI, the response\nresembles that of a first order system, although we notice different\nbehavior at low frequencies, due to the integral controller. Decreasing the\nintegral time depresses the phase angle toward a uniform -90o and\nincreases the low-frequency amplitude ratio. The amplitude ratio on the\nplot is normalized by the loop gain; high controller gain settings would\ndirectly increase the amplitude of low-frequency disturbances.\n0.01\n0.1\namplitude ratio/gain\n-180\n-150\n-120\n-90\n-60\n-30\n0.01\n0.1\nωτ (radians)\nphase angle (deg)\nτ/TI = 1\n0.1\n0.01\n0.01\n0.1\namplitude ratio/gain\n-180\n-150\n-120\n-90\n-60\n-30\n0.01\n0.1\nωτ (radians)\nphase angle (deg)\nτ/TI = 1\n0.1\n0.01\n\nBecause the phase lag never reaches -180o, the closed loop will remain\nstable. However, we see that the integral mode contributes phase lag at\nlow frequencies, as well as boosts the amplitude ratio. Combined with\nother lags in a closed loop, integral control would tend to destabilize the\nloop.\n\n5.28\nnumerical simulation of closed loop response\nNumerical simulation of a first-order process under PI control was\nperformed for a long pulse disturbance. The traces appear in scaled\nvariables. The response is slightly underdamped.\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\n\nrevised 2006 Mar 31\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Heated Tank\n5.29\nconclusion\nIntegral control has been a big help by removing offset. However, it\ncontributes phase lag to the closed loop, particularly at low frequencies,\nwhere it also boosts the amplitude ratio. Having two control parameters\nhas allowed us more influence over the shape of the response.\n\n5.30\nreferences\nCoughanowr, Donald R., and Lowell B. Koppel. Process Systems Analysis and Control.\nNew York, NY: McGraw-Hill, 1965. ISBN: 0070132100.\nMarlin, Thomas E. Process Control. 2nd ed. Boston, MA: McGraw-Hill, 2000. ISBN: 0070393621.\n\nrevised 2006 Mar 31"
    },
    {
      "category": "Resource",
      "title": "5_operability.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-450-process-dynamics-operations-and-control-spring-2006/e5d095af4b8697f40b80009eeceaa7e7_5_operability.pdf",
      "content": "Spring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Operability of Processes\n5.0\ncontext and direction\nIn Lesson 4, we encountered instability. We think of stability as a\nmathematical property of our linear system models. Now we will embed\nthis mathematical notion within the practical context of process\noperability. That is, we must not forget that our system models help us\noperate processes. Along the way, we will encounter a special category of\ninstability/inoperability: the non-self-regulating process.\n\nDYNAMIC SYSTEM BEHAVIOR\n\n5.1\nremember the stability criterion for linear systems\nIn Section 4.9, we introduced a stability criterion for a linear system: non-\nnegative poles in the transfer function (5.1-1) indicate that the system\noutput y(t) will not remain stable in response to a system input x(t).\n\ns\na\ns\na\ns\na\n)s(\nG\n)s(\nx\n)s(\ny\nn\nn\nn\nn\n'\n'\n+\n+\n+\n+\n=\n=\n-\n-\nL\n\n(5.1-1)\n\nAs a simple example, consider a first-order system:\n\n( )\ndy\ny\nKx\ny 0\ndt\n′\n′\n′\n′\nτ\n+\n=\n=\n\n(5.1-2)\n\nWe know that the Laplace transform representation is completely\nequivalent.\n\n( )\n( )\nK\ny s\nx s\ns 1\n′\n= τ +\n′\n\n(5.1-3)\n\nThe transfer function in (5.1-3) has a single pole at -τ-1. If the time\nconstant τ is a positive quantity (as in our tank), the pole is negative and\nthe response is stable (as we have seen in Lesson 3).\n\nIf the time constant were a negative quantity, however, the pole would be\npositive. As we saw in Section 4.9, the response would be unstable\nbecause of the exponential term in the solution of (5.1-2)\n\nt\ny (t)\ne\n-τ\n′\n\n(5.1-4)\n\nThis unbounded response could be in a positive or negative direction,\ndepending on the sign of the gain K. We will address on another occasion\nwhat sort of system might have a negative time constant; for now we\nrecognize that encountering an unstable linear system should cause us to\nlook carefully at the process whose behavior it represents.\n\nrevised 2006 Feb 1\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Operability of Processes\n5.2\nremember that feedback control can make stable systems go unstable\nRecall from Section 4.21 that we took a perfectly stable second-order\nprocess, placed it in a feedback loop with a first-order valve, and applied\nproportional-mode control. By increasing the controller gain too far, we\ncould drive the system to instability. We could use our linear stability\ncriterion to predict the onset of instability as we did in Section 5.1. That\nis, we compute the poles of ... not the process transfer function, but the\ntransfer function that represents the process in feedback loop with other\ncomponents!\n\n5.3\nthe special case of zero poles\nNow consider a system with a single pole whose value is zero.\n\n( )\n( )\nK\ny s\nx s\ns\n′\n= τ\n′\n\n(5.3-1)\n\nThis is a non-negative pole; we claim this indicates an unstable system. If\nwe apply a step disturbance to (5.3-1), we obtain upon inversion:\n\nt\ny\nK\n′ =\nτ\n(5.3-2)\n\nCertainly y' increases without bound, so that it qualifies as unstable. You\nshould try different bounded disturbances in (5.3-1), though, to explore\nwhether this is always the case.\n\n5.4\nthe integrator and the non-self-regulating process\nThe system of Section 5.3, far from being an oddball case, is actually quite\nimportant. It is known as an integrator. An example is shown in Figure\n5.4-1.\n\nh\nFi\nFo\nh\nFi\nFo\n\nFigure 5.4-1: Tank with independent inlet and outlet flows\n\nThe inlet flow is simply given, out of our control, and the outlet is\npumped. The material balance gives\n\nrevised 2006 Feb 1\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Operability of Processes\ni\ndh\nA\nF\ndt =\n-\noF\n(5.4-1)\n\nBoth inlet and outlet flow disturbances affect the tank level h. We\nenvision a steady reference condition in which the flows are balanced at Fr\nand the level is at hr. Expressing (5.4-1) in deviation variables, we obtain\n\ni\ndh\nA\nF\ndt\n′\n′\n=\n-\noF′\n(5.4-2)\n\nIntegrating (5.4-2) from an initial deviation of zero, we obtain\n\n(\n)\nt\ni\no\nh\nF\nF\nA\n′\n′\n′\n=\n-\n∫\ndt\n(5.4-3)\n\nThus the name integrator: the response variable is simply the integral of\nwhatever inputs are fed to it. This can be a big problem. Suppose that this\nis your tank. You observe that Fi is running quite steadily, so you adjust\nFo to match it and go home for the night. Just after you leave, Fi increases\nto a new steady value. We derive the results from (5.4-3):\n\ni\no\nF\nF\nh\nA\n′\n′\n-\n′ =\nt\n(5.4-4)\n\nIn this simple case, the numerator is a positive constant. You can\nsubstitute numbers into (5.4-4) to help you estimate what time of night\nyou will receive a telephone call.\n\nThe integrator has a zero pole; if we generalize from (5.4-2) we see a\ncorollary of this property:\n\n( )\ndy\nf y\ndt =\n\n(5.4-5)\n\nRecall that y is a quantity that can accumulate in a system; it could be total\nmass, amount of a chemical species, or energy, for example. Equation\n(5.4-5) tells us that the rate of accumulation of y is not affected by the\ninventory: your tank level may be rising fast, but the flow keeps on\ncoming. An equivalent statement of (5.4-5) is that the net inflow of y\nacross the system boundary does not depend on how much y is within the\nboundary.\n\nProcesses that contain an integrator are known as non-self-regulating.\nThis term comes directly from the property expressed by (5.4-5). By\ncontrast, the first order system in (5.1-2) will come to a new steady value\nrevised 2006 Feb 1\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Operability of Processes\nafter a disturbance. It can do this because its rate of accumulation does\ndepend on the inventory y, and we call it self-regulating. Clearly a non-\nself-regulating process will require frequent attention.\n\n5.5\ngetting practical - when self-regulation is not\nWe have identified formal stability with negative poles in the transfer\nfunction. Of the non-negative poles, we have given a special name -\nintegrator - to systems with zero poles, and we know to watch out for\nthem. These results of linear stability theory are quite useful. However,\nwe must never forget that our models are only approximations of the real\nprocesses.\n\nAs an illustration, we cite Shinskey (2002), who asserts that non-self-\nregulating behavior is a matter of degree, not strictly confined to systems\nwith zero poles. To see this, we rearrange the first-order system of (5.1-\n2).\n\n( )\ndy\n1 y\nx\ny 0\nK dt\nK\n′\nτ\n′\n′\n′\n+\n=\n=\n\n(5.5-1)\n\nWe suppose that a particular system features a time constant and gain that\nare both large. Under these circumstances, the term involving the\ninventory y' might be neglected in comparison to the others, leaving\n\n( )\ndy\nx\ny 0\nK dt\n′\nτ\n′\n′\n=\n=\n\n(5.5-2)\n\nIn the limit of (5.5-2), our system is an integrator. The fact that it is not\nstrictly an integrator is irrelevant if its behavior approaches that of (5.5-2):\nin the matter of midnight phone calls, the process might well be\nconsidered non-self-regulating.\n\nLet us illustrate by a tank with gravity-driven outlet flow.\n\nh\nFi\nFo\nh\nFi\nFo\n\nFigure 5.5-1: Tank with gravity-driven outlet flow\n\nrevised 2006 Feb 1\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Operability of Processes\nWe take the simplest course and assume that the outlet flow is directly\nproportional to the liquid level h. The proportionality constant k is small\nwhen the outlet valve is constricted, and increases as the valve is opened.\nA material balance gives\n\ni\nA dh\nh\nk dt\nk\n′\n′\n+\n=\nF′\n(5.5-3)\n\nwhere we base deviation variables on a steady reference condition.\n\nFormally, (5.5-3) represents a self-regulating process. However, consider\nfor a tightly constricted valve, k is small. In system terms, this means that\ngain 1/k and time constant A/k are both large. The large gain means that\nsmall disturbances Fi' have a large effect on response h'. The large time\nconstant means that the response will be slow.\n\nIn physical terms, the constricted outlet forces the liquid level to rise\nsignificantly to respond to relatively small increases in the inlet flow. It\nwill take a while to reach a level sufficient to push the flow out, so that\nthere will have been a lot of accumulation in the tank. If the constriction\nis sufficiently severe, you will still receive your midnight telephone call,\neven though your linear system model (5.5-3) has a negative pole. The\nprocess is effectively non-self-regulating.\n\n5.6\nwe want our processes to be operable\nWhen we speak of \"instability\", we speak of unbounded change in the\nresponse variable, as in (5.1-4), (5.3-2), or (5.4-4). Of course, nothing\nreally became unbounded: the tank level rose only until it spilled over, or\ndrained until it was empty. What really matters to us is process\noperability. A process that wakes us at midnight is not operable; it will\nalways need attention, or else run into troublesome limits. We prefer that\nour processes be operable, and process control should contribute to that\nend; therefore, a non-self-regulating process should be placed under\nautomatic control.\n\nLinear system stability calculations are useful indications of operability;\nhowever, Section 5.5 taught us that operability depends on the context of\nthe operation. Thus \"operability\" is \"stability\" made practical. A control\nengineer must ask, \"Under what conditions can this process become\ninoperable?\"\n\n-\nPart of the answer may come from applying stability theory, either\nthrough formal calculations, or by knowing what to look for while\ntuning a controller. Most practical control loops will have a stability\nlimit. Stability calculations in Section 4.21 helped us select a\nrevised 2006 Feb 1\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Operability of Processes\ncontroller gain for operability. In this way, we seek to determine a\ndegree of control.\n-\nAnother part of the answer may come from an intuitive examination of\nthe process, seeking to understand what affects the inventory of each\nconserved quantity (mass, species, energy). This is especially useful\nfor processes that contain multiple operations. Such an examination\ncan reveal both where control is needed, and where control might\ncause a problem. Here we are seeking a scheme of control.\n\nEngineering often requires a blend of rigorous analysis and informed\nintuition. For the remainder of Lesson 5 we will examine several process\nfeatures that affect operability. Much of this treatment is based on Downs\n(1992).\n\n5.7\nwe must control the liquid level integrator\nSuppose that we desire to maintain a constant level in the tank of Figure\n5.4-1. To make this process self-regulating, we must apply automatic\ncontrol. We must choose a control scheme; perhaps conditioned by\nsteady-state thinking, we consider managing inventory by managing the\ninlet and outlet flows: after all, doesn't IN = OUT at steady state? We\narrange in Figure 5.7-1 to measure the instantaneous inlet flow and adjust\nthe outlet flow to match.\n\nh\nFi\nFo\nF\nh\nFi\nFo\nF\n\nFigure 5.7-1: Feedforward control of inventory by manipulating\noutlet flow\n\nSuch a scheme may allow you to stay at home all night, because it will\ntend to reduce imbalance between flows. However, any discrepancy\nbetween the flow rates - through calibration error, instrument drift,\nshortcomings of the controller, insufficient adjustment of the pump motor\nspeed - will contribute to accumulation through (5.4-3). If that\ndiscrepancy is sufficiently biased, over time the level will creep to an\nundesired value.\n\nrevised 2006 Feb 1\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Operability of Processes\nIf our objective is to control level, then we should measure the level! The\nscheme of Figure 5.7-1 did not correct the basic fault of the integrator; in\nFigure 5.7-2 we apply a feedback loop to allow the inventory to affect the\nrate of accumulation. Thus the process (under control) becomes self-\nregulating: a rise in level will trigger an increase in the outlet flow rate,\nand so forth.\n\nh\nFi\nFo\nL\nh\nFi\nFo\nh\nFi\nFo\nL\n\nFigure 5.7-2: Feedback control of inventory\n\n(By the way, in a later lesson we will return to feedforward control\nschemes and find them to be very useful when appropriately applied.)\n\n5.8\ninventory of individual chemical components\nDowns (1992) recommends that a key to achieving good process\noperability is ensuring that the inventory of each chemical species is self-\nregulating. Thus we consider further the tank of Figure 5.7-2, letting the\ninlet flow comprise chemical species A and B. We write the component\nmaterial balance for A, assuming that the tank is well-mixed:\n\nAo\ni\nAi\no\nAo\nd VC\nFC\nF C\ndt\n=\n-\n\n(5.8-1)\n\nWe saw this relationship in Lesson 3. Here, we notice particularly that the\ninventory of component A (VCAo) does influence the outlet path of A\n(FoCAo) through the composition, so that (5.4-5) does not apply: the\nsystem is self-regulating. This is the behavior we recall from the\ndisturbance responses we computed in Lesson 3.\n\nWhen we explore more extensive processes, we may not be able to write\nthe component balance in such concise form as (5.8-1). However, we can\nstill apply the principle of (5.4-5) and examine qualitatively whether the\ninlet and outlet paths for a component depend on its inventory.\n\n5.9\nexample of a solvent recovery process\nFigure 5.9-1 shows a scrubber and distillation column used to recover\nvolatile solvent A from an inert gas stream. We have already installed\nrevised 2006 Feb 1\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Operability of Processes\nplausible level control schemes (indicated by feedback loops with the\ncontrol valves omitted) to ensure that individual vessels are self-regulating\nwith respect to mass.\n\nN2\nwater\nN2\nA\nwater\nA\nwater\nL\nL\nL\nN2\nwater\nN2\nA\nwater\nA\nwater\nL\nL\nL\n\nFigure 5.9-1 Basic process scheme for recovery of solvent A\n\nWe proceed methodically:\nexamine scrubber for component A\n- inlet streams are independent of the inventory of A\n- overhead gas stream is independent of A\n- flow of A in the bottoms stream will increase as the bottoms\nconcentration of A rises, as in Section 5.8\nBy virtue of the bottoms stream, the scrubber is self-regulating for\ncomponent A. As a practical illustration, a rise in the inlet composition of\nA will, over time, result in a higher flow of A from the bottom of the\nscrubber. (We remark here that this is a qualitative assessment that\npresumes good equipment operation, such as sufficient scrubber\nperformance and a well-tuned level-control loop. Our purpose here is not\nto perform a detailed design or simulation; rather, it is to determine\nwhether this process can, in principle, be self-regulating.)\n\nexamine scrubber for water\n- the conclusion for water is identical to that for A\n\nexamine scrubber for N2\nrevised 2006 Feb 1\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Operability of Processes\n- the inventory of N2 is indicated by the pressure in the vessel. Both\ninlet and outlet flows of gas will be affected by the vessel pressure.\nHence, the scrubber is self-regulating for N2.\n\nexamine the distillation unit (including accumulator)\n- the flow of components in the bottoms and distillate streams\ndepend on the composition of the column sump and accumulator\ninventories\nAs with the tank of Section 5.8, the level-control loops make the\ndistillation unit self-regulating for both components.\n\nexamine the entire process\n- the two inlet streams are independent of the process\n- the scrubber overhead gas stream regulates N2\n- the distillate and bottoms streams regulate water and component A\nThe two unit operations are simply arranged in series, so that nothing\nabout their combination affects the conclusions we had drawn from the\nindividual units.\n\n5.10\nthe process becomes non-self-regulating\nA reasonable process objective would be to recover component A in a\ndesired, not arbitrary, concentration. Hence, we install a composition\ncontroller on the distillate stream. In addition, we can reduce utility costs\nby recycling the bottoms stream to the scrubber. The results of these\nchanges are shown in Figure 5.10-1.\n\nN2\nwater\nN2\nA\nwater\nA\nwater\nL\nL\nL\nA\nN2\nwater\nN2\nA\nwater\nA\nwater\nL\nL\nL\nA\n\nrevised 2006 Feb 1\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Operability of Processes\nFigure 5.10-1 Recovery process with composition control and recycle\n\nWe repeat the examination of Section 5.9. We see quickly that the\nscrubber is unaffected: addition of a new independent inflow stream does\nnot change the ability of the level-control loop to regulate the inventories\nof A and water.\n\nexamine the distillation unit (including accumulator) for A\n- the inlet stream is independent of conditions in the unit\n- the distillate composition is now fixed, but the removal of A can\nstill vary in response to conditions because the distillate flow can\nvary.\nHence distillation is self-regulating for component A. For example,\nshould the inflow of A increase to the column, the distillate flow can\nincrease to remove it.\n\nexamine the distillation unit (including accumulator) for water\n- the inlet stream is independent of conditions in the unit\n- fixing the distillate composition means that water can be removed\noverhead only at a rate in proportion to the removal of A. Hence,\nthis stream no longer depends on the inventory of water.\n- water may still be removed in the bottoms, as required.\nBy virtue of the level-control loop on the bottoms, distillation is self-\nregulating for water.\n\nexamine the entire process\n- the two inlet streams are independent of the process\n- the scrubber overhead gas stream regulates N2\n- the distillate stream regulates component A\n- the distillate stream does not regulate water.\n\nAlthough each individual unit operation is satisfactory, the combination\ncan no longer regulate the inventory of water. Water enters\nindependently; water leaves only in proportion to the flow of A. To\nillustrate, suppose there is a step increase in water feed. The scrubber\nlevel controller responds by increasing the feed to the distillation column.\nThe column responds by increasing the bottoms flow, and thus the recycle\nto the scrubber. The two sump controllers engage in a battle that one must\nlose, as the water inventory continues to rise.\n\nTo correct this problem, we must make at least one of these streams\nrespond to the amount of water in the process. Downs (1992) gives the\nsolution: as shown in Figure 5.10-2, control the scrubber sump with the\nwater make-up flow. If we are designers, we still have further decisions to\nmake about equipment sizing and control structure, but at this point we\nrevised 2006 Feb 1\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Operability of Processes\nhave avoided one problem, at least, that no amount of post-design\ncontroller tuning could have solved.\n\nN2\nwater\nN2\nA\nwater\nA\nwater\nL\nL\nL\nA\nN2\nwater\nN2\nA\nwater\nA\nwater\nL\nL\nL\nA\n\nFigure 5.10-2 Control scrubber inventory with make-up water stream\n\nSections 5.9 and 5.10 have presented a lengthy example. Let us\nsummarize the approach that was illustrated:\n- ensure that overall mass inventory is regulated\n- methodically examine each inlet and outlet stream for each process\nunit, as well as the whole process, with respect to each chemical\nspecies. Remember that good individual units can work poorly in\ncombination.\n- determine the qualitative relationship between the flow of each\ncomponent and the inventory of that component. Certainly, there\nmay be no relationship.\n- we call the relationship qualitative because we are not considering\nthe actual timing or magnitude of response to disturbances, nor\ndetails of equipment performance (e.g., whether the trays might\nflood, or if there is enough packing to remove all the solvent from\nthe gas). These are matters of detailed design, to be addressed\nafter we have established our basic process structure. Therefore,\npresume that all equipment works well, including any control loops\nthat have already been specified.\n- look out for composition controllers, because these restrict the flow\nof the impurity components. Look out for recycle streams, because\nrevised 2006 Feb 1\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Operability of Processes\nthese eliminate an outlet path. These are not bad process features,\nbut the control scheme must accommodate them.\n- if any component has no stream that responds to its inventory, the\nprocess must be altered to supply one. Often this is accomplished\nby a change in control scheme.\n\n5.11\nchemical reactions provide paths in and out of a process\nA reactant may not leave a process by any outlet flow path at all, but\nrather be entirely consumed within it. Therefore, in applying the method\nof Section 5.10 to a process with chemical reactors, we must extend the\nterms 'stream' and 'flow' to include consumption and generation. The\ngeneral principle of (5.4-5) still applies: if the rate of reaction of a species\ndoes not depend on the inventory of that species, then the process may be\nnon-self-regulating.\n\nKinetic expressions most often do depend on the concentration, so that\nproblem may actually arise outside the reactor, and because of the control\nscheme. Downs (1992) gives an example of a reactor whose level,\ntemperature, and composition are all controlled. The level is controlled by\nmanipulating the outflow stream. The temperature is controlled by\nmanipulating flow of a service fluid. The composition is controlled by\nmanipulating the flow of a reactant recycle stream.\n\nL\nA\nT\nfeed\nrecycle\nL\nA\nT\nfeed\nrecycle\n\nFigure 5.11-1 Reactor with three control loops\n\nLet us examine each in/out path for a reactant A:\n- the inflow of A in the feed is independent\n- the inflow of A in the recycle stream does depend on the inventory\nof A, because it is manipulated to keep the concentration at set\npoint\n- the outflow of A varies to keep the inventory constant, because the\nlevel controller manipulates the flow rate\nrevised 2006 Feb 1\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 5: Operability of Processes\n- the consumption of A depends on the volume of the reactor (set by\nthe level controller), the temperature (set by the temperature\ncontroller), and the concentration of A (set by the composition\ncontroller). For well-behaved control loops, it is constant.\nEverything seems fine. In fact, because of the level and composition\ncontrollers, we are actively working to keep the inventory of A constant.\n\nThe problem does not become apparent until we consider the reactor in the\ncontext of other process units. Suppose the concentration of A in the feed\nstream undergoes a step reduction. The level and composition controllers\nrespond: the composition controller increases the supply of recycle to\nreturn the total inflow of A to normal, and the level controller adjusts the\noutlet flow as needed to keep the volume the same. Thus A reacts at the\nnormal rate, and therefore excess A departs the reactor at the normal rate.\n\nSomewhere downstream, a separation unit is being fed A at the normal\nrate, but being asked to return A at a higher than normal rate. It can do\nthis only while its inventory lasts. The reactor has put the problem off\nonto other units, but there remains a problem nonetheless. We discover it\nby examining the component inventories, but doing so in the context of\nthe larger process.\n\nHow would you solve this problem?\n\n5.12\nconclusion\nWe enlarged our notions of stability to develop a concept of what makes a\nprocess operable. In doing this, we have ranged qualitatively over a\nvariety of chemical processes. In some cases these have included multiple\noperations and multiple control loops. In the next lessons, we will return\nto analysis of a single operation; as we deepen our understanding, try not\nto forget the broad perspective we have attempted here.\n\n5.13\nreferences\nDowns, J. J. \"Distillation Control in a Plant-wide Control Environment.\" In\nPractical Distillation Control. Edited by W. L. Luyben. New York, NY: Van\nNostrand Reinhold, 1992. ISBN: 0442006012.\n\nShinskey, Greg F. Process Control Systems: Application, Design, and Tuning.\n4th ed. New York: NY: McGraw-Hill, 1996. ISBN: 0070571015.\n\nrevised 2006 Feb 1"
    },
    {
      "category": "Resource",
      "title": "6_exotherm_react.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-450-process-dynamics-operations-and-control-spring-2006/f5030af41384d9de143de5913022fad5_6_exotherm_react.pdf",
      "content": "Spring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 6: Exothermic Tank Reactor\n6.0\ncontext and direction\nA tank reactor with an exothermic reaction requires a more elaborate\nsystem model, because its outputs are temperature and composition.\nFurthermore, the model is nonlinear, which forces us to make a linear\napproximation to solve it. We will add the derivative mode to our PI\ncontroller to increase both stability and responsiveness. The closed loop\nwill show how automatic control can stabilize an inherently unstable\nprocess.\n\nDYNAMIC SYSTEM BEHAVIOR\n\n6.1\nexothermic chemical reaction in a stirred tank reactor\nA second-order dimerization reaction occurs in an overflow stirred tank\nreactor. The reactor is equipped with a heat transfer surface (perhaps\njacket, coils, or bayonet) that contains a flow of cooling water. We wish\nto know how the outlet composition and temperature may vary with time.\n\n6.2\ndynamic model of the reactor\nWith two output variables, we face two balances, as well as several\nsupporting relationships. The mole balance on the reactant A\n\n(\nA\nA\nAi\nA\nr\nV\nFC\nFC\ndt\ndC\nV\n-\n-\n-\n=\n)\n(6.2-1)\n\nrequires a second-order kinetic rate expression for the rate of\ndisappearance of A, including Arrhenius temperature dependence.\n\nA\nRT\nE\no\nA\nA\nA\nC\ne\nk\nkC\ndt\ndN\nV\nr\n-\n=\n=\n⎟\n⎠\n⎞\n⎜\n⎝\n⎛\n-\n=\n-\n\n(6.2-2)\n\nThe energy balance must account for the reaction and heat transfer.\n\n(\n) Q\nr\nV\nH\n)\nT\nT\n(\nC\nF\n)\nT\nT\n(\nC\nF\ndt\ndT\nC\nV\nA\nR\nref\np\nref\ni\np\np\n-\n-\nΔ\n-\n-\nρ\n-\n-\nρ\n=\nρ\n\n(6.2-3)\n\nOnce again, we will regard physical properties as independent of\ntemperature. Enthalpies are defined with respect to an arbitrary\nthermodynamic reference temperature. For an exothermic reaction, the\nheat of reaction ΔHR will be a negative quantity, and will thus tend to raise\nthe reactor temperature T. The rate of heat transfer Q depends on the\nlogarithmic temperature difference\n\nco\nci\nco\nci\no\no\nT\nT\nT\nT\nln\n)\nT\nT\n(\n)\nT\nT\n(\nA\nU\nQ\n-\n-\n-\n-\n-\n=\n\n(6.2-4)\nrevised 2005 Mar 30\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 6: Exothermic Tank Reactor\n\nin which the well-mixed tank temperature T is uniform and the coolant\ntemperature Tc varies from inlet to outlet. We will presume that the\ncoolant supply temperature Tci is quite stable and thus not consider it as a\ndisturbance. The overall heat transfer coefficient depends on the film\ncoefficients on the inner and outer surfaces of the heat transfer barrier; we\nwill neglect any conduction resistance in the barrier itself.\n\ni\ni\no\no\no\nh\nA\nA\nh\nU\n-\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n+\n=\n\n(6.2-5)\n\nThe outer film coefficient ho depends on the rate of stirring in the tank, as\nwell as the variation of physical properties with temperature. With\nconstant physical properties, there is no reason for ho to vary. Inner\ncoefficient hi depends on the flow of coolant. Invoking typical internal-\nflow behavior, we write\n\nm\nn\nc\ni\ni\nPr\nRe\nk\nD\nh\n=\n\n(6.2-6)\n\nIf we write (6.2-6) at a reference condition, we can express the flow\ndependence of hi as\n\nn\ncr\nc\nir\ni\nF\nF\nh\nh\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n=\n\n(6.2-7)\n\nFor flow in tubes, n is often about 0.8.\n\nThe main structure of the model is given by the balances (6.2-1) and (6.2-\n3). These relate the outlet temperature and composition to their inlet\nvalues. Supplementary equations are needed to describe the reaction\nkinetics and heat transfer. We see that the two balances will be coupled\nthrough the temperature dependence of the reaction rate parameter k in\n(6.2-2). Heat transfer is described by equipment performance equation\n(6.2-4) and the empirical relationship (6.2-7) that describes convective\nheat transfer in conduits. These latter equations show how the coolant\nflow Fc influences the reactor outlet temperature T.\n\nEven so, we are not finished, because we have not yet accounted for the\noutlet coolant temperature Tco in (6.2-4). Therefore, we must write an\nenergy balance on the coolant.\n\nQ\n)\nT\nT\n(\nC\nF\n)\nT\nT\n(\nC\nF\ndt\nT\nd\nC\nV\nref\nco\npc\nc\nc\nref\nci\npc\nc\nc\nc\npc\nc\nc\n+\n-\nρ\n-\n-\nρ\n=\nρ\n\n(6.2-8)\nrevised 2005 Mar 30\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 6: Exothermic Tank Reactor\n\nwhere ‹T c› is the average coolant temperature in the coolant volume.\n\n∫\n=\nc\nV\nc\nc\nc\ndV\nT\nV\nT\n\n(6.2-9)\n\nTo proceed with (6.2-8), we must express the average temperature in\nterms of the inlet and outlet temperatures. This would be an entertaining\ndiversion, but for the primary purposes of Lesson 6 we will assume that\nheat exchanger outlet temperature adjusts much more quickly than does\nthe tank temperature T, so that we can neglect the accumulation term in\n(6.2-8) and write it as\n\nQ\n)\nT\nT\n(\nC\nF\nci\nco\npc\nc\nc\n=\n-\nρ\n\n(6.2-10)\n\nJustifying this assumption would involve comparing the characteristic\ntimes of (6.2-3) and (6.2-8). We have implicitly made a similar\nassumption already in (6.2-4), in which we have said that the rate of heat\ntransfer depends on the instantaneous values of the inlet and outlet\ntemperatures according to a relationship that was derived for the steady\nstate.\n\nTaken together, the equations of this section describe how the outlet\ntemperature and composition vary in time due to disturbances in inlet\ntemperature, inlet composition, and coolant flow rate. The coolant outlet\ntemperature is an intermediate variable in the system.\n\n6.3\nwe encounter nonlinear equations\nThe equations in Section 6.2 are nonlinear: the outlet composition is\nsquared, the temperature is an argument in exponential and logarithmic\nfunctions, the coolant flow is raised to a power. Even (6.2-10) is\nnonlinear, because it contains the product of variables Fc and Tco.\nAnalytical solution is highly improbable. We may attack the problem by\nnumerical simulation, or by simplifying it. We will first follow the latter\ncourse for two reasons:\n- A numerical solution can show how individual cases behave, but not\ngeneral behavior. An analytical solution, by virtue of its mathematical\nexpression, will usually instruct us in parameter dependence.\n- Simplifying by linear approximation will often give us a reasonable\napproximation near the reference set point. If the control objective is\nto maintain the process at set point, then the approximate description\nmay be entirely satisfactory for achieving good control.\n\nrevised 2005 Mar 30\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 6: Exothermic Tank Reactor\n6.4\nmaking linear approximations with Taylor series\nGiven a function f, we specify some reference value of the independent\nvariables, and represent the function in the neighborhood of that reference\npoint as a series of terms. For a function of one variable:\n\n(\nr\nr\nx\nr\n)\nx\nx\n(\nO\n)\nx\nx\n(\ndx\ndf\n)\nx\n(\nf\n)\nx\n(\nf\nr\n-\n+\n-\n+\n=\n)\n(6.4-1)\n\nFor a function of more than one variable:\n\n(\n)\n,...\n)\ny\ny\n(,\n)\nx\nx\n(\nO\n...\n)\ny\ny\n(\ny\nf\n)\nx\nx\n(\nx\nf\n,...)\ny\n,\nx\n(\nf\n,...)\ny\n,x\n(\nf\nr\nr\nr\n,...\ny\n,\nx\nr\n,...\ny\n,\nx\nr\nr\nr\nr\nr\nr\n-\n-\n+\n+\n-\n∂\n∂\n+\n-\n∂\n∂\n+\n=\n\n(6.4-2)\n\nBy retaining only linear terms, we obtain a linear approximation. The\nderivatives are evaluated at the reference point. Of course, the\napproximation is exact at the reference, and it is often satisfactory in some\nregion about the reference value.\n\n6.5\nlinear approximation to the material balance\nWe apply (6.4-2) to material balance (6.2-1).\n\n(\n)\n(\n) (\n)\n(\n) (\nr\nr\nA\nAr\nA\nr\nA\nA\nr\nA\nA\nAi\nA\nT\nT\nT\nr\nV\nC\nC\nC\nr\nV\nr\nV\nFC\nFC\ndt\ndC\nV\n-\n∂\n-\n∂\n-\n-\n∂\n-\n∂\n-\n-\n-\n-\n=\n)\n(6.5-1)\n\nAt the reference condition, (6.5-1) becomes\n\n(\nr\nA\nAr\nAir\nAr\nr\nV\nFC\nFC\nd\n)\nt\ndC\nV\n-\n-\n-\n=\n=\n\n(6.5-2)\n\nWe subtract (6.5-2) from (6.5-1) and define deviation variables.\n\n(\n)\n(\n)\n'\nr\nA\n'\nA\nr\nA\nA\n'\nA\n'\nAi\n'\nA\nT\nT\nr\nV\nC\nC\nr\nV\nFC\nFC\ndt\ndC\nV\n∂\n-\n∂\n-\n∂\n-\n∂\n-\n-\n=\n\n(6.5-3)\n\nWe obtain the partial derivatives in (6.5-3) from (6.2-2).\n\n(\n)\nA\nRT\nE\no\nA\nA\nC\ne\nk\nC\nr\n-\n=\n∂\n-\n∂\n\n(6.5-4)\n\nrevised 2005 Mar 30\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 6: Exothermic Tank Reactor\n(\n)\nAr\nr\nAr\nRT\nE\no\nr\nA\nA\nC\nk\nC\ne\nk\nC\nr\nr\n=\n=\n∂\n-\n∂\n-\n\n(6.5-5)\n\n(\n)\nA\nRT\nE\no\nA\nC\ne\nRT\nE\nk\nT\nr\n-\n=\n∂\n-\n∂\n\n(6.5-6)\n\n(\n)\nAr\nr\nr\nAr\nRT\nE\nr\no\nr\nA\nC\nRT\nE\nk\nC\ne\nRT\nE\nk\nT\nr\nr\n=\n=\n∂\n-\n∂\n-\n\n(6.5-7)\n\nHere kr is the rate constant at the reference condition.\n\nr\nRT\nE\no\nr\ne\nk\nk\n-\n=\n\n(6.5-8)\n\nWe substitute (6.5-5) and (6.5-7) into linearized material balance (6.5-3).\n\n'\nAr\nr\nr\n'\nA\nAr\nr\n'\nA\n'\nAi\n'\nA\nT\nC\nRT\nE\nVk\nC\nC\nVk\nFC\nFC\ndt\ndC\nV\n-\n-\n-\n=\n\n(6.5-9)\n\nThis is a first-order lag equation, which is more apparent if it is placed into\nstandard form\n\n)\n(\nC\nT\nK\nC\nC\ndt\ndC\n'\nA\n'\nCT\n'\nAi\nR\nC\n'\nA\n'\nA\nC\n=\n+\nτ\nτ\n=\n+\nτ\n\n(6.5-10)\n\nwhere\n\nAr\nr\nr\nC\nCT\nAr\nr\nR\nR\nC\nR\nC\nk\nRT\nE\nK\nC\nk\nF\nV\nτ\n-\n=\nτ\n+\nτ\n=\nτ\n=\nτ\n\n(6.5-11)\n\nτR is the residence time of the tank, important to reactor conversion. The\ntime constant τC (smaller than τR) characterizes the dynamics of\ncomposition change. The group KCT is the gain for the effect of\ntemperature on composition in the reactor. The negative sign shows that\nan increase in operating temperature will reduce the exit concentration of\nreactant A (by way of increasing the reaction rate constant).\n\nrevised 2005 Mar 30\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 6: Exothermic Tank Reactor\nThe steady state mole balance in (6.5-2) has significance beyond serving\nas a reference condition for deviation variables. It also constrains the\nrelationship between the tank composition and temperature (within the\nrate constant kr) at steady state.\n\n6.6\nsimilarly approximating the energy balance\nWe apply (6.4-2) to energy balance (6.2-3).\n\n(\n)\n(\n) (\n)\n(\n) (\n)\n(\n)\n(\n)\ncr\nc\nr\nc\nr\nr\nr\nr\nr\nA\nR\nAr\nA\nr\nA\nA\nR\nr\nA\nR\np\ni\np\np\nF\nF\nF\nQ\nT\nT\nT\nQ\nQ\n\nT\nT\nT\nr\nV\nH\nC\nC\nC\nr\nV\nH\nr\nV\nH\n\nT\nC\nF\nT\nC\nF\ndt\ndT\nC\nV\n-\n∂\n∂\n-\n-\n∂\n∂\n-\n-\n-\n∂\n-\n∂\nΔ\n-\n-\n∂\n-\n∂\nΔ\n-\n-\nΔ\n-\nρ\n-\nρ\n=\nρ\n\n(6.6-1)\n\nAt the reference condition, (6.6-1) becomes\n\n(\n)\nr\nr\nA\nR\nr\np\nir\np\nr\np\nQ\nr\nV\nH\nT\nC\nF\nT\nC\nF\ndt\ndT\nC\nV\n-\n-\nΔ\n-\nρ\n-\nρ\n=\n=\nρ\n\n(6.6-2)\n\nWe subtract (6.6-2) from (6.6-1) and define deviation variables.\n\n(\n)\n(\n)\n'\nc\nr\nc\n'\nr\n'\nr\nA\nR\n'\nA\nr\nA\nA\nR\n'\np\n'\ni\np\n'\np\nF\nF\nQ\nT\nT\nQ\n\nT\nT\nr\nV\nH\nC\nC\nr\nV\nH\nT\nC\nF\nT\nC\nF\ndt\ndT\nC\nV\n∂\n∂\n-\n∂\n∂\n-\n∂\n-\n∂\nΔ\n-\n∂\n-\n∂\nΔ\n-\nρ\n-\nρ\n=\nρ\n\n(6.6-3)\n\nThe reaction rate partial derivatives are given in (6.5-5) and (6.5-7). To\nobtain the heat transfer rate partial derivatives, we combine the heat\ntransfer expressions (6.2-4) through (6.2-7) with the coolant energy\nbalance (6.2-10) to eliminate intermediate variable Tco.\n\n(\n)\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎣\n⎡\n⎪⎭\n⎪⎬\n⎫\n⎪⎩\n⎪⎨\n⎧\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n+\nρ\n-\n-\n-\nρ\n=\n-1\nn\nc\nir\ni\nn\ncr\no\no\npc\nc\nc\no\nci\npc\nc\nc\nF\nh\nA\nF\nA\nh\nC\nF\nA\nexp\nT\nT\nC\nF\nQ\n\n(6.6-4)\n\nThe partial derivatives are\n\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎣\n⎡\n⎪⎭\n⎪⎬\n⎫\n⎪⎩\n⎪⎨\n⎧\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n+\nρ\n-\n-\nρ\n=\n∂\n∂\n-1\nn\nc\nir\ni\nn\ncr\no\no\npc\nc\nc\no\npc\nc\nc\nF\nh\nA\nF\nA\nh\nC\nF\nA\nexp\nC\nF\nT\nQ\n\n(6.6-5)\n\nrevised 2005 Mar 30\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 6: Exothermic Tank Reactor\n[\nr\npc\nc\ncr\nr\nC\nF\nT\nQ\nβ\n-\nρ\n=\n∂\n∂\n]\n(6.6-6)\n\n(\n)\n(\n)\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎣\n⎡\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n+\n-\n⎪⎭\n⎪⎬\n⎫\n⎪⎩\n⎪⎨\n⎧\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n+\nρ\n-\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n+\n-\n-\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎣\n⎡\n⎪⎭\n⎪⎬\n⎫\n⎪⎩\n⎪⎨\n⎧\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n+\nρ\n-\n-\n-\nρ\n=\n∂\n∂\n-\n-\n-\n-\nn\nc\nir\ni\nn\ncr\no\nn\nc\nir\ni\nn\ncr\no\no\nn\nc\nir\ni\nn\ncr\no\no\npc\nc\nc\no\nn\nc\nir\ni\nn\ncr\no\no\nc\nci\no\nn\nc\nir\ni\nn\ncr\no\no\npc\nc\nc\no\nci\npc\nc\nc\nF\nh\nA\nnF\nA\nF\nh\nA\nF\nA\nh\nF\nh\nA\nF\nA\nh\nC\nF\nA\nexp\nF\nh\nA\nF\nA\nh\nF\nT\nT\nA\n\nF\nh\nA\nF\nA\nh\nC\nF\nA\nexp\nT\nT\nC\nF\nQ\n\n(6.6-7)\n\n(\n)[\n]\n(\n)\n⎥⎦\n⎤\n⎢⎣\n⎡-\n-\nβ\n-\nβ\n-\n-\nρ\n=\n∂\n∂\nir\ni\no\nor\ncr\nci\nr\no\nor\nr\nr\nci\nr\npc\nc\nr\nc\nh\nA\nn\nA\nU\nF\nT\nT\nA\nU\nT\nT\nC\nF\nQ\n\n(6.6-8)\n\nin which\n\nir\ni\no\no\nor\nh\nA\nA\nh\nU\n-\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n+\n=\n\n(6.6-9)\n\nand\n\n⎪⎭\n⎪⎬\n⎫\n⎪⎩\n⎪⎨\n⎧\nρ\n-\n=\nβ\npc\nc\ncr\no\nor\nr\nC\nF\nA\nU\nexp\n\n(6.6-8)\n\nThe argument of the exponential function in (6.6-8) is the \"number of\ntransfer units\", used in models of heat exchangers (Incropera and DeWitt,\nSec. 11.4). We substitute (6.5-5), (6.5-7), (6.6-6), and (6.6-8) into\nlinearized energy balance (6.6-3) to obtain another first order lag equation.\n\n)\n(\nT\nF\nK\nC\nK\nT\nT\ndt\ndT\n'\n'\nc\nht\n'\nA\nTC\n'\ni\nR\nT\n'\n'\nT\n=\n+\n+\nτ\nτ\n=\n+\nτ\n\n(6.6-10)\n\nwhere\n\nrevised 2005 Mar 30\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 6: Exothermic Tank Reactor\n(\n)\n(\n)\n(\n)\n⎥\n⎥\n⎦\n⎤\n⎢\n⎢\n⎣\n⎡\nβ\n-\n-\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛-\nρ\nβ\nρ\n-\nρ\nτ\nτ\n=\nρ\nΔ\nτ\n-\n=\nρ\nΔ\nτ\n+\nβ\n-\nρ\nρ\n+\nτ\n=\nτ\nr\nir\ni\no\nor\npc\nc\ncr\no\nor\nr\np\nci\nr\npc\nc\nR\nT\nht\nAr\nr\np\nr\nT\nTC\nAr\nr\nr\np\nr\nR\nr\np\npc\nc\ncr\nR\nT\nh\nA\nA\nnU\nC\nF\nA\nU\nC\nF\nT\nT\nC\nK\nC\nk\nC\nH\nK\nC\nk\nRT\nE\nC\nH\nC\nF\nC\nF\n\n(6.6-11)\n\nOnce again, standard-form parameters have been defined. The thermal\ntime constant τT characterizes the dynamics of temperature change, and\nKTC and Kht are gains for composition and heat transfer disturbances.\n\n6.7\nderiving transfer functions by Laplace transform and block diagram\nLaplace transforms may be performed on the mole balance (6.5-10) and\nthe energy balance (6.6-10).\n\n)s(\nT\nK\n)s(\nC\n)s(\nC\n)1\ns\n(\n'\nCT\n'\nAi\nR\nC\n'\nA\nC\n+\nτ\nτ\n=\n+\nτ\n\n(6.7-1)\n)s(\nF\nK\n)s(\nC\nK\n)s(\nT\n)s(\nT\n)1\ns\n(\n'\nc\nht\n'\nA\nTC\n'\ni\nR\nT\n'\nT\n+\n+\nτ\nτ\n=\n+\nτ\n\n(6.7-2)\n\nThese equations must be combined to isolate the dependent variables T\nand CA. First, we express them in a block diagram to show the\ndependencies more clearly. System inputs are on the left, and outputs on\nthe right. Notice that both outputs depend on all three inputs.\n\nCAi\n'(s)\ns\nC\nr\nC\n+\nτ\nτ\nτ\nCA'(s)\ns\nK\nC\nCT\n+\nτ\ns\nK\nT\nTC\n+\nτ\ns\nT\nr\nT\n+\nτ\nτ\nτ\ns\nK\nT\nht\n+\nτ\nTi'(s)\nFc'(s)\nT'(s)\nCAi\n'(s)\ns\nC\nr\nC\n+\nτ\nτ\nτ\nCA'(s)\ns\nK\nC\nCT\n+\nτ\ns\nK\nT\nTC\n+\nτ\ns\nT\nr\nT\n+\nτ\nτ\nτ\ns\nK\nT\nht\n+\nτ\nTi'(s)\nFc'(s)\nT'(s)\n\nFigure 6.7-1 Block diagram of stirred reactor\n\nrevised 2005 Mar 30\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 6: Exothermic Tank Reactor\nWe isolate CA\n′(s) either by eliminating T′(s) between (6.7-1) and (6.7-2),\nor by tracing the dependency through the block diagram:\n\n(\n)\n(\n)(\n)\n(\n)(\n)\n(\n)(\n)\n(\n)(\n)\n(\n)(\n)\n)s(\nF\ns\ns\nK\nK\ns\ns\nK\nK\n)s(\nT\ns\ns\nK\nK\ns\ns\nK\n)s(\nC\ns\ns\nK\nK\ns\n)s(\nC\n'\nc\nT\nC\nTC\nCT\nT\nC\nht\nCT\n'\ni\nT\nC\nTC\nCT\nT\nC\nR\nT\nCT\n'\nAi\nT\nC\nTC\nCT\nC\nR\nC\n'\nA\n+\nτ\n+\nτ\n-\n+\nτ\n+\nτ\n+\n+\nτ\n+\nτ\n-\n+\nτ\n+\nτ\nτ\nτ\n+\n+\nτ\n+\nτ\n-\n+\nτ\nτ\nτ\n=\n(6.7-3)\n\nAfter simplifying the individual transfer functions in (6.7-3), we recognize\na second-order system\n\n(\n)\n)s(\nF\ns\ns\nK\nK\n)s(\nT\ns\ns\nK\n)s(\nC\ns\ns\ns\n)s(\nC\n'\nc\nC\nT\nht\nCT\n'\ni\nC\nR\nCT\n'\nAi\nT\nT\nR\n'\nA\n+\nτξ\n+\nτ\nτ\nτ\nτ\n+\n+\nτξ\n+\nτ\nτ\nτ\nτ\n+\n+\nτξ\n+\nτ\n+\nτ\nτ\nτ\nτ\n=\n\n(6.7-4)\n\nin which the coefficients in the characteristic equation are\n\nTC\nCT\nT\nC\nK\nK\n1-\nτ\nτ\n=\nτ\n\n(6.7-5)\n\nTC\nCT\nT\nC\nK\nK\n-\nτ\n+\nτ\n=\nτξ\n\n(6.7-6)\n\nWe similarly isolate T′(s) from the equations or the diagram to find\n\n(\n)\n(\n)\n)s(\nF\ns\ns\ns\nK\n)s(\nC\ns\ns\nK\n)s(\nT\ns\ns\ns\n)s(\nT\n'\nc\nC\nT\nC\nht\n'\nAi\nT\nR\nTC\n'\ni\nC\nC\nR\n'\n+\nτξ\n+\nτ\n+\nτ\nτ\nτ\nτ\n+\n+\nτξ\n+\nτ\nτ\nτ\nτ\n+\n+\nτξ\n+\nτ\n+\nτ\nτ\nτ\nτ\n=\n\n(6.7-7)\n\nFrom (6.7-4) and (6.7-7) we see that the material and energy balances\ncombine to produce a second-order dependence for each output variable.\nThe characteristic equation and poles are the same for both T and CA.\nThrough (6.7-4) and (6.7-7) we can predict how T and CA will respond to\nparticular disturbances.\n\n6.8\nmultiple steady-state operating conditions\nBefore we consider transient response any further, though, we should look\nmore carefully at the steady-state reference condition. As in previous\nLessons, we think of the reference condition as some desired set of steady\noperating conditions. Now, however, our reference state is described by\nnonlinear material and energy balances, (6.5-2) and (6.6-2), repeated here:\n\nAr\nr\nAr\nAir\nC\nVk\nFC\nFC\n-\n-\n=\n\n(6.8-1)\nrevised 2005 Mar 30\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 6: Exothermic Tank Reactor\n\n(\n)(\n)\nr\nci\nr\npc\nc\ncr\nAr\nr\nR\nr\np\nir\np\nT\nT\nC\nF\nC\nVk\nH\nT\nC\nF\nT\nC\nF\nβ\n-\n-\nρ\n-\nΔ\n-\nρ\n-\nρ\n=\n\n(6.8-2)\n\nFor some combinations of design (V), reaction system (kr, ΔHR, etc.), and\noperating inputs (CAir, Fcr, etc.), it is possible for three distinct pairs of\nreactor temperature Tr and composition CAr to satisfy (6.8-1) and (6.8-2).\nMarlin (App. C) illustrates this behavior by plotting the term of (6.8-2)\nthat represents heat generation by reaction\n\nAr\nr\nR\nC\nVk\nH\nΔ\n-\n\n(6.8-3)\n\nalong with the heat flow and transfer terms\n\n(\n)(\n)\nr\nci\nr\npc\nc\ncr\nr\np\nir\np\nT\nT\nC\nF\nT\nC\nF\nT\nC\nF\nβ\n-\n-\nρ\n-\nρ\n-\nρ\n\n(6.8-4)\n\nboth versus reactor temperature Tr. Any intersection of the two curves\n(point A, B, or C) satisfies (6.8-2).\n\nTr\nenergy\ntime\nC\nB\nA\nreaction\nheat transfer\nTr\nenergy\ntime\nC\nB\nA\nreaction\nheat transfer\n\nThe relative slopes of the curves are significant: at points A and C, an\nincrease in Tr would exhibit less heat generation than heat transfer, tending\nto cool the reactor toward the reference condition. At B, by contrast, an\nincrease in Tr will tend to generate more heat than can be removed, so that\nreactor temperature will rise, moving toward condition C. The conclusion\nis that reference states A and C are stable, and B is not: B is in balance,\nbut a slight disturbance will cause an excursive transient toward either A\nor C.\n\nOur linearized dynamic models should capture this behavior in the vicinity\nof the reference state. That is, the poles of (6.7-4) or (6.7-7) should show\nrevised 2005 Mar 30\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 6: Exothermic Tank Reactor\nnegative real parts for conditions such as A and C, and positive real parts\nfor B.\n\nLet us examine a specific case (in which the parameters are chosen more\nfor illustration than realism):\n\nphysical properties\ndesign and operating\nconditions\nreference conditions\nρ= 850 kg m-3\nCp = 3800 J kg-1 K-1\nΔHR = -450 kJ mol-1\nE/R = 8200 K\nko = 1100 m3 mol-1 s-1\nUor = 438 W m-2 K-1\nAo = 18 m2\nV = 0.785 m3\nF = 0.015 m3 s-1\nTci = 300 K\nTir = 330 K\nCAir = 2300 mol m-3\nFcr = 0.008 m3 s-1\n\nFrom these parameters, three reference states are possible:\nsteady reference output\ndynamic characteristics\ncharacter of response\nTr = 326.7 K, CAr = 2296 mol m-3\nτ = 49.7 s, ξ = 1.001\nstable (little reactant conversion),\nvery slightly overdamped\nTr = 443.7 K, CAr = 1335 mol m-3\nτ2 = -978 s2\n(better conversion) excursively\nunstable\nTr = 578.5 K, CAr = 227 mol m-3\nτ = 13.5 s, ξ = 1.72\nstable (best conversion),\noverdamped\n\nHere our linearized models agree with the stability assessment from the\nnonlinear steady state balances. We could not expect a reactor to stay, on\nits own, at the second condition.\n\n6.9\nresponse of system to step disturbance\nEquations for second-order step response were given in Lesson 5. For\nstable systems, it is instructive here to consider the long-term value of the\nstep change, which is given by the magnitude of the step multiplied by the\nappropriate transfer function gain in (6.7-4) and (6.7-7). For a step change\nΔC in the inlet composition CAi, the long-term effects are\n\nC\nK\n)\n(\nT\nC\n)\n(\nC\nT\nR\nTC\n'\nT\nR\n'\nA\nΔ\nτ\nτ\nτ\n=\ninf\nΔ\nτ\nτ\nτ\n=\ninf\n\n(6.9-1)\n\nFor a step change ΔT in the inlet temperature Ti,\n\nT\n)\n(\nT\nT\nK\n)\n(\nC\nC\nR\n'\nC\nR\nCT\n'\nA\nΔ\nτ\nτ\nτ\n=\ninf\nΔ\nτ\nτ\nτ\n=\ninf\n\n(6.9-2)\n\nFor a step change ΔF in the cooling water flow rate ΔFc,\n\nrevised 2005 Mar 30\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 6: Exothermic Tank Reactor\nF\nK\n)\n(\nT\nF\nK\nK\n)\n(\nC\nC\nT\nht\n'\nC\nT\nht\nCT\n'\nA\nΔ\nτ\nτ\nτ\n=\ninf\nΔ\nτ\nτ\nτ\n=\ninf\n\n(6.9-3)\n\nEquations (6.11-1) through (6.11-3) predict steady-state operating\nconditions after a step input disturbance. However, because these\npredictions are made with an approximate model -- a linear approximation\nvalid only at the reference conditions CAr and Tr -- they are unlikely to\nsatisfy the material and energy balances (6.2-1) and (6.2-3) applied at the\nnew steady-state. Therefore, if we use our approximate model as a basis\nfor tuning a controller at a reference condition, we should be skeptical\nabout our tuning if we must operate the process away from that reference.\n\n6.10\ndo the linearized models describe instability?\nWe must not claim that our approximate model will describe the full path\nof a reactor transient. However, we do feel that our prediction of the\nstability threshold by the poles of (6.7-4) and (6.7-7) can alert us that a\ncontemplated operating condition might be troublesome. If we can avoid\nthe onset of instability, we need never describe an instability transient.\n\nCONTROL SCHEME\n\n6.11\nstep 1 - specify a control objective for the process\nOur control objective is to maintain the outlet temperature T and\ncomposition CA at constant values. Especially we must be concerned with\nthe possibility of runaway reaction.\n\n6.12\nstep 2 - assign variables in the dynamic system\nWe seem to have two desired controlled variables (T and CA), two\ndisturbances (Ti and CAi), and a single manipulated variable (Th). We\nhave not encountered a system with multiple outputs before. It is clear\nfrom (6.7-4) and (6.7-7) that the manipulated variable affects both T and\nCA. Furthermore, we know that we cannot set T and CA independently,\nbecause they are related through the material and energy balances.\nTherefore, we will attempt to control one of them - perhaps T, because it is\neasier to measure - intending to obtain satisfactory behavior of CA as a\nconsequence.\n\n6.13\nstep 3 - PID (proportional-integral-derivative) control\nProportional control reacts to the magnitude of the present error, and\nintegral mode reacts to its persistence over time. Integral mode removes\noffset in the controlled variable, but tends to make the closed loop less\nstable, as well as make the response sluggish. We now address these\nconcerns with the derivative mode.\n\nrevised 2005 Mar 30\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 6: Exothermic Tank Reactor\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\nε\n+\nε\n+\nε\n=\n-\n∫\ndt\nd\nT\ndt\nT\nK\nx\nx\n*\nD\nt\n*\nI\n*\n*\nc\n*\nb\n,\nco\n*\nco\n\n(6.13-1)\n\nwhere x*\nco is the controller output and the controlled variable error,\nexpressed in scaled variables, is\n\n*\n*\nsp\n*\ny\ny\n-\n=\nε\n\n(6.13-2)\n\nEquation (6.13-1) describes the ideal PID (proportional-integral-\nderivative) controller algorithm. It adds the derivative mode to the\nproportional and integral modes we have seen before.\n\nDerivative mode is an early warning of error; by reacting to the change in\nthe error signal, it can dictate a significant response from the manipulated\nvariable before the error has grown sufficiently to evoke a similar\nresponse via proportional mode. The influence of the derivative mode is\nset by the magnitude of the derivative time TD. Increasing TD strengthens\nthe controller response.\n\nWe can express algorithm (6.13-1) in deviation variables.\n\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\nε\n+\nε\n+\nε\n=\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\nε\n+\nε\n+\nε\nΔ\n=\n∫\n∫\ndt\nd\nT\ndt\nT\nK\n\ndt\nd\nT\ndt\nT\ny\n%\nK\nx\nD\nt\nI\nc\nD\nt\nI\n*\nc\n'\nco\n\n(6.13-3)\n\nThe Laplace transform of (6.13-3) is\n\n(\n)\n(\n)\n(\n)\n(\n))s(\ny\n)s(\ny\ns\nT\ns\nT\nK\n)s(\ny\n)s(\ny\ns\nT\n)s(\ny\n)s(\ny\ns\nT\n)s(\ny\n)s(\ny\nK\n)s(\nx\n'\n'\nsp\nD\nI\nc\n'\n'\nsp\nD\n'\n'\nsp\nI\n'\n'\nsp\nc\n'\nco\n-\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n+\n+\n=\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n-\n+\n-\n+\n-\n=\n\n(6.13-4)\n\n6.14\nstep 4 - choose set points and limits\nBoth the set point and operating limits for temperature may depend on a\nnumber of considerations, including reaction kinetics (desired reaction\nrate), reaction equilibrium (possible conversion), the possibility of side-\nproducts or degradation reactions, the vapor pressure of solvents, limits of\nconstruction materials, etc. Because our process may be open-loop\nunstable, we ask whether control can stabilize it.\n\nEQUIPMENT\nrevised 2005 Mar 30\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 6: Exothermic Tank Reactor\n\n6.15\nadjusting heat transfer with a valve\nPhysically, the controller output dictates the opening of a valve that admits\nthe cooling water to the heat exchanger. The figure shows a cooling water\nsupply header, a line to the heat exchanger, and another line to the cooling\nwater return header.\n\ncooling water supply header\ncooling water return\nheat exchanger\nbundle in tank\nlines to other\nusers of CW\ncooling water supply header\ncooling water return\nheat exchanger\nbundle in tank\nlines to other\nusers of CW\n\nAs in Lesson 5, we will represent our valve dynamics as \"relatively fast\"\nand expect that adding dynamic lags to the valve transfer function would\nhave negligible influence on the closed loop behavior.\n\n6.16\ncontrol valve mechanism\nA valve is a variable flow resistance manipulated by some actuator\nmechanism. In the sink, one turns the valve actuator by hand, which turns\na threaded stem to raise and lower a plug with respect to a seat. When the\nplug is seated, there is no opening for flow, and the hydraulic resistance\ncoefficient is infinite (no flow for finite pressure difference).\n\nIn a control valve, the most common actuator mechanism is a chamber in\nwhich air pressure on one side of a diaphragm opposes a spring on the\nother. The position of the diaphragm determines the position of the valve\nstem, and thus the opening between plug and seat. The schematic\nillustrates this concept (of course, real valve actuators will be more\nsophisticated).\n\nrevised 2005 Mar 30\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 6: Exothermic Tank Reactor\nair\n\nThus the controller output must vary the air pressure at the diaphragm.\nConversion of controller output to air pressure requires another device\nbetween controller and valve, called a transducer. The transducer supplies\nair to the valve in sufficient quantity to achieve a pressure proportional to\nthe controller signal. By convention, a zero controller output is\nrepresented to the valve as 3 psig; 100% output produces 15 psig.\n\n6.17\ncontrol valve failure mode\nShould the air supply fail, the spring will force the diaphragm to an\nextreme position. In the valve schematic above, the valve would be fully\nopen. Thus this valve might be called fail-open, or air-to-close. By a\ndifferent arrangement of spring and air, an alternative fail-closed, or air-\nto-open valve can be produced.\n\nIn selecting the failure mode of a valve, the engineer considers how best to\nprotect people and equipment under off-normal conditions. General\nguidelines would include cooling water failing open, steam valves failing\nclosed, reactor feed failing closed, vessel effluent failing open. Of course,\nexceptions to these cases could be found, too.\n\nThe failure mode of a valve determines the sign of its gain. For example,\nsuppose that we represent the combined valve and transducer by a transfer\nfunction between the controller output and the flow rate through the valve:\n\n)s(\nx\nK\n)s(\nF\n'\nco\nv\n'\n=\n\n(6.17-1)\n\nFor an air-to-open valve, the flow increases with controller output, so that\nthe gain Kv is positive. For an air-to-close valve, shown in the schematic,\nthe flow decreases with controller output, so that the gain is negative.\n\nWe write (6.17-1) in physical variables to show the bias term.\n\n(\nb\nv\nco\nF\nF\nK\nx\n-\n=\n-)\n(6.17-2)\n\nFor an air-to-open valve, the gain Kv is positive and the bias flow Fb is\nzero.\n\nrevised 2005 Mar 30\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 6: Exothermic Tank Reactor\nmax\nco\nF\nF\n100%\n=\nx\n(6.17-3)\n\nFor an air-to-close valve, the gain is negative, and bias flow is the\nmaximum flow.\n\n(\nmax\nco\nF\nF\n100%\nx\n100%\n=\n)\n-\n\n(6.17-4)\n\nEquations (6.17-3 and 4) are suitable for use in simulator calculations.\n\n6.18\npositive closed loop gain and the sense of the controller\nIn these lessons, we have occasionally checked the sign of the gain in our\ndynamic systems. Finding in Section 6.17 that an air-to-close valve\nnecessarily has a negative gain motivates us to examine the gains in a\nclosed feedback loop.\n\nAs a basis, we want feedback to be negative. That is, if the controlled\nvariable becomes too large, we want the feedback loop to reduce it. The\nalternative positive feedback will tend to increase the already-too-high\ncontrolled variable. A common example of positive feedback occurs\nwhen the output of a loudspeaker is fed back into a microphone, amplified,\nand delivered to the speaker - cover your ears!\n\nBecause we have defined error to be the set point less the controlled\nvariable, a high controlled variable gives a negative error. If this error is\nacted upon by a positive gain around the loop, the feedback to the\ncontrolled variable is negative. Hence we want a positive loop gain.\n\nThe loop gain KL is the gain component of the loop transfer function\nGL(s). Thus, the loop gain is the product of the sensor, controller, valve,\nand manipulated variable (process) gains.\n\nm\nv\nc\ns\nL\nK\nK\nK\nK\nK =\n\n(6.18-1)\n\n- Of these, the gain Ks for most sensors is positive - the mercury rises\nwith temperature.\n- The process gain Km is determined by the process itself - in these\nlessons, it has typically been positive, such that an increase in\nmanipulated variable causes an increase in the response variable.\nHowever, we might in principle run across an opposite case.\n- The sign of the valve gain Kv is a function of a safety analysis, as\ndiscussed in Section 6.17.\n- Because Km and Kv may be either positive or negative, and can be so\nfor independent reasons, we must therefore reserve the ability to\nrevised 2005 Mar 30\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 6: Exothermic Tank Reactor\nchoose the sign of the controller gain Kc. This is done with the\ncontroller sense switch, which might be a physical switch on an analog\ncontroller, or an input value in software.\n\n6.19\nambiguity!\nThe adjectives \"direct-acting\" and \"reverse-acting\" are used with a\ncontroller to indicate the position of the sense switch. Alternative\nadjectives are \"increase/increase\" and \"increase/decrease\". However, the\nadjectives are not consistently used! Hence, look at the controller\ncarefully, and ensure that you know the algebraic sign of the gain.\n\nCLOSED LOOP BEHAVIOR\n\n6.20\nclosed loop transfer function\nFrom Lesson 5, we borrow the general closed loop block diagram.\nHowever, we add an additional, uncontrolled, output yu to represent the\noutlet composition. The portion of Figure 6.20-1 labeled \"process\" is\nequivalent to Figure 6.7-1, but redrawn to reflect the algebraic\nmanipulations of Section 6.7.\n\nGd2(s)\nGm(s)\nGs(s)\nGc(s)\nGv(s)\n-\nx'\nd2(s)\nx'\nm(s)\ny' (s)\ne' (s)\nx'co(s)\ny'sp(s)\ny's (s)\nprocess\ncontroller\nfinal\ncontrol\nelement\nGsp(s)\ny'sp,s(s)\nGd1(s)\nx'\nd1(s)\nGud2(s)\nGud3(s)\nGud1(s)\nyu' (s)\nGd2(s)\nGm(s)\nGs(s)\nGc(s)\nGv(s)\n-\nx'\nd2(s)\nx'\nm(s)\ny' (s)\ne' (s)\nx'co(s)\ny'sp(s)\ny's (s)\nprocess\ncontroller\nfinal\ncontrol\nelement\nGsp(s)\ny'sp,s(s)\nGd1(s)\nx'\nd1(s)\nGud2(s)\nGud3(s)\nGud1(s)\nyu' (s)\n\nFigure 6.20-1 Block diagram for control of one of two outputs\nrevised 2005 Mar 30\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 6: Exothermic Tank Reactor\n\nAlso from Lesson 5, the controlled variable is related to the inputs by\n\n(\n)\n(\n)\n(\n)\n)s(\ny\nG\nG\nG\nG\nG\nG\nG\nG\n)s(\nx\nG\nG\nG\nG\nG\n)s(\nx\nG\nG\nG\nG\nG\n)s(\ny\n'\nsp\ns\nc\nv\nm\nsp\nc\nv\nm\n'\nd\ns\nc\nv\nm\nd\n'\nd\ns\nc\nv\nm\nd\n'\n+\n+\n+\n+\n+\n=\n(6.20-1)\n\nWe specialize the nomenclature and the transfer functions for our stirred\nreactor case, using especially temperature model (6.7-7).\n\n(\n)\ns\ns\ns\n)s(\nG\n)s(\nT\n)s(\nx\nC\nC\nR\nd\n'\ni\n'\nd\n+\nτξ\n+\nτ\n+\nτ\nτ\nτ\nτ\n=\n=\n\n(6.20-2)\n\ns\ns\nK\n)s(\nG\n)s(\nC\n)s(\nx\nT\nR\nTC\nd\n'\nAi\n'\nd\n+\nτξ\n+\nτ\nτ\nτ\nτ\n=\n=\n\n(6.20-3)\n\n(\n)\ns\ns\ns\nK\n)s(\nG\n)s(\nF\n)s(\nx\nC\nT\nC\nht\nm\n'\nc\n'\nm\n+\nτξ\n+\nτ\n+\nτ\nτ\nτ\nτ\n=\n=\n\n(6.20-4)\n\n)s(\nT\n)s(\ny\ns\nT\ns\nT\nK\n)s(\nG\nK\n)s(\nG\n)s(\nG\nK\n)s(\nG\n'\n'\nD\nI\nc\nc\ns\nsp\ns\nv\nv\n=\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n+\n+\n=\n=\n=\n=\n\n(6.20-5)\n\nMotivated by Section 6.18, let us examine the loop gain:\n- The sensor gain Ks is positive for temperature measurement.\n- The process gain Km is given in (6.20-4). For a stable process, τ2, τC,\nand Kht are all positive, but τT is negative. Hence, Km is negative,\nimplying that an increase in the heat exchanger coolant flow will lower\nthe reactor operating temperature.\n- Because we wish to provide cooling water even in the event of an air\nsupply failure, we choose an air-to-close valve. In Section 6.19, we\nsaw that such a valve featured a negative gain.\n- Because the product of the other three gain components is positive, our\ncontroller sense must be set to positive gain. If the reactor is too cold,\nrevised 2005 Mar 30\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 6: Exothermic Tank Reactor\nT < Tsp and ε > 0. Positive Kc directs the controller output to increase,\nclosing the air-to-close valve, restricting the cooling water, and thus\nallowing T to rise.\n\n6.21\nclosed-loop behavior - laplace transform solution\nFrom the equations in Section 6.20, we can derive the transfer function for\ndisturbances in the inlet temperature:\n\n(\n)\n⎪\n⎪\n⎭\n⎪\n⎪\n⎬\n⎫\n⎪\n⎪\n⎩\n⎪\n⎪\n⎨\n⎧\n+\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n+\nτ\n+\nτ\nτ\nτ\n+\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n+\nτ\n+\nτ\nξτ\nτ\n+\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n+\nτ\nτ\n+\nτ\nτ\nτ\n=\nI\nI\nC\nht\ns\nc\nv\nT\nC\nC\nD\nht\ns\nc\nv\nT\nC\nD\nht\ns\nc\nv\nT\nC\nC\nTh\ns\nc\nv\nR\nT\n'\ni\n'\nT\ns\nT\nK\nK\nK\nK\ns\nT\nK\nK\nK\nK\ns\nT\nK\nK\nK\nK\ns\ns\nK\nK\nK\nK\n)s(\nT\n)s(\nT\n\n(6.21-1)\n\nThe closed loop characteristic equation is third order, because the integral\nmode has increased the process order by one. Partial fraction expansion\nwill show us that the step response will be the sum of three exponential\nterms (for 3 real roots) or an exponential oscillation (for 1 real and 2\ncomplex roots). We could proceed as in Lesson 4, in which we calculated\npoles numerically and found the onset of oscillation, and then instability\nwith increasing gain. Here our tuning task would be more complicated,\nbecause we have three controller parameters to vary, instead of just the\ngain.\n\nThe derivative mode affects the coefficients of the two higher order terms.\nIncreasing D will increase the curvature of the characteristic function,\nwhich (other parameters unchanged) can increase the likelihood of three\nabscissa-crossings - thus three real roots, suppressing oscillation in the\nresponse.\n\nThe integral mode affects the lower order terms. Increasing TI will result\nultimately in reducing the order of the characteristic equation, which will\nallow offset in the step response. Increasing the controller gain Kc will\nreduce the transfer function gain (the coefficient in the numerator) and\nreduce the magnitude of the dynamic term coefficients in the denominator.\n\n6.22\nBode criterion for closed loop stability\nWe invoke the Bode stability criterion, as we did in Lesson 4, with one\nimportant provision: the Bode criterion does not apply if the process is\nopen-loop unstable. Therefore, if we are attempting to operate at such a\ncondition, we must use more advanced methods to determine the closed-\nloop stability limits.\n\nrevised 2005 Mar 30\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 6: Exothermic Tank Reactor\nFor stable open-loop conditions, we may apply the Bode criterion to the\nloop transfer function. The amplitude ratio is the magnitude of the loop\ntransfer function, which may be found as the product of the magnitudes of\nthe component transfer functions. Using a table of amplitude ratios, such\nas that of Marlin (2000), we find\n\n(\n)\n(\n)\n(\n)\nC\nT\nC\nht\nv\nI\nD\nc\ns\nA\nK\nK\nT\nT\nK\nK\nR\nτξω\n+\nω\nτ\n-\nω\nτ\n+\nτ\nτ\nτ\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\nω\n-\nω\n+\n=\n\n(6.22-1)\n\nSimilarly, the phase angle is the sum of the component phase angles.\n\n(\n)\n⎟\n⎠\n⎞\n⎜\n⎝\n⎛\nω\nτ\n-\nτξω\n-\n+\nω\nτ\n+\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\nω\n-\nω\n=\nφ\n-\n-\n-\nC\nI\nD\ntan\ntan\nT\nT\ntan\n\n(6.22-2)\n\nThe derivative mode opposes the phase lag due to the integral mode and\nstabilizes the closed loop. In the figure, the controller parameters are set\nto give P, PD, PI, and PID controllers at a stable open-loop condition, as\ndescribed in Section 6.8. Controllers using integral mode are shown with\ndashed lines; solid lines refer to P and PD controllers.\n\nrevised 2005 Mar 30\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 6: Exothermic Tank Reactor\n0.01\n0.10\n1.00\n10.00\n100.00\n0.00001\n0.0001\n0.001\n0.01\n0.1\namplitude ratio\n-180\n-150\n-120\n-90\n-60\n-30\n0.00001\n0.0001\n0.001\n0.01\n0.1\nω (radians s-1)\nphase angle (deg)\nP\nPD\nPI\nPID\n0.01\n0.10\n1.00\n10.00\n100.00\n0.00001\n0.0001\n0.001\n0.01\n0.1\namplitude ratio\n-180\n-150\n-120\n-90\n-60\n-30\n0.00001\n0.0001\n0.001\n0.01\n0.1\nω (radians s-1)\nphase angle (deg)\nP\nPD\nPI\nPID\n\nThe effect of integral mode is to increase the amplitude ratio and increase\nthe phase lag at low frequency. Both these actions are generally\ndestabilizing to a closed loop, although in this case, there is no crossover\nfrequency in evidence (the phase lag never goes beyond -180o). The effect\nof derivative mode is to decrease the phase lag at high frequency. This\ncan often help push a crossover frequency to a higher value, at which the\namplitude ratio will tend to be smaller. In this way, derivative mode can\nhelp to stabilize a closed loop.\n\nIn this process, perhaps the most significant contributor to stability is the\npresence of a \"lead\", the positive phase angle represented by the middle\nterm in (6.22-2). This term arises from the manipulated variable transfer\nfunction (6.20-4), because coolant flow rate affects reactor temperature\nnot only by heat transfer, but by the rate of exothermic reaction. The\nnumerator term in (6.20-4) affects the coefficients of the characteristic\nequation, and thus the poles that are possible. This third-order process, at\nthe reference condition we have chosen, seems to be intrinsically stable\nunder closed loop control.\n\nrevised 2005 Mar 30\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 6: Exothermic Tank Reactor\n6.23\ntuning the controller\nGiven the process model, we may tune the controller by simulation, in\nwhich we vary the three parameters and assess the effects by comparing IE\nand IAE for the responses. The simulation can be done by supplying the\npartial fraction expressions with numerically computed roots, or by\nreturning to the differential equations for numerical solution, either in\nlinearized or original nonlinear form.\n\n6.24\nconclusion\nWe encountered a more complicated process in this lesson, both because it\nrequired two coupled equations, and because reaction kinetics and heat\ntransfer made them nonlinear. We introduced a formal approximation\nprocess to make the model linear, and then were able to treat it with tools\nwe had previously developed. Even so, nonlinearity could not be escaped,\nbecause we found that the behavior of the approximate description\ndepended on the reference conditions we chose. Furthermore, we found\nthat some conditions admitted multiple steady states. All of this should\ninspire us to maintain a healthy skepticism toward our results.\n\nThe positive news was that it is possible to maintain the process at an\ninherently unstable condition through feedback control. We have further\nincreased our feedback capabilities through the derivative mode, which\ncomplements proportional and integral modes to comprise the PID\ncontroller, widely used and justly respected in the chemical process\nindustries.\n\n6.25\nreferences\nIncropera, Frank P., and David P. DeWitt. Fundamentals of Heat and Mass Transfer.\n5th ed. New York, NY: J. Wiley, 2002. ISBN: 0471386502.\n\nMarlin, Thomas E. Process Control. 2nd ed. Boston, MA: McGraw-Hill, 2000.\nISBN: 0070393621.\nrevised 2005 Mar 30"
    },
    {
      "category": "Resource",
      "title": "7_high_order.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-450-process-dynamics-operations-and-control-spring-2006/9323048e3f2ffc52e50708760833e598_7_high_order.pdf",
      "content": "Spring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 7: High Order Overdamped Processes\n7.0\ncontext and direction\nChemical processing plants are characterized by large time constants and\ntime delays. For control engineering, we can often approximate these\nhigh-order systems by the FODT (first-order-dead-time) model. Dead\ntime in a process increases the difficulty of controlling it.\n\nDYNAMIC SYSTEM BEHAVIOR\n\n7.1\nbig and slow - high-order overdamped systems\nWe began our study of process control by considering a mixed tank.\nApplying a material or energy balance to a well-mixed tank produces a\nfirst-order lag system. We subsequently combined two balances to\nproduce a second-order system. In one case, two material balances\ndescribed storage of material in two tanks. In another case, a single tank\nstored both material and energy. Energy and material balances show that\nthe tank causes a dynamic lag between input and output, because it takes\ntime to adjust the amount of mass or energy distributed throughout the\ntank. We might thus expect that more storage elements would lead to\nhigher-order behavior, and require higher-order equations to describe\nthem.\n\nThe classic illustration of a high-order system is a set of n tanks in series:\neach tank feeds the next, and a change in the inlet stream composition CA0\nmust propagate through multiple tanks to be felt at the output CAn. The\nindividual tank models are\n\n'\nAi\n'\nAi\n'\nAi\ni\nFC\nFC\nC\nV\ndt\nd\n-\n=\n-\n\n(7.1-1)\n\nThey are combined by eliminating the interior stream variables to produce\na single transfer function between input and output.\n\n(\n)(\n)\n(\n)1\ns\ns\ns\n)s(\nC\n)s(\nC\nn\n'\nA\n'\nAn\n+\nτ\n+\nτ\n+\nτ\n=\n\"\n\n(7.1-2)\n\nLet us illustrate high-order behavior and (7.1-2) by first imagining a single\nwell-mixed overflow tank of time constant τ. If we introduce a step\nincrease in the inlet concentration, we will (by the well-mixed assumption)\nimmediately detect a rise in the outlet stream - the familiar first-order lag\nresponse. If we have instead two tanks in series, each half the volume of\nthe original, we will detect a second-order, sigmoid response at the outlet.\n\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 7: High Order Overdamped Processes\n\nEach tank has a smaller individual time constant, and their sum is the time\nconstant τ of the original tank. If we continue to increase the number of\ntanks in the series, always maintaining the total volume, we observe a\nslower initial response with a faster rise around the time constant. This\nbehavior is shown in Figure 7.1-1.\n\n0.2\n0.4\n0.6\n0.8\n1.2\n0.5\n1.5\n2.5\n3.5\n4.5\ntime/tau\nstep response\n0.2\n0.4\n0.6\n0.8\n1.2\n0.5\n1.5\n2.5\n3.5\n4.5\ntime/tau\nstep response\n\nFigure 7.1-1. Step response for tanks in series; equal time constants\n\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 7: High Order Overdamped Processes\nThe step response shows that high-order systems have a longer start-up\nperiod before rising toward the final value.\n\n7.2\nthe FODT approximation to high-order step response\nThere may be occasions when detailed dynamic analysis of a process is\nwarranted. Often, however, it is sufficient to obtain a simplified dynamic\nmodel that gives a reasonable approximation to the process behavior.\nFigure 7.1-1 indicates that high-order step responses might be represented\nas a first-order rise following a period of delay. The dynamic model that\nwould behave this way is called the FODT (first-order-dead-time) model;\nit turns out to be suitable for describing the dynamic response of many\nchemical processes.\n\n7.3\ndead time is delay\nBefore we examine the FODT model, we will look at dead time by itself.\nChemical processes require that material be moved from one location to\nanother: in conduits, on conveyer belts, through vessels. The\ntransportation time is finite; it implies a delay between the onset of a\ndisturbance at one location and its observation at another. This delay is\noften called dead time; it is familiar to anyone who has waited at the\nfaucet for the hot water to arrive.\n\nConsider a pipe carrying a liquid. A pulse of solute added at the entrance\nwill be observed at the exit only after the solute is transported through the\npipe.\n\ntd\ntd + θ\ntime\nsignal\nx(t) seen by observer\nat entrance of pipe\ny(t) seen by observer\nat exit of pipe\ntd\ntd + θ\ntime\nsignal\nx(t) seen by observer\nat entrance of pipe\ny(t) seen by observer\nat exit of pipe\n\nThe transit time depends on the liquid velocity and the length of the pipe.\nThe figure indicates faithful transmission of the input signal x(t) from inlet\nto outlet, as if every particle in the pipe moved at the same velocity.\nHowever, in real chemical processes the solute pulse y(t) would become\ndistorted through diffusive and dispersive effects. Nonetheless, a simple\ndescription of transport using the average fluid velocity is often sufficient\nto represent dead time in a process:\n\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 7: High Order Overdamped Processes\nF\nV\nv\nL =\n=\nθ\n\n(7.3-1)\n\nThus the dead time is the residence time in the pipe.\n\nConsider again Figure 7.1-1 and the series of tanks. If taken to the limit of\nan infinite number of tanks, each infinitesimally small, we finally obtain a\npure delay, in which at time τ the full step disturbance appears at the\noutlet.\n\n7.4\ndead time and lag are different\nIn casual conversation, one might not distinguish between lag and delay;\nhowever, in process control these two terms have distinct meanings. A lag\nprocess is illustrated by a mixed tank, and a delay (or dead time) process\nby a pipe.\n\nTable 7.4-1. Comparison of lag and dead time processes\n\nfirst-order lag\npure dead time\nrepresentative\nprocess\n\ndefining\nequation\n)t(\nx\ny\ndt\ndy\n'\n'\n'\n=\n+\nτ\n\n)\nt(\nx\ny\n'\n'\nθ\n-\n=\n\ntransfer\nfunction\ns\n)s(\nx\n)s(\ny\n)s(\nG\n'\n'\n+\nτ\n=\n=\n\ns\n'\n'\ne\n)s(\nx\n)s(\ny\n)s(\nG\nθ\n-\n=\n=\n\nstep response\nτ\n\nθ\n\nIn the tank step response, the output lags behind the input, but there is no\ndelay between input and a response at the output. In the pipe, by contrast,\nthe output is delayed.\n\n7.5\nfrequency response of a dead time process\nThe sinusoidal input\n\nt\nsin\nA\n)t(\nx\nω\n=\n\n(7.5-1)\n\nis faithfully reproduced at the output of the dead time process, but will be\ndelayed. Thus the amplitude ratio is unity, and the phase lag depends on\nthe input frequency and the dead time. Inserting jω into the Laplace\ntransform in Table 7.4-1,\n\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 7: High Order Overdamped Processes\nθω\n-\n=\n∠\n=\nφ\n=\n=\nω\nθ\n-\nω\nθ\n-\nj\nj\nA\ne\ne\nR\n\n(7.5-2)\n\nThus dead time delays a signal in an unbounded manner, but does not\ndiminish its amplitude. From what we recall of the Bode criterion for\nevaluating closed loop stability, we might speculate that dead time could\nbe particularly significant.\n\n7.6\nthe FODT model\nTo represent the dynamic behavior of a complex process as first order plus\ndead time is to say that the many storage elements and pipelines in the\nprocess can be represented by a single tank and pipe in series (the order\ndoes not matter). The FODT model is a first order ODE with a delayed\ninput:\n\n(\nθ\n-\n=\n+\nτ\nt\nKx\ny\ndt\ndy\n'\n'\n'\n)\n(7.6-1)\n\nThe FODT time constant τ comes from the tank, and the dead time θ from\nthe pipe. Taking the Laplace transform of (7.6-1)\n\ns\n'\n'\ne\ns\nK\n)s(\nG\n)s(\nx\n)s(\ny\nθ\n-\n+\nτ\n=\n=\n\n(7.6-2)\n\n7.7\nBode plot of FODT\nWith dead time, we finally see how the phase angle can become\nsignificant: although the first-order lag phase angle is limited to -90°, the\ndead time contribution to phase lag is unbounded. In the plot, the dead\ntime has been set equal to the time constant.\n\nIf a FODT process is placed in a feedback loop with a controller, a\ncrossover frequency will inevitably be found, and the controller settings\nwill be limited by the onset of instability..\n\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 7: High Order Overdamped Processes\nBode plot - first order plus dead time system\n-300\n-200\n-100\n0.01\n0.1\nωτ (radians)\nphase angle (deg)\nFOPDT\nfirst order\n\n7.8\nidentification - obtaining an FODT to represent a process\nArriving at a suitable approximate model (both form and parameter\nvalues) is known as identifying a model. Most often, the FODT\napproximation would be derived from an experimental test of the dynamic\nsystem. For example, a step input xdata(t) would be contrived, and the\nresponse ydata(t) measured. Then the experimental data would be\ncompared with the FODT step response ymodel(t), and the parameters K, τ,\nand θ adjusted to achieve a satisfactory match. The match might be done\nby eye; alternatively, a least-squares criterion could provide an objective\ncomparison between different sets of parameter values. Marlin (2000)\ndescribes further methods for obtaining parameter values from the data.\n\nIf the step input can be maintained sufficiently long to see the response\nbecome virtually constant, the gain K is relatively easy to determine.\nHowever, the response variable remains subject to other disturbances,\nwhich may distort the experimental data through noise and confounding\ninputs. Such confounding inputs may force a given step test to be short.\nFurthermore, in some systems it may be impossible to approximate a step\ninput. In others, it may be undesirable to force a system away from the\ndesired operating condition for a lengthy period. Thus other forms of\ninput disturbance suitable for identifying a system model are discussed by\nSeborg et al (2004).\n\nFigure 7.8-1 shows experimental data for a system with negative gain.\nThe noise in the response variable trace makes the choice of dead time\nsomewhat uncertain. Furthermore, the short duration of the run means\nthat different combinations of gain and time constant can be used to fit the\nobserved trace; a longer run would have distinguished these two\nparameters more clearly.\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 7: High Order Overdamped Processes\n\ndisturbance and response\n-1.2\n-1\n-0.8\n-0.6\n-0.4\n-0.2\n0.2\n0.4\ntime (s)\nscaled traces\nThi\nFc\nFOPDT\n\nFigure 7.8-1 Experimental step response and FODT fit\n\nWe make use of a process model in closed loop calculations. For\nexample, we have used the manipulated variable transfer function Gm(s) to\ncompute the loop transfer function. In an experimental test, however, we\nare likely to obtain Gm in combination with the sensor and valve transfer\nfunctions. This is because manipulating the valve with the controller\noutput in manual is the most common way of creating a step input in the\nmanipulated variable. Furthermore, we obtain the value of the response\nvariable only by measuring it, usually with the installed sensor. Hence the\nFODT model actually includes the behavior of valve and sensor, as well.\nNotice in Figure 7.8-1 that the input is not quite a step, but rather a rapid\nfirst-order response. These dynamics become part of the ostensible\nprocess model.\n\nIn Lesson 6 we encountered a process with underdamped behavior. In\nsuch a case, it may be possible to identify a suitable second-order-dead-\ntime model, thus augmenting the more varied responses of second order\nwith dead time. We will not pursue this idea further in this lesson.\n\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 7: High Order Overdamped Processes\n7.9\ndigital calculation of dead time\nDead time is computed by defining arrays for the input and output\nvariables. The arrays represent the variation of the inputs and outputs over\ntime. The dead time is represented by a difference in the array index\nbetween input and output variables. For example, suppose that the\nvariables are computed every five seconds, so that x_input(i+1)\nrepresents the value of the input 5 s after that stored in x_input(i).\nThen a dead time of 20 s would require that a change in the input variable\noccurring at index value i not be introduced to the output variable array\nuntil the index reaches i+4.\n\n7.10\nan example process with dead time\nConsider the blending tank we studied in Lesson 3; however, recognize\nthat the composition sensor may be placed some distance from the tank, so\nthat there is a delay between achieving a composition in the tank and\npresenting its value for measurement.\n\nF, CAi\nF, CAo\nvolume V\nFc, CAc\nF, CAi\nF, CAo\nvolume V\nFc, CAc\n\nThe system model, adapted from Lesson 3, is\n\n)\nt(\nF\nF\nC\n)\nt(\nC\n)t(\nC\ndt\n)t(\ndC\n'\nc\nAc\n'\nAi\n'\nAo\n'\nAo\nθ\n-\n+\nθ\n-\n=\n+\nτ\n\n(7.10-1)\n\nwhere the time constant τ is given by the ratio of tank volume to\nvolumetric flow, and the dead time θ by the ratio of the length of pipe\nbetween tank and sensor to the average velocity of the outlet stream in the\npipe. Notice that in this particularly simple case, we have derived the\nmodel from our understanding of the process, not experimental data.\n\nThe responses to changes in either of the inputs C′\nAi or F′\nc will resemble\nthose computed in Lesson 3, except that they will be observed only after a\ntime interval of θ has followed the occurrence of the input.\n\nCONTROL SCHEME\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 7: High Order Overdamped Processes\n\n7.11\nthe control scheme\nstep 1 - specify a control objective for the process\nOur control objective is to maintain CA at set point CAs.\n\nstep 2 - assign variables in the dynamic system\nThe controlled variable is CA. From (7.10-1) we see that the manipulated\nvariable Fc affects the controlled variable through a transfer function that\nincludes dead time. The disturbance transfer function for input CAi\nincludes dead time, as well. For feedback control, that does not matter -\nwe observe that a disturbance has occurred only when the controlled\nvariable begins to deviate from set point. (In other control schemes,\nhowever, we will be able to make use of measurements of the disturbance\nvariable. In this case, it will be useful to know the dead time for\ndisturbances.)\n\nstep 3 - PID (proportional-integral-derivative) controller algorithm\nDerivative mode can help to stabilize the loop. However, we expect to\nfind that dead time will force us to detune (that is, make less aggressive)\nthe controller.\n\nstep 4 - choose set points and limits\nThe parameter values, also from Lesson 3, are\n\nV = 6 m3\nF = 0.02 m3 s-1\nτ = 300 s\nθ = 60 s\nFcs = 10-4 m3 s-1\nCAis = 8 kg m-3\nCAos = 10 kg m-3\nCAc = 400 kg m-3\n\nWe will suppose that CAi may vary between 4 and 10 around its reference\nvalue of 8 kg m-3. Therefore, from the steady state material balance, Fc\nmust be capable of varying between 0 and 2×10-4 m3 s-1 to maintain CA at\nset point.\n\nEQUIPMENT\n\n7.12\nsensor transmitter range\nThe sensor must respond to the controlled variable (as mercury rises in the\nglass), and its associated transducer or transmitter must convert this\nresponse to an input signal for the controller. For old-generation\npneumatic controllers, this would be an air pressure; for electronic\ncontrollers and computers, it is often transmitted as an electric current that\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 7: High Order Overdamped Processes\nvaries between 4 and 20 mA. The controller will convert the current to a\npercentage of the maximum input. Thus we assign to the sensor a gain\nwith dimensions of\n\nmA\nin\n%\niable\nvar\ncontrolled\nof\nunit\nmA\n)\n(\nKs =\n\n(7.12-1)\n\nThe magnitude of Ks depends on the sensitivity, or the range, of the\nsensor. Increasing the sensitivity of the sensor will cause a larger signal to\nthe controller for a given deviation in controlled variable. An increase in\nsensitivity, and thus sensor gain, increases loop gain in the same way as\nincreasing the controller gain.\n\nSome processes must employ multiple ranges. For example, a process\nwith a set point of 500°C would have a low sensitivity (wide range) for\nmonitoring the controlled variable during start-up from ambient conditions\nand a higher sensitivity (narrow range) for normal operation near the set\npoint. Such an application might be done with multiple sensors, with\nvariable sensitivity, or with multiple control loops, according to the\nparticular case.\n\n7.13\nvalve saturation\nThere is not unlimited power to manipulate a process: even though a\ncontrol algorithm might calculate an output greater than 100%, this can\ndirect the valve to be no more than fully open, or fully closed. The control\nengineer must size equipment so that the manipulated variable is sufficient\nto exert a countervailing influence to the anticipated disturbances.\n\nFor example, if the controlled variable is a reactor temperature and the\nmanipulated variable is the flow of cooling water to the reactor jacket, the\nmaximum flow rate must be sufficient to cool the reactor under the most\nunfavorable anticipated disturbance conditions. Then the valve must be\nselected, along with other piping components, to supply this flow. No\ncontroller tuning can compensate for a valve that is too small.\n\n7.14\nproportional gain and proportional band\nWe have worked with the gain of the controller, Kc. An alternative\nconvention is also used: the proportional band. Proportional band is the\ninverse of the non-dimensional controller gain, multiplied by 100.\n\nC\nK\nPB =\n\n(7.14-1)\n\nThus a gain of 1 %out %in-1 would be equivalent to a proportional band of\n100. Large proportional band implies low gain.\n\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 7: High Order Overdamped Processes\n7.15\nintegral time and reset rate\nJust as proportional mode has an inverse convention, the integral time is sometimes replaced\nwith the reset rate. The reset rate is simply the reciprocal of the integral time, and has\ndimensions of repeats time-1. Using a large reset rate is equivalent to a small integral time,\nimplying aggressive integral mode control.\n\n7.16\nreset windup in integral mode\nThe integral mode integrates the error over time; a persistent error leads to\na growing integral-mode contribution to the controller output. In our\ndefinition of the standard PID algorithm, there is no limit to the growth of\nthis contribution. Hence under some circumstances the computed\ncontroller output could become significantly greater than 100%. The\nvalve would be no more than fully open (or closed) as described in Section\n7.13, but the controller output would be increasing. If the error were\nfinally reversed, requiring the valve direction to reverse, the controller\nwould be unable to direct it to do so until the integral mode contribution\nhad been reduced by persistent error of the opposite sign.\n\nSuch a condition is called reset windup, and could occur under prolonged\nsevere input step disturbances, or a fault in the loop (such as a mistakenly\nclosed manual valve) that prevented the manipulated variable from\naffecting the controlled variable. Controller devices and algorithms\ngenerally include windup protection to prevent the unbounded growth of\nthe integral mode.\n\n7.17\nprotecting set point changes from derivative spikes\nThe standard PID algorithm defined the derivative mode in terms of the\ntime derivative of the error. However, derivative mode need not be\nemployed in response to set point changes, so the definition is changed to\napply derivative only to changes in the controlled variable. Thus the\nalgorithm becomes\n\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n-\nε\n+\nε\n=\n-\n∫\nt\nD\nI\nc\nbias\n,\nco\nco\ndt\ndy\nT\ndt\nT\nK\nx\nx\n\n(7.17-1)\n\nHere y represents the controlled variable, and the sign in front of TD has\nbecome negative, because error is always defined as the difference\nbetween set point and controlled variable.\n\nAlgorithm (7.17-1) is the basis of practical controller algorithms.\nHowever, for derivations and some illustrations we will still use the\nLaplace transform of original algorithm.\n\n7.18\nfiltering the derivative mode\nThe derivative mode, by reacting to the rate of change of the controlled\nvariable, is subject to noise. Applying derivative mode to a noisy signal\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 7: High Order Overdamped Processes\ncan introduce disturbances by needless variation of the manipulated\nvariable. The effect of noise can be reduced by filtering the derivative\nmode; this is usually shown by altering the derivative-mode term in the\nPID algorithm:\n\ns\nT\ns\nT\nD\nD\n+\nα\n\n(7.18-1)\n\nEquation (7.17-1) may be thought of as the transfer function that describes\nsending input ε(s) first through a differentiator TDs followed by a first-\norder filter (αTDs+1)-1. In the time domain, this would be represented as\n\ndt\nd\nT\ndt\nd\nT\nD\ndf\ndf\nD\nε\n=\nε\n+\nε\nα\n\n(7.18-2)\n\nwhere the variable εdf is the differentiated, filtered error signal that is\ncombined with the original error and the integrated error in the PID\nalgorithm. The filter parameter α is often set between 0.1 and 0.2. If α\nwere zero, εdf would be the unfiltered derivative of the error ε in the ideal\nPID algorithm.\n\nCLOSED LOOP BEHAVIOR\n\n7.19\nclosed loop transfer function\nThe familiar closed loop diagram can be drawn, and the closed loop\ntransfer function derived. For the disturbance\n\ns\nm\nD\nI\nc\nv\ns\nd\n'\nAi\n'\nA\ne\ns\nK\ns\nT\ns\nT\nK\nK\nK\ns\nK\n)s(\nC\n)s(\nC\nθ\n-\n+\nτ\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n+\n+\n+\n+\nτ\n=\n\n(7.19-1)\n\nIn (7.19-1) we have omitted the dead time from the disturbance transfer\nfunction in the numerator because we (presume that we) have no\nindependent measure of CAi and thus only know that a disturbance has\noccurred when we see the response in CA. We proceed as before to\nresolve the fractions, and obtain\n\ns\nI\nD\nm\nc\nv\ns\nd\n'\nAi\n'\nA\ne\nT\ns\ns\nT\nK\nK\nK\nK\ns\ns\ns\nK\n)s(\nC\n)s(\nC\nθ\n-\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\n+\n+\n+\n+\nτ\n=\n\n(7.19-2)\n\nHere, we grind to a halt, because none of our Laplace transform\nexperience has prepared us to deal with the exponential term in the\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 7: High Order Overdamped Processes\ndenominator. It is possible to substitute a polynomial approximation\n(called a Pade approximation) for the exponential term, and thus obtain an\napproximate transfer function that can be inverted, but we will not do this.\n\n7.20\nBode criterion for closed loop stability\nInstead, let us examine the stability of the closed loop by the Bode\ncriterion. Extracting the loop transfer function from the denominator in\n(7.19-1) we obtain the frequency response.\n\nI\nD\nm\nc\nv\ns\nL\nA\n)\n(\nT\nT\nK\nK\nK\nK\n)\nj(\nG\nR\nτω\n+\n⎟⎟\n⎠\n⎞\n⎜⎜\n⎝\n⎛\nω\n-\nω\n+\n=\nω\n=\n\n(7.20-1)\n\nθω\n-\nω\n-\nω\n+\nωτ\n-\n=\nω\n∠\n=\nφ\n-\n-\n)\nT\nT\n(\ntan\n)\n(\ntan\n)\nj(\nG\nI\nD\nL\n\n(7.20-2)\n\nFrom (7.20-2) we see that the crossover frequency depends on the system\nmodel parameters τ and θ, and it may be further influenced by controller\nparameters TI and TD. These controller settings also influence the\namplitude ratio, along with the controller gain Kc.\n\nChoosing sample process and controller parameters\n\nKsKmKv = 0.5\nτ = 3 min\nθ = 1 min\nTI = 10 min\nTD = 2 min\n\nthe crossover frequency is computed to be 3.088 radians min-1 and the\ncontroller gain at instability to be 2.994. The Bode plot for the loop\ntransfer function is shown in Figure 7.20-1. Amplitude ratios are plotted\nfor gains below, at, and above the stability limit (which is indicated by a\nmarker).\n\nNotice that the amplitude ratio becomes level at high frequencies, instead\nof dropping off, as we have previously seen. This is because the\ndecreasing amplitude of the first order process is balanced by the\nincreasing amplitude of the derivative controller mode. The derivative\nmode filter described in Section 7.18 would prevent this high derivative\ngain at high frequencies.\n\nThe phase angle actually rises over some range of frequency, due to the\ncontributions of the controller, but ultimately the process dead time\ndominates, and the phase angle crosses the -180o stability criterion.\n\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 7: High Order Overdamped Processes\n0.01\n0.1\n0.001\n0.01\n0.1\namplitude ratio\n-700\n-600\n-500\n-400\n-300\n-200\n-100\n0.001\n0.01\n0.1\nω (radians min-1)\nphase angle (deg)\n0.01\n0.1\n0.001\n0.01\n0.1\namplitude ratio\n-700\n-600\n-500\n-400\n-300\n-200\n-100\n0.001\n0.01\n0.1\nω (radians min-1)\nphase angle (deg)\n\nFigure 7.20-1. Bode plot for loop transfer function at gains 1, 3, and 5\n\nA numerical calculation of closed loop response to a tiny step disturbance\nis given in Figure 7.20-2. The system is initially stable, but the 1%\ndisturbance initiates a cycle of oscillation that increases in amplitude. In a\nperfectly linear system, the amplitude would increase without bound. In a\npractical closed loop, the valve output would oscillate between fully open\nand fully closed, and the process would move into regions of operation not\nwell described by the model and parameters in use. While not strictly\nunbounded, the practical system response is nonetheless undesirable, so\nthat the linear stability analysis has indicated a controller setting to be\navoided.\n\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 7: High Order Overdamped Processes\ndisturbance\ntime\nmanipulated and controlled variables\nmanipulated\ncontrolled\ndisturbance\ntime\nmanipulated and controlled variables\nmanipulated\ncontrolled\n\nFigure 7.20-1. Unstable response to small disturbance at gain of 3\n\n7.21\ntuning the controller via correlations\nThe Bode criterion has given us an estimate of the stability boundary; we\nmust still decide where to set the controller. We have previously tuned\ncontrollers by several methods:\n- stability preservation - adjusting gain to realize particular gain and\nphase margins\n- direct simulation with a process model to minimize integral\nmeasures of error, such as IE and IAE, for various inputs\n- direct simulation with a process model using less comprehensive\ncriteria, such as minimizing time to return to less than 2%\ndeviation.\n\nNow we introduce two correlations for setting controller parameters. In\neach case, the method represents the process as an FODT and specifies\ncontroller settings as a function of the model parameters. The correlations\ngive different results because their authors had different ideas of what\nconstituted \"good control\".\n\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 7: High Order Overdamped Processes\nZeigler-Nichols\nProbably the best known, it actually comes in two flavors. The first (open\nloop) defines controller parameters in terms of the FODT process\nparameters (p.347 in Marlin). The second (closed loop) depends on\nknowing the controller gain that will push the closed loop to the point of\ninstability (constant amplitude oscillation), if only proportional mode is\nused. Controller parameters are then defined in terms of the gain and the\nfrequency of the sustained oscillation (p.330 in Marlin). The independent\nvariables in these methods can be determined from an existing FODT\nmodel, or from empirical plant testing (careful with that instability test,\nhowever!)\n\nCiancone\nThis is Marlin's recommendation. Read Chapter 9 for the story of its\ndevelopment. Read particularly Example 9.5 for a good illustration of its\nuse. In short, the correlation provides robust tuning for an FODT process\n(and thus for anything reasonably approximated by FODT). The closed\nloop equations (FODT and PID controller) were solved numerically to\npredict controlled variable response to disturbance and set point steps.\nControlled variable IAE was minimized by varying controller parameters\nKc, Ti, and Td. However, this optimization was broadened beyond a single\noperating case. It accounted for model error and changes in operating\nconditions by computing IAE for multiple cases, in which model\nparameters were varied. In addition, constraints were placed on variation\nin the manipulated variable. The correlation is presented as graphical\nrelations among nondimensional parameters.\n\n⎟\n⎠\n⎞\n⎜\n⎝\n⎛\n+\n=\n+\n⎟\n⎠\n⎞\n⎜\n⎝\n⎛\n+\n=\n+\n⎟\n⎠\n⎞\n⎜\n⎝\n⎛\n+\n=\nθ\nτ\nθ\nθ\nτ\nθ\nτ\nθ\nθ\nτ\nθ\nτ\nθ\nf\nT\nf\nT\nf\nK\nK\ni\ni\np\nc\n\n(7.21-1)\n\nThe controller gain is normalized by the product of the gains in the\nremainder of the loop (recall that the product of the gains around the\nfeedback loop is dimensionless). The integral and derivative times are\nnormalized by the sum of the FODT time constant and dead time. The\nindependent variable is the fraction dead time in the process.\n\nOther correlations could be used (many are available; Seborg et al (2004)\ngive a good overview), but the general idea should be clear: first get\nknowledge of the process itself, such as a dynamic model and the values\nof its parameters, and use this knowledge to choose controller settings.\nThe variety of results that can be obtained in practical systems is due\npartly to the richness of the mathematical form of the PID algorithm in a\nclosed feedback loop, and partly to the approximate nature of our process\nmodels - the real process simply has more potential for complexity than\nour mathematical models can predict. Marlin (2000) gives further\ndiscussion of the effects of error in process models.\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 7: High Order Overdamped Processes\n7.22\nconclusion\nWe have asserted that an enormous variety of chemical processes may be\nrepresented by the FODT approximation. With the FODT process we\nhave introduced the crucial issue of dead time. Dead time is one of the\ndistinguishing features of chemical process control, and exerts strong\ninfluence on how well the process can be controlled.\n\nHaving such a standard system model available allows the development of\ncorrelations for tuning controllers. The correlations point out that good\nknowledge of the process is the basis for successful control. We will find\nthat as more detailed understanding of the process is obtained, more\nsophisticated control strategies can be employed.\n\n7.23\nreferences\nMarlin, Thomas E. Process Control. 2nd ed. Boston, MA: McGraw-Hill, 2000.\nISBN: 0070393621.\n\nSeborg, Dale, Thomas Edgar, and Duncan Mellichamp. Process Dynamics and\nControl. 2nd ed. Hoboken, NJ: Wiley, 2004. ISBN: 0471000779.\nrevised 2006 Mar 29"
    },
    {
      "category": "Resource",
      "title": "8_cascade_and_ff.pdf",
      "type": "PDF",
      "source_url": "https://ocw.mit.edu/courses/10-450-process-dynamics-operations-and-control-spring-2006/3687206ba1051533fb5d29a63df08899_8_cascade_and_ff.pdf",
      "content": "Spring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 8: Cascade and Feedforward Control Schemes\n8.0\ncontext and direction\nKnowledge of the process is the basis for successful process control. In\nLesson 7, we used process knowledge to guide, through tuning\ncorrelations, our choice of controller parameters. In this lesson, process\nknowledge will guide our choice of control structure itself: by making\nadditional process measurements, we will augment the single-loop\nfeedback control scheme to give it greater capability.\n\nDYNAMIC SYSTEM BEHAVIOR\n\n8.1\na process with identifiable intermediate variable\nWe begin with a process that has three inputs, two of them disturbances,\nand one output that we will wish to control. As usual, transfer functions\nGd1(s), Gd2(s), and Gm(s) may refer to the same assembly of equipment,\nbut specify how the output variable y depends on each particular input.\n\nGd2(s)\nGm(s)\nx'\nd2(s)\nx'\nm(s)\ny' (s)\nGd1(s)\nx'\nd1(s)\nGd2(s)\nGm(s)\nx'\nd2(s)\nx'\nm(s)\ny' (s)\nGd1(s)\nx'\nd1(s)\n\nThe Laplace domain process description is then\n\n)s(\nx\nG\n)s(\nx\nG\n)s(\nx\nG\n)s(\ny\n'\nd\nd\n'\nd\nd\n'\nm\nm\n'\n+\n+\n=\n\n(8.1-1)\n\nWe imagine a case in which process Gm(s) could be divided into two parts,\nconnected by a measurable intermediate variable xi: this could be as\nsimple as two tanks in series, as in Lesson 4. Having specified some of\nthe interior structure of Gm, we consider xd2 to be typical of disturbances\nthat affect the process further upstream and xd1 to affect the process\ndownstream, after the intermediate variable.\n\nGd2a(s)\nGm2(s)\nx'\nd2(s)\nx'\nm(s)\nGd1(s)\nx'\nd1(s)\ny' (s)\nGm1(s)\nx'i (s)\nGd2a(s)\nGm2(s)\nx'\nd2(s)\nx'\nm(s)\nGd1(s)\nx'\nd1(s)\ny' (s)\nGm1(s)\nx'i (s)\n\nThe process description becomes\n\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 8: Cascade and Feedforward Control Schemes\n)s(\nx\nG\n)s(\nx\nG\nG\n)s(\nx\nG\nG\n)s(\ny\n'\nd\nd\n'\nd\nm\na\nd\n'\nm\nm\nm\n'\n+\n+\n=\n\n(8.1-2)\n\nEquations (8.1-1) and (8.1-2) describe the same process, so they must be\nequivalent. Comparing them, we find\n\nm\nm\nm\nG\nG\nG\n=\n\n(8.1-3)\n\nand\n\nm\na\nd\nd\nG\nG\nG\n=\n\n(8.1-4)\n\nAlso, the intermediate variable is given by\n\n)s(\nx\nG\n)s(\nx\nG\n)s(\nx\n'\nd\na\nd\n'\nm\nm\n'\ni\n+\n=\n\n(8.1-5)\n\n8.2\nresponse to disturbances\nSuppose, for illustration, that we let each of these transfer functions be\nfirst order. Then the responses of xi and y to a step in xd2 are shown in\nFigure 8.2-1.\n\n0.2\n0.4\n0.6\n0.8\n1.2\nt/τd2\nresponse\ny\nxi\n0.2\n0.4\n0.6\n0.8\n1.2\nt/τd2\nresponse\ny\nxi\n\nFigure 8.2-1. Step response of intermediate and output variables\n\nWe observe that the intermediate variable responds before the output.\nPerhaps this can help us to improve the control of y.\n\nCONTROL SCHEME\n\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 8: Cascade and Feedforward Control Schemes\n8.3\nstep 1 - specify a control objective for the process\nOur control objective is to maintain the outlet variable y at set point.\n\n8.4\nstep 2 - assign variables in the dynamic system\nThe controlled variable is y. The manipulated variable affects the\ncontrolled variable through the transfer function. These assignments are\nfamiliar from previous Lessons. However, we have some new\nassignments to make:\n- By looking in more detail at the composition of this process, we\nidentify an intermediate variable that influences the controlled\nvariable, responds to disturbances before the controlled variable\ndoes, and responds to the manipulated variable, as well. We can\nuse this extra information in a scheme called cascade control.\n- Furthermore, suppose we can measure a disturbance variable that\nfrequently disturbs the process. By this means, we can forecast\nwhen the controlled variable is about to be altered and forestall it\nin a scheme called feedforward control.\n\n8.5\nstep 3 - cascade control scheme\nThe idea is to insert a secondary feedback control loop between the\ncontrolled variable y and manipulated variable xm. The secondary loop\ncontrols intermediate variable xi. This variable must hold several\nqualifications:\n- it must respond to important disturbances (those that significantly\naffect the controlled variable)\n- it must also convey the effects of such disturbances to the\ncontrolled variable\n- it must respond to the manipulated variable\n\nThe intermediate variable xi is called the secondary variable, and the\ncontrol scheme now features a new secondary loop within the original\nprimary loop.\n\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 8: Cascade and Feedforward Control Schemes\nGd2a(s)\nGm2(s)\nx'\nd2(s)\nx'\nm(s)\nGd1(s)\nx'\nd1(s)\ny' (s)\nGm1(s)\nx'i (s)\nGs1(s)\nGc1(s)\nGv(s)\n-\nx'co(s)\ny'sp(s)\nGsp(s)\nGs2(s)\n-\nGc2(s)\nGd2a(s)\nGm2(s)\nx'\nd2(s)\nx'\nm(s)\nGd1(s)\nx'\nd1(s)\ny' (s)\nGm1(s)\nx'i (s)\nGd2a(s)\nGm2(s)\nx'\nd2(s)\nx'\nm(s)\nGd1(s)\nx'\nd1(s)\ny' (s)\nGm1(s)\nx'i (s)\nGs1(s)\nGc1(s)\nGv(s)\n-\nx'co(s)\ny'sp(s)\nGsp(s)\nGs2(s)\n-\nGc2(s)\n\nFigure 8.5-1. Block diagram for cascade control structure\n\nThe secondary loop controls the intermediate (secondary) variable xi by\nadjusting the manipulated variable xm. The primary loop controls the\ncontrolled variable y by manipulating the set point of the secondary\ncontroller xo1. Thus we have the same controlled variable and set point as\nbefore, but the valve has been augmented by an inner control loop.\n\nDisturbances xd2′ are rejected by the secondary loop before they affect the\nfull process, and thus response is quicker and the impact on y′ less. The\nprimary loop is necessary to handle the other disturbances, such as xd1′,\nthat always exist. The extra layer of control does not degrade the response\nto xd1′, because the process is usually much slower than the controller.\n\nCascade can be carried to more nested levels. For example, in Figure 8.5-\n2 the composition controller sets a temperature set point in the secondary\nloop; the temperature controller in turn sets the flow set point for the\ntertiary loop.\n\nF\nT\nA\nF\nT\nA\n\nFigure 8.5-2. Three-level cascade control\n\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 8: Cascade and Feedforward Control Schemes\nCascade control is still feedback control, performed with conventional PID\ncontrol algorithms. The improvement comes because we're looking inside\nthe process, discriminating among disturbances, and applying feedback\nwith increased deftness.\n\n8.6\nstep 3 - feedforward control scheme\nWe get closer to the root of the problem if we react directly to the\ndisturbance, predicting what the manipulated variable should do, not\nwaiting for a process response. This is the topic of feedforward control.\nWe contrast simple feedback control in Figure 8.6-1 with feedforward\ncontrol in Figure 8.6-2:\n\nGd2(s)\nGm(s)\nGs(s)\nGc(s)\nGv(s)\n-\nx'\nd2(s)\nx'\nm(s)\ny' (s)\ny'sp(s)\nGsp(s)\nGd1(s)\nx'\nd1(s)\nGd2(s)\nGm(s)\nGs(s)\nGc(s)\nGv(s)\n-\nx'\nd2(s)\nx'\nm(s)\ny' (s)\ny'sp(s)\nGsp(s)\nGd1(s)\nx'\nd1(s)\n\nFigure 8.6-1. Feedback control diagram\n\nIn feedback control, disturbance xd2 proceeds through the process (Gd2) to\naffect controlled variable y. The controller reacts to the resulting error and\nadjusts the manipulated variable; the change in manipulated variable\nproceeds through the process (Gm) after the fact to reduce the error.\n\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 8: Cascade and Feedforward Control Schemes\nGd2(s)\nGm(s)\nGsf(s)\nGff(s)\nGv(s)\nx'\nd2(s)\nx'\nm(s)\ny' (s)\nGd1(s)\nx'\nd1(s)\nGd2(s)\nGm(s)\nGsf(s)\nGff(s)\nGv(s)\nx'\nd2(s)\nx'\nm(s)\ny' (s)\nGd1(s)\nx'\nd1(s)\n\nFigure 8.6-2. Feedforward control diagram\n\nIn feedforward control, disturbance xd2 proceeds in parallel through the\nprocess (Gd2) and through the feedforward controller (Gff). The controller\nadjusts the manipulated variable to counteract the disturbance, so that\ndisturbance and manipulated variable affect output variable y together. In\nthe very best of cases, the manipulated variable would compensate the\ndisturbance step for step, so that the controlled variable would never be\naffected!\n\nWe also contrast feedforward with the cascade structure of Section 8.5.\nFeedforward control also adds another sensor and controller. However,\nthe concept differs from that of cascade in that the disturbance is\nmeasured, but the manipulated variable does not affect it - there is no\nfeedback. Feedforward is thus more specific than cascade control: it is\ndesigned to head off a particular disturbance. However, it cannot measure\nhow well it did, nor can it respond to other disturbances, such as xd1, that\nmight affect the controlled variable. Hence feedforward is to be applied in\nconjunction with a conventional feedback loop. Both the feedback and\nfeedforward controllers adjust the manipulated variable in Figure 8.6-3.\n\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 8: Cascade and Feedforward Control Schemes\nGd2(s)\nGm(s)\nGsf(s)\nGff(s)\nGv(s)\nx'\nd2(s)\nx'\nm(s)\ny' (s)\nGd1(s)\nx'\nd1(s)\nGs(s)\nGc(s)\n-\ny'sp(s)\nGsp(s)\nGd2(s)\nGm(s)\nGsf(s)\nGff(s)\nGv(s)\nx'\nd2(s)\nx'\nm(s)\ny' (s)\nGd1(s)\nx'\nd1(s)\nGs(s)\nGc(s)\n-\ny'sp(s)\nGsp(s)\n\nFigure 8.6-3. Feedforward/feedback control diagram\n\nThe feedforward algorithm is not conventional PID. Rather it is specific\nto the process and the disturbance. We wish to specify the feedforward\ncontroller transfer function Gff to minimize the effect of xd2 on y. Ideally,\nwe want y′(s) = 0, and from Figure 8.6-2 or 8.6-3 this requires that\n\nm\nv\nsf\nd\nff\nG\nG\nG\nG\nG\n-\n=\n\n(8.6-1)\n\nThe parallel path through the feedforward controller makes use of advance\nwarning about the disturbance. Given perfect process models, plus the\nability to render those in transfer function Gff, the compensation can\ncompletely negate the effect of xd2. Of course, perfection is unlikely, as\nwe will see later.\n\n8.7\nsummary comparison between cascade and feedforward\nOn first encounter, one is apt to confuse cascade and feedforward with one\nanother. Table 8.7-1 shows a side-by-side comparison: assume an existing\nprocess with a feedback controller, such as that in Figure 8.6-1. Call this\ncontroller the primary controller, and compare adding either a secondary\nfeedback controller in a cascade scheme (Figure 8.5-1), or a feedforward\ncontroller in a feedforward/feedback scheme (Figure 8.6-3). The table\nhighlights the similarities and differences of the two schemes.\n\nWe should conclude the comparison with a clarification of concept: think\nof \"cascade\" and \"feedforward\" as ways to arrange controllers, not\nconfined to the specific arrangements given above. That is, it is possible\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 8: Cascade and Feedforward Control Schemes\nto have a feedforward controller that adjusts the set point of a feedback\ncontroller. In this circumstance, we have both feedforward control and a\ncascade structure; we might say that the feedforward controller \"cascades\"\nto a secondary controller. We will show an example in the next section.\n\nTable 8.7-1. Comparison between cascade and feedforward control\nsimilarities\nprimary controller attempts to correct deviations from set point\nprimary controller set point unchanged\nmanipulated variable unchanged\nadd extra sensor and controller\ndifferences\ncascade (Figure 8.5-1)\nfeedforward (Figure 8.6-3)\nextra measurement:\nintermediate variable\ndisturbance variable\ncharacteristics of the new\nmeasured variable:\nintermediate variable\n- is affected by disturbances\nand manipulated variable\n- affects controlled variable\nmeasured disturbance\n- is not affected by\nmanipulated variable\n- affects controlled variable\nalgorithm of added controller:\nPID\nspecific to process model\nmanipulated variable:\ndirected by secondary\ncontroller\ndirected by both feedforward\nand feedback controllers\nprimary controller action:\nvaries set point of secondary\ncontroller\nvaries manipulated variable, as\nbefore\nhelps by:\nreducing the degree of\ndisturbance that reaches the\ncontrolled variable\nanticipating effects of a\nparticular disturbance and\nresponding to compensate\n\n8.8\nexample\nA feed stream is pre-heated using a heating oil in a shell-and-tube\nexchanger. The outlet temperature is controlled by manipulating the flow\nrate of the oil.\n\nF\nT\nT\nF\nT\nF\nT\nT\nF\nT\n\nFigure 8.8-1 Single-loop control of outlet temperature\n\nThe process is subject to several disturbances: the flow rate and inlet\ntemperature of both process (feed) and service (heating oil) streams may\nvary. The latter disturbances are particularly troublesome; because the\nheating oil is supplied from a header that feeds other, larger users, swings\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 8: Cascade and Feedforward Control Schemes\nin the supply pressure and temperature are frequent. We propose\nemploying additional measurements and control loops, arranged as shown\nin Figure 8.8-2.\n\nF\nT\nT\nF\nT\nF\nT\nT\nF\nT\n\nFigure 8.8-2 Multi-loop control scheme for outlet temperature\n\nFlow control of the service stream is now effected by a secondary loop.\nTwo primary controllers cascade to this new secondary loop. The first is\nthe original feedback controller for the process temperature. The second is\na feedforward controller from the oil temperature.\n\nShould the oil supply pressure decrease, the secondary flow controller will\nrespond by opening the supply valve. This will allow the oil flow rate to\nreturn to its desired value. The cascade structure responds to the pressure\ndisturbance before the controlled variable is affected.\n\nShould the oil supply temperature decrease, the feedforward controller\nwill respond by directing the secondary controller to increase the flow\nrate. The higher flow rate of heating oil will tend to maintain the heat duty\nin the heat exchanger even as the supply temperature falls.\n\nThe temperature controller on the oil requires a feedforward algorithm\nbecause the manipulated variable (heating oil flow) does not affect the\nmeasured variable (heating oil temperature). The temperature controller\non the process stream is a feedback controller that responds to any error in\nthat temperature, such as may arise from disturbances in the process\nstream flow and temperature. Both controllers cascade to a secondary\ncontroller.\n\nEQUIPMENT\n\n8.9\npractical feedforward controllers\nOf course there is an overwhelming variety of process models, but if we\nrecall that a large class of processes may be successfully represented by\nFODT, we can derive a feedforward controller with some claim to\ngenerality (Marlin, 2000). Lumping the valve and sensor into the process\ndescription, the transfer function (8.6-1) becomes\n\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 8: Cascade and Feedforward Control Schemes\n)\n(\nd\nm\nm\nd\nff\nm\nd\ne\ns\ns\nK\nK\nG\nθ\n-\nθ\n-\n+\nτ\n+\nτ\n-\n=\n\n(8.9-1)\n\nWe generalize this form by associating a controller gain with the ratio of\nprocess gains, a lead time with the xm process path, a lag time with the xd2\nprocess path, and a dead time with the difference between disturbance and\nmanipulated process dead times. These four parameters may then be\ntuned, as with PID parameters, to improve controlled variable response to\nxd2′.\n\nff\ne\ns\nT\ns\nT\nK\nG\nlag\nlead\nff\nff\nθ\n-\n+\n+\n=\n\n(8.9-2)\n\nThe effect of gain is to amplify the controller response to an input. The\ngain satisfies the steady state relationship between disturbance and\nmanipulated variables. The effect of dead time is to delay the controller's\nresponse, so that it will not affect the controlled variable prematurely.\nSuch a step is appropriate if the disturbance dead time exceeds that of the\nprocess. However, if the disturbance dead time is less, perfect control\nrequires a negative θff, which implies predicting the onset of future\ndisturbances! Such a time-machine would be very useful, for many\npurposes, but we are not likely to find one - thus the parameter θff would\nbe set to zero.\n\nWe can illustrate (8.9-2) by calculating the output of the controller upon\nreceiving a step input of magnitude A. Applying the step change and\ninverting, we find\n\n(\n)\nff\nlag\nt\nT\nlead\nlag\nco\nff\nlag\nT\nT\nx\nAK\ne\nT\n-\n-θ\n⎡\n⎤\n-\n′ =\n+\n⎢\n⎢\n⎥\n⎣\n⎦\n⎥\n(8.9-3)\n\nThe lead/lag elements shape the development of the response, as shown in\nFigure 8.9-1. For example, if Tlag is set to be greater than Tlead, the\ncontroller output increases with time. This is appropriate if the\ndisturbance propagates more slowly through the process than does the\nmanipulated variable. If the reverse is true, then a more vigorous\nmanipulated variable response is in order from the start, and so Tlead is set\nlarger than Tlag.\n\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 8: Cascade and Feedforward Control Schemes\ntime\nchange in controller output\nlead = 2 x lag\nlead = lag\nlead = 0.5 x lag\n\nFigure 8.9-1 Response of controller Gff to a step input\n\n8.10\nsumming feedforward and feedback signals at one valve\nEach controller specifies, at any time, how much the valve should be\nmoved from its previous position. These two outputs are summed and\nthen sent to the valve transducer.\n\nIt may be that the two controllers will oppose each other, so that the sum\nof the outputs is a smaller movement than each individual controller\nwould have directed. This is not necessarily a problem: each controller\nresponds in its own area of expertise (feedback responding to present\nerror; feedforward forecasting the effects of present disturbance) and the\nsum of the outputs addresses both concerns.\n\nOf course, the sum of the controller outputs could fall outside the physical\n0 - 100% range of the valve. In this case, the valve can move only to its\nlimit in response. If this is a frequent occurrence, the manipulated variable\nmay be insufficiently strong to overcome disturbances.\n\n8.11\nflow control\nAs we have already seen in examples, a very common application of a\ncascade scheme is to use a flow controller as an inner cascade loop. This\nallows the flow to be less affected by, for example, pressure differences,\nso that it can be a more reliable manipulated variable in the outer loops.\n\nWe examine the flow control loop. The equipment comprises a valve, a\nflowmeter, and connecting pipe.\n\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 8: Cascade and Feedforward Control Schemes\nFC\nFC\n\nFigure 8.11-1 Equipment to measure and manipulate flow\n\nIf we regard the valve as the final control element and the flowmeter as the\nsensor, there is really no process left. Hence a block diagram will show\nthe process as a unity transfer function: the controlled variable and\nmanipulated variable are identical:\n\nGd2(s)\nGs(s)\nGc(s)\nGv(s)\n-\nΔP\nflow\nflow\nset point\nGsp(s)\nGd1(s)\nproperties\nflowmeter\nvalve\nfrom outer loop\ncontroller output\nGd2(s)\nGs(s)\nGc(s)\nGv(s)\n-\nΔP\nflow\nflow\nset point\nGsp(s)\nGd1(s)\nproperties\nflowmeter\nvalve\nfrom outer loop\ncontroller output\n\nFigure 8.11-2 Block diagram of flow control loop\n\nThe valve affects the flow through the stem position, as described in\ntransfer function Gv. The diagram also identifies two disturbances that\naffect flow: a change in the pressure difference across the valve (as might\nresult from variations in sources and sink conditions) and changes in\nphysical properties of the flowing fluid. All these transfer functions come,\nas in other examples, from a linearized model of flow through a valve.\n\nAfter our emphasis on distinguishing manipulated and controlled\nvariables, having the manipulated variable be identical to the controlled\nvariable may seem peculiar. An alternative point of view is to consider\nthe manipulated variable to be the valve stem position, as shown in Figure\n8.11-3.\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 8: Cascade and Feedforward Control Schemes\n\nGd2(s)\nGm(s)\nGs(s)\nGc(s)\n-\nΔP\nstem position\nflow\nset point\nGsp(s)\nGd1(s)\nproperties\nflowmeter\nvalve\ncontroller output\nfrom outer loop\nGd2(s)\nGm(s)\nGs(s)\nGc(s)\n-\nΔP\nstem position\nflow\nset point\nGsp(s)\nGd1(s)\nproperties\nflowmeter\nvalve\ncontroller output\nfrom outer loop\n\nFigure 8.11-3 Alternative block diagram of flow control loop\n\nIn effect, the transfer function that describes how valve stem position\naffects flow has moved from Gv in Figure 8.11-2 to Gm in Figure 8.11-3.\nIn this series of Lessons, we have preferred the point of view of Figure\n8.11-2; that is, a controller acts through a final control element to produce\na flow, which may then be used to manipulate a process output.\n\nCLOSED LOOP BEHAVIOR\n\n8.12\ncascade performance\nFrom Figure 8.5-1, we derive the transfer function for the closed loop\ncascade structure. With nested loops in block diagrams, it is best to begin\nwith the inner loop.\n\n(\n)s(\nx\nG\n)s(\nx\nG\nG\nG\n)s(\nx\nG\n\n)s(\nx\nG\n)s(\nx\nG\n)s(\nx\n'\ni\ns\n'\nco\nc\nv\nm\n'\nd\nd\n'\nm\nm\n'\nd\nd\n'\ni\n-\n+\n=\n+\n=\n)\n\n(8.12-1)\n\nso that\n\n)s(\nx\nG\nG\nG\nG\n)s(\nx\nG\nG\n)s(\nx\n'\nco\nL\nc\nv\nm\n'\nd\nL\nd\n'\ni\n+\n+\n+\n=\n\n(8.12-2)\n\nwhere the transfer function around the secondary loop is\n\ns\nc\nv\nm\nL\nG\nG\nG\nG\nG\n=\n\n(8.12-3)\n\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 8: Cascade and Feedforward Control Schemes\nWith xi′ known, we continue in the outer loop.\n\n(\n))s(\ny\nG\n)s(\ny\nG\nG\nG\nG\nG\nG\nG\n)s(\nx\nG\nG\nG\n)s(\nx\nG\n\n)s(\nx\nG\nG\nG\nG\nG\n)s(\nx\nG\nG\nG\n)s(\nx\nG\n\n)s(\nx\nG\n)s(\nx\nG\n)s(\ny\n'\ns\n'\nsp\nsp\nc\nL\nc\nv\nm\nm\n'\nd\nL\nd\nm\n'\nd\nd\n'\nco\nL\nc\nv\nm\nm\n'\nd\nL\nd\nm\n'\nd\nd\n'\ni\nm\n'\nd\nd\n'\n-\n+\n+\n+\n+\n=\n+\n+\n+\n+\n=\n+\n=\n\n(8.12-4)\n\nSolving for y′\n\n(\n)\n)s(\ny\nG\nG\nG\nG\nG\nG\nG\nG\n)s(\nx\nG\nG\nG\nG\n)s(\nx\nG\nG\nG\nG\n)s(\ny\n'\nsp\nL\nL\nsp\nc\nc\nv\nm\nm\n'\nd\nL\nL\nd\nm\n'\nd\nL\nL\nL\nd\n'\n+\n+\n+\n+\n+\n+\n+\n+\n+\n=\n(8.12-5)\n\nwhere the transfer function around the primary loop is\n\ns\nc\nc\nv\nm\nm\nL\nG\nG\nG\nG\nG\nG\nG\n=\n\n(8.12-6)\n\nEquation (8.12-5) is general for a two-loop cascade structure with the\ndisturbances arranged as in Figure 8.5-1. It can be specialized by\nsubstituting particular transfer functions for the components in the\ncascade.\n\n8.13\ncascade tuning\nMarlin (2000) suggests tuning the inner loop first, with the outer loop in\nmanual setting. Then tune the outer loop with the inner loop in automatic\nsetting.\n\n8.14\ncascade closed loop stability\nThe characteristic equation for the cascade structure, obtained from (8.12-\n5), contains the transfer functions for both controllers. Hence both\ncontrollers affect the poles and thus stability of the cascade.\n\n8.15\nfeedforward performance and stability\nFrom Figure 8.6-3, we derive the transfer function for the closed loop\nfeedback/feedforward structure.\n\n(\n)\n(\n))s(\ny\nG\n)s(\ny\nG\nG\nG\nG\n)s(\nx\nG\nG\nG\nG\n)s(\nx\nG\n)s(\nx\nG\n\n)s(\nx\n)s(\nx\nG\nG\n)s(\nx\nG\n)s(\nx\nG\n\n)s(\nx\nG\n)s(\nx\nG\n)s(\nx\nG\n)s(\ny\n'\nsp\n'\nsp\nsp\nc\nv\nm\n'\nd\nsf\nff\nv\nm\n'\nd\nd\n'\nd\nd\n'\nco\n'\ncof\nv\nm\n'\nd\nd\n'\nd\nd\n'\nm\nm\n'\nd\nd\n'\nd\nd\n'\n-\n+\n+\n+\n=\n+\n+\n+\n=\n+\n+\n=\n(8.15-1)\n\nSolving for controlled variable y′\n\nrevised 2006 Mar 29\n\nSpring 2006\nProcess Dynamics, Operations, and Control\n10.450\n\nLesson 8: Cascade and Feedforward Control Schemes\n)s(\ny\nG\nG\nG\nG\nG\n)s(\nx\nG\nG\nG\nG\nG\nG\n)s(\nx\nG\nG\n)s(\ny\n'\nsp\nL\nsp\nc\nv\nm\n'\nd\nL\nsf\nff\nv\nm\nd\n'\nd\nL\nd\n'\n+\n+\n+\n+\n+\n+\n=\n\n(8.15-2)\n\nwhere the transfer function around the feedback loop is\n\ns\nc\nv\nm\nL\nG\nG\nG\nG\nG =\n\n(8.15-3)\n\nNotice that the feedforward controller affects only the transfer function for\ndisturbance xd2; other disturbances and the set point have the usual\nfeedback loop transfer functions. By (8.6-1) we try to make the xd2\ntransfer function zero. However, if it is not, the feedback controller is also\navailable, through the transfer function denominator, to respond to xd2, as\nit does to other disturbances.\n\nBecause the characteristic equation obtained from (8.15-2) does not\ndepend on the feedforward controller, adding a feedforward loop has no\neffect on tuning the feedback controller for closed loop stability. Even so,\nif the feedforward controller itself is unstable, the ensemble is likely to be\ninoperable.\n\n8.16\nfeedforward tuning\nIdeally all the other disturbances would subside so that the feedback loop\ncould be put in manual and the feedforward loop tuned to respond to its\nparticular disturbance. One may not be so fortunate, however.\n\n8.17\nconclusion\nBy going to the trouble and expense of extra measurements, and obtaining\ndeeper knowledge of the process, we are enabled to improve on the\nperformance of the single-loop PID controller. This is not to say that\ncascade or feedforward enhancements are always to be recommended -\nthey must be technically feasible (the measurements and character of the\nnew variables being appropriate) and economically justified. This of\ncourse, is a familiar story to engineers.\n\nFeedforward and cascade point the way to further control schemes that\nmake use of process models. Various forms of model-based control can\noffer advantages in single control loops, but really come into their own\nwhen we consider how individual control loops may interact - that is,\nwhen realistic process models are MIMO - multiple input/multiple output.\n\n8.18\nreference\nMarlin, Thomas E. Process Control. 2nd ed. Boston, MA: McGraw-Hill, 2000.\nISBN: 0070393621.\nrevised 2006 Mar 29"
    }
  ]
}